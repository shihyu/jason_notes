<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rustç­†è¨˜ - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html">Jason Notes</a></li><li class="chapter-item expanded "><a href="ubuntu/ubuntu_setup.html">Ubuntu</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ubuntu/command.html">Command</a></li><li class="chapter-item "><a href="ubuntu/gcp.html">GCP ssh</a></li><li class="chapter-item "><a href="ubuntu/wine.html">Wine</a></li></ol></li><li class="chapter-item expanded "><a href="android/android.html">Android</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="android/install_sdk.html">SDK install</a></li><li class="chapter-item "><a href="android/flutter.html">Flutter</a></li></ol></li><li class="chapter-item expanded "><a href="tools/tools.html">Tools</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="tools/asciinema.html">asciinema æŠŠçµ‚ç«¯æ“ä½œéŒ„è£½æˆ gif å‹•ç•«</a></li><li class="chapter-item "><a href="tools/finmind.html">Finmind</a></li><li class="chapter-item "><a href="tools/add-enter-and-exit-trace-for-your-function.html">addr2line</a></li><li class="chapter-item "><a href="tools/cmake.html">cmake</a></li><li class="chapter-item "><a href="tools/network.html">Network</a></li><li class="chapter-item "><a href="tools/python-pycryptodome-aes-symmetric-encryption-tutorial-examples.html">å¯¦ä½œ AES å°ç¨±å¼åŠ å¯†</a></li></ol></li><li class="chapter-item expanded "><a href="html/html.html">HTML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="html/vue.html">Vue</a></li></ol></li><li class="chapter-item expanded "><a href="vim/vim.html">Vim</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="vim/copilot.html">copilot</a></li><li class="chapter-item "><a href="vim/tabnine.html">tabnine</a></li></ol></li><li class="chapter-item expanded "><a href="gdb/gdb.html">Gdb</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="gdb/å¸¸ç”¨æŒ‡ä»¤.html">å¸¸ç”¨æŒ‡ä»¤</a></li><li class="chapter-item "><a href="gdb/jemalloc.html">jemalloc</a></li><li class="chapter-item "><a href="gdb/graphs.html">graphs</a></li><li class="chapter-item "><a href="gdb/rust-gdb.html">rust gdb</a></li><li class="chapter-item "><a href="gdb/qemu-gdb-risc-v64.html">qemu-gdb-risc-v64-kernel</a></li><li class="chapter-item "><a href="gdb/go-rust-gdb-debug.html">ä½¿ç”¨gdb è¿½è¹¤go/rustç¨‹å¼ç¢¼</a></li><li class="chapter-item "><a href="gdb/gdb-function-trace-to-flowchart-guide.html">GDBå‡½æ•¸èª¿ç”¨è»Œè·¡åˆ†æèˆ‡æµç¨‹åœ–ç”Ÿæˆå®Œæ•´æŒ‡å—</a></li></ol></li><li class="chapter-item expanded "><a href="c++/cpp.html">C++</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="c++/benchmark.html">benchmark</a></li><li class="chapter-item "><a href="c++/ä¹˜ä»¥0.01å’Œé™¤ä»¥100å“ªå€‹å¿«.html">ä¹˜ä»¥ 0.01 å’Œé™¤ä»¥ 100 å“ªå€‹å¿«</a></li><li class="chapter-item "><a href="c++/smart_pointer.html">Smart pointer</a></li><li class="chapter-item "><a href="c++/l&rvalue.html">L&amp;R value</a></li><li class="chapter-item "><a href="c++/move.html">Move</a></li><li class="chapter-item "><a href="c++/CAS.html">CAS</a></li><li class="chapter-item "><a href="c++/HFT.html">HFT</a></li><li class="chapter-item "><a href="c++/cpp_note.html">Note</a></li><li class="chapter-item "><a href="c++/é«˜æ€§èƒ½ç¨‹å¼è¨­è¨ˆå¯¦æˆ°.html">é«˜æ€§èƒ½ç¨‹å¼è¨­è¨ˆå¯¦æˆ°</a></li><li class="chapter-item "><a href="c++/å¦‚ä½•é«˜æ•ˆåœ°å„²å­˜ä¸¦æ“ä½œè¶…å¤§è¦æ¨¡.html">å¦‚ä½•é«˜æ•ˆåœ°å„²å­˜ä¸¦æ“ä½œè¶…å¤§è¦æ¨¡</a></li><li class="chapter-item "><a href="c++/UC_CAPITAL.html">UC_CAPITAL</a></li><li class="chapter-item "><a href="c++/cpp-smart-pointers-guide.html">unique_ptr vs shared_ptr</a></li><li class="chapter-item "><a href="c++/cpp-move-semantics-guide.html">C++ Move èªæ„å®Œæ•´æŒ‡å—</a></li><li class="chapter-item "><a href="c++/interview.html">interview</a></li></ol></li><li class="chapter-item expanded "><a href="mojo/mojo.html">Mojo</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="mojo/mojo_crawler_guide.html">Mojo çˆ¬èŸ²å®Œæ•´æŒ‡å—</a></li></ol></li><li class="chapter-item expanded "><a href="riscv/riscv.html">RISC-V</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="riscv/qemu_riscv_linux.html">QEMUä¸Šé‹è¡ŒRISV-V Linux</a></li><li class="chapter-item "><a href="riscv/qemi_gdb.html">QEMU GDB</a></li><li class="chapter-item "><a href="riscv/qemu_gdb_lab.html">Qemu Gdb Lab</a></li></ol></li><li class="chapter-item expanded "><a href="centos/centos.html">CentOS</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="centos/tqdb_setup.html">TQDB å®‰è£ç´€éŒ„</a></li></ol></li><li class="chapter-item expanded "><a href="ssh/ssh.html">SSH</a></li><li class="chapter-item expanded "><a href="network/socket.html">Network</a></li><li class="chapter-item expanded "><a href="docker/docker_helloworld.html">Docker</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="docker/docker.html">Docker åŸºæœ¬æ•™å­¸</a></li><li class="chapter-item "><a href="docker/example.html">ç°¡å–®ç¯„ä¾‹</a></li><li class="chapter-item "><a href="docker/creating-the-perfect-python-dockerfile.html">Perfect python dockerfile</a></li><li class="chapter-item "><a href="docker/dockerfile-from-docker-image.html">ç”± Docker image åæ¨å…¶ Dockerfile</a></li><li class="chapter-item "><a href="docker/python_connect_redis.html">Pythoné€£æ¥Redis</a></li><li class="chapter-item "><a href="docker/command.html">Command</a></li><li class="chapter-item "><a href="docker/docker_compose.html">Docker compose</a></li><li class="chapter-item "><a href="docker/docker_compse_example.html">Docker compose example</a></li><li class="chapter-item "><a href="docker/python_redis.html">Python-Redis</a></li><li class="chapter-item "><a href="docker/redash.html">Redash</a></li><li class="chapter-item "><a href="docker/clickhouse.html">ClickHouse</a></li><li class="chapter-item "><a href="docker/clickhouse-setup.html">clickhouse-setup</a></li><li class="chapter-item "><a href="docker/python_run_from_local.html">Docker run local</a></li><li class="chapter-item "><a href="docker/redpanda.html">Redpanda</a></li><li class="chapter-item "><a href="docker/gcc.html">é‹è¡Œæœ€æ–°ç‰ˆGCC</a></li></ol></li><li class="chapter-item expanded "><a href="rust/rust.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="rust/note.html">Rustç­†è¨˜</a></li><li class="chapter-item "><a href="rust/basic.html">Rust åŸºæœ¬æ•™å­¸</a></li><li class="chapter-item "><a href="rust/ownership.html">Rust æ‰€æœ‰æ¬Šç³»çµ±</a></li><li class="chapter-item "><a href="rust/lifetime.html">Rust ç”Ÿå‘½é€±æœŸ (Lifetime)</a></li><li class="chapter-item "><a href="rust/type.html">Rust å‹åˆ¥ç³»çµ±</a></li><li class="chapter-item "><a href="rust/rust_setup.html">Rust Tools</a></li><li class="chapter-item "><a href="rust/polars.html">Polars</a></li><li class="chapter-item "><a href="rust/rust_call_c.html">Rust call C</a></li><li class="chapter-item "><a href="rust/pyo3.html">PyO3</a></li><li class="chapter-item "><a href="rust/10-rust-an-introduction.html">çµ¦ C++ ä½¿ç”¨è€…çš„ Rust ç°¡ä»‹</a></li><li class="chapter-item "><a href="rust/å¯è¦–åŒ–Rustå„è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€.html">å¯è¦–åŒ–Rustå„è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€</a></li><li class="chapter-item "><a href="rust/rust_note.html">å­¸ç¿’é †åº</a></li><li class="chapter-item "><a href="rust/overview.html">å¤§å±€è§€</a></li><li class="chapter-item "><a href="rust/String.html">ç†è§£å­—ä¸²</a></li><li class="chapter-item "><a href="rust/easy_rust.html">Easy Rust</a></li><li class="chapter-item "><a href="rust/rust_easy.html">Rust æ–°æ‰‹</a></li><li class="chapter-item "><a href="rust/module.html">Rust æ¨¡çµ„çµæ§‹</a></li><li class="chapter-item "><a href="rust/rust_memory.html">Rustèˆ‡è¨˜æ†¶é«”</a></li><li class="chapter-item "><a href="rust/rust_vs_cpp.html">Rust vs C++èªæ³•</a></li><li class="chapter-item "><a href="rust/rust_file_format.html">Rust æª”æ¡ˆæ ¼å¼</a></li><li class="chapter-item "><a href="rust/rust-an-introduction-in-oop.html">Rust OO</a></li><li class="chapter-item "><a href="rust/rust-an-introduction-smart-pointer.html">Rust Pointer</a></li><li class="chapter-item "><a href="rust/pointer.html">Pointer</a></li><li class="chapter-item "><a href="rust/copy_trait.html">Copy Trait</a></li><li class="chapter-item "><a href="rust/binary_lib.html">Rust å‡½æ•¸åº«/åŸ·è¡Œæª”</a></li><li class="chapter-item "><a href="rust/reqwest.html">Reqwest</a></li><li class="chapter-item "><a href="rust/print-function-name-dump-stack.html">å°å‡ºå‡½æ•¸åç¨±</a></li><li class="chapter-item "><a href="rust/criterion.html">criterion</a></li><li class="chapter-item "><a href="rust/Rustçš„ç²¾é«“.html">Rustçš„ç²¾é«“</a></li><li class="chapter-item "><a href="rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—.html">30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/rust_30_day.html">Rust 30 Day</a></li><li class="chapter-item "><a href="rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/Move_Borrow_Ownership.html">è®Šæ•¸çš„æ‰€æœ‰æ¬Šèˆ‡å€Ÿå‡ºè®Šæ•¸</a></li><li class="chapter-item "><a href="rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/Lifetime.html">Lifetimeï¼š Borrow çš„å­˜æ´»æ™‚é–“</a></li></ol></li><li class="chapter-item "><a href="rust/cpp_vs_rust_comparison.html">C++ vs. Rust: å…¨é¢ç‰¹æ€§æ¯”è¼ƒ</a></li><li class="chapter-item "><a href="rust/cpp-move-vs-rust-ownership.html">C++ Move èªç¾© vs Rust æ‰€æœ‰æ¬Šç³»çµ±çš„æ ¸å¿ƒå·®ç•°</a></li><li class="chapter-item "><a href="rust/Rust-RESTful-API-å®Œæ•´é–‹ç™¼æŒ‡å—.html">Rust-RESTful-API-å®Œæ•´é–‹ç™¼æŒ‡å—</a></li><li class="chapter-item "><a href="rust/Rust-self-Self-èˆ‡-C++-this-å°æ¯”æŒ‡å—.html">Rust-self-Self-èˆ‡-C++-this-å°æ¯”æŒ‡å—</a></li><li class="chapter-item "><a href="rust/rust-derive-traits-comparison.html">Rust Derive Traits æ¯”è¼ƒï¼šè‡ªå‹•ç”Ÿæˆ vs æ‰‹å‹•å¯¦ä½œ</a></li><li class="chapter-item "><a href="rust/rust_traits_explained.html">Rust Traits ç™½è©±è§£é‡‹ï¼šèˆ‡ C++ çš„æ¯”è¼ƒ</a></li><li class="chapter-item "><a href="rust/rust_trait_impl_markdown.html">Rust ä¸­ trait å’Œ impl çš„å·®ç•°</a></li><li class="chapter-item "><a href="rust/rust_cpp_comparison_md.html">Rust vs C++ è©³ç´°å°æ¯”æŒ‡å—</a></li><li class="chapter-item "><a href="rust/rust_module_system_markdown.html">Rust æ¨¡çµ„ç³»çµ±å®Œæ•´æŒ‡å—</a></li><li class="chapter-item "><a href="rust/ownership_vs_borrowing_guide.html">Rust æ“æœ‰æ¬Š vs å€Ÿç”¨ï¼šç”Ÿå‘½é€±æœŸå•é¡ŒæŒ‡å—ğŸ¦€</a></li><li class="chapter-item "><a href="rust/rust_ownership_guide.html">Rust æ‰€æœ‰æ¬Šç³»çµ± - ç”Ÿæ´»åŒ–è©³è§£</a></li><li class="chapter-item "><a href="rust/rust_ownership_complete_guide.html">Rust æ‰€æœ‰æ¬Šå®Œæ•´æŒ‡å— - å¾åŸºç¤åˆ°ç²¾é€š</a></li><li class="chapter-item "><a href="rust/rust_memory_guide.html">Rust è¨˜æ†¶é«”é…ç½®æŒ‡å—ï¼šStack vs Heap</a></li><li class="chapter-item "><a href="rust/rust_wrappers_guide.html">Rust åŒ…è£é¡å‹ç™½è©±æŒ‡å—ğŸ“¦</a></li></ol></li><li class="chapter-item expanded "><a href="go/go.html">Go</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="go/note.html">Golang  Note</a></li><li class="chapter-item "><a href="go/pytago.html">pytago</a></li><li class="chapter-item "><a href="go/Goç·¨ç¨‹å¯¦æˆ°æ´¾åŸºç¤å…¥é–€.html">Goç·¨ç¨‹å¯¦æˆ°æ´¾åŸºç¤å…¥é–€</a></li><li class="chapter-item "><a href="go/Goç·¨ç¨‹å¯¦æˆ°æ´¾Webé–‹ç™¼åŸºç¤.html">Goç·¨ç¨‹å¯¦æˆ°æ´¾Webé–‹ç™¼åŸºç¤</a></li><li class="chapter-item "><a href="go/golang_debugger.html">Golang Deubgger</a></li><li class="chapter-item "><a href="go/golang-go-module-tutorial.html">å¾ä¸€çŸ¥åŠè§£åˆ°ç•¥æ‡‚ Go modules</a></li><li class="chapter-item "><a href="go/go_mod.html">Go modules</a></li><li class="chapter-item "><a href="go/trace.html">Golangå¤§æ®ºå™¨ä¹‹è·Ÿè¹¤å‰–ætrace</a></li><li class="chapter-item "><a href="go/Coroutine.html">è¡Œç¨‹ã€åŸ·è¡Œç·’ã€å”ç¨‹ï¼Œå‚»å‚»åˆ†å¾—æ¸…æ¥šï¼</a></li><li class="chapter-item "><a href="go/goroutine-and-channel.html">Goä½µç™¼</a></li><li class="chapter-item "><a href="go/websocket.html">Websocket</a></li><li class="chapter-item "><a href="go/returning-pointer-from-a-function-in-go.html">Returning Pointer from a Function in Go</a></li><li class="chapter-item "><a href="go/golang-memory-management.html">GC å…¨é¢è§£æ</a></li><li class="chapter-item "><a href="go/golang-goroutine.html">Goroutine èˆ‡ GMP åŸç†å…¨é¢åˆ†æ</a></li><li class="chapter-item "><a href="go/oo.html">OO</a></li><li class="chapter-item "><a href="go/mutex-rwmutex.html">sync.Mutex å’Œ sync.RWMutex</a></li><li class="chapter-item "><a href="go/interface.html">interface</a></li><li class="chapter-item "><a href="go/example.html">Example</a></li><li class="chapter-item "><a href="go/LiveKit.html">LiveKit</a></li></ol></li><li class="chapter-item expanded "><a href="ml/ml.html">ML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ml/pytorch.html">Pytorch</a></li><li class="chapter-item "><a href="ml/pytorch_setup.html">Pytorch å®‰è£</a></li><li class="chapter-item "><a href="ml/deap.html">Deap</a></li><li class="chapter-item "><a href="ml/cudf.html">CUDF</a></li><li class="chapter-item "><a href="ml/åˆæ¢åŸºå› æ¼”ç®—æ³•.html">åˆæ¢åŸºå› æ¼”ç®—æ³•-ç”¨ OneMax å•é¡Œç¤ºç¯„</a></li><li class="chapter-item "><a href="ml/ç°¡å–®è§£é‡‹æ¢¯åº¦ä¸‹é™æ³•.html">ç°¡å–®è§£é‡‹æ¢¯åº¦ä¸‹é™æ³•</a></li><li class="chapter-item "><a href="ml/æ¢¯åº¦ä¸‹é™æ³•_gradient_descent.html">æ¢¯åº¦ä¸‹é™æ³• gradient descent</a></li><li class="chapter-item "><a href="ml/æ¢¯åº¦æœ€ä½³è§£ç›¸é—œç®—æ³•.html">æ¢¯åº¦æœ€ä½³è§£ç›¸é—œç®—æ³•</a></li><li class="chapter-item "><a href="ml/åŸºæ–¼DEAPåº«çš„Pythoné€²åŒ–æ¼”ç®—æ³•å¾å…¥é–€åˆ°å…¥åœŸ.html">åŸºæ–¼DEAPåº«çš„Pythoné€²åŒ–æ¼”ç®—æ³•å¾å…¥é–€åˆ°å…¥åœŸ</a></li><li class="chapter-item "><a href="ml/GA.html">GA</a></li><li class="chapter-item "><a href="ml/XGBoost.html">XGBoost</a></li><li class="chapter-item "><a href="ml/YOLO.html">YOLO</a></li><li class="chapter-item "><a href="ml/yolov8æ‰‹å‹¢è­˜åˆ¥.html">YOLOv8æ‰‹å‹¢è­˜åˆ¥</a></li><li class="chapter-item "><a href="ml/Roboflow.html">Roboflow</a></li></ol></li><li class="chapter-item expanded "><a href="python/python.html">Python</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="python/Poetryå®Œå…¨å…¥é–€æŒ‡å—.html">Poetryå®Œå…¨å…¥é–€æŒ‡å—</a></li><li class="chapter-item "><a href="python/æ­å»ºgRPCæœå‹™.html">æ­å»ºgRPCæœå‹™</a></li><li class="chapter-item "><a href="python/python_debugger.html">Python Debugger</a></li><li class="chapter-item "><a href="python/decorator.html">Python decorator</a></li><li class="chapter-item "><a href="python/python-decorator.html">è£é£¾å™¨çœ‹é€™ä¸€ç¯‡å°±å¤ äº†</a></li><li class="chapter-item "><a href="python/import-concept.html">import-concept</a></li><li class="chapter-item "><a href="python/process_thread.html">Process/Threadå„ªç¼ºé»</a></li><li class="chapter-item "><a href="python/processing_communcation.html">Processing é€šè¨Š</a></li><li class="chapter-item "><a href="python/condition.html">Pythonä¸­çš„waitå’Œnotify</a></li><li class="chapter-item "><a href="python/ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å¼.html">ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å¼</a></li><li class="chapter-item "><a href="python/Loguru.html">Loguru</a></li><li class="chapter-item "><a href="python/cython.html">Cython</a></li><li class="chapter-item "><a href="python/WebSocket_reconnect.html">Python WebSocketé•·é€£æ¥å¿ƒè·³èˆ‡çŸ­é€£æ¥</a></li><li class="chapter-item "><a href="python/bloomrpc.html">bloomrpc</a></li><li class="chapter-item "><a href="python/concurrent.futures.html">Concurrent futures</a></li><li class="chapter-item "><a href="python/schedule.html">ä»»å‹™èª¿åº¦</a></li><li class="chapter-item "><a href="python/plot/plot.html">Plot</a></li><li class="chapter-item "><a href="python/plot/dash.html">Dash</a></li><li class="chapter-item "><a href="python/Rust_bindings_for_Python.html">Rust bindings for Python</a></li><li class="chapter-item "><a href="python/pandas.html">Pandas</a></li><li class="chapter-item "><a href="python/coroutine.html">Coroutine</a></li><li class="chapter-item "><a href="python/finmind.html">FinMind</a></li><li class="chapter-item "><a href="python/telegram_bot.html">Telegram Bot</a></li><li class="chapter-item "><a href="python/python-different-ways-to-kill-a-thread.html">Different ways kill thread</a></li><li class="chapter-item "><a href="python/websocket_client_server.html">Websocket client/server</a></li><li class="chapter-item "><a href="python/poetry.html">å¾é›¶é–‹å§‹ä½¿ç”¨ Poetry</a></li><li class="chapter-item "><a href="python/fil-memory-usage-profiler.html">Fil-memory-usage-profiler</a></li><li class="chapter-item "><a href="python/plot.html">ç¹ªåœ–</a></li><li class="chapter-item "><a href="python/shioaji.html">æ°¸è±shioaji</a></li><li class="chapter-item "><a href="python/other.html">Other</a></li></ol></li><li class="chapter-item expanded "><a href="mermaid/mermaid.html">Mermaid</a></li><li class="chapter-item expanded "><a href="linux_system/linux_system.html">Linux System</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="linux_system/1_day_socket.html">Socket</a></li><li class="chapter-item "><a href="linux_system/cgroup.html">Cgroup</a></li><li class="chapter-item "><a href="linux_system/perf.html">Perf</a></li><li class="chapter-item "><a href="linux_system/è‡ªè£½Lib.html">build Lib</a></li><li class="chapter-item "><a href="linux_system/performance.html">performance</a></li></ol></li><li class="chapter-item expanded "><a href="strategy/bollmaker.html">Strategy</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="strategy/é€ å¸‚/market_market.html">é€ å¸‚</a></li><li class="chapter-item "><a href="strategy/tw_futures.html">è‡ºæŒ‡</a></li><li class="chapter-item "><a href="strategy/arbitrage.html">å¥—åˆ©</a></li><li class="chapter-item "><a href="strategy/é…å°äº¤æ˜“.html">é…å°äº¤æ˜“</a></li><li class="chapter-item "><a href="strategy/æµ·é¾œäº¤æ˜“.html">æµ·é¾œäº¤æ˜“</a></li><li class="chapter-item "><a href="strategy/è‚¡æµ·ç­‹è‚‰äºº.html">è‚¡æµ·ç­‹è‚‰äºº</a></li><li class="chapter-item "><a href="strategy/å¦‚ä½•é¿å…éæ“¬åˆ.html">å¦‚ä½•é¿å…éæ“¬åˆ</a></li><li class="chapter-item "><a href="strategy/å¤šç©ºæ“ä½œè¡“.html">å¤šç©ºæ“ä½œè¡“</a></li><li class="chapter-item "><a href="strategy/è³‡é‡‘æ§ç®¡æ‰æ˜¯ç‹é“.html">è³‡é‡‘æ§ç®¡æ‰æ˜¯ç‹é“</a></li><li class="chapter-item "><a href="strategy/00713_00675Læ­£äºŒèœˆèš£ç­–ç•¥.html">æ­£äºŒèœˆèš£ç­–ç•¥</a></li><li class="chapter-item "><a href="strategy/è³ªæŠ¼00713+æ­£äºŒ.html">è³ªæŠ¼00713+æ­£äºŒ</a></li><li class="chapter-item "><a href="strategy/phcebus/phcebus.html">phcebus</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="strategy/phcebus/è²å¼æ€è€ƒ.html">è²å¼æ€è€ƒ</a></li><li class="chapter-item "><a href="strategy/phcebus/è²·è‚¡3å¿ƒæ³•.html">è²·è‚¡3å¿ƒæ³•</a></li></ol></li><li class="chapter-item "><a href="strategy/Option/option.html">é¸æ“‡æ¬Š</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="strategy/Option/option_note.html">Option note</a></li></ol></li><li class="chapter-item "><a href="strategy/vectorbt.html">VectorBT</a></li><li class="chapter-item "><a href="strategy/orderbook.html">Orderbook</a></li><li class="chapter-item "><a href="strategy/é¸è‚¡æ¢ä»¶.html">é¸è‚¡æ¢ä»¶</a></li><li class="chapter-item "><a href="strategy/å¦‚ä½•é€²å ´.html">å¦‚ä½•é€²å ´</a></li><li class="chapter-item "><a href="strategy/å¦‚ä½•å‡ºå ´.html">å¦‚ä½•å‡ºå ´</a></li><li class="chapter-item "><a href="strategy/å»ºå€‰åŠ ç¢¼.html">å»ºå€‰åŠ ç¢¼</a></li><li class="chapter-item "><a href="strategy/DT.html">ç•¶æ²–</a></li><li class="chapter-item "><a href="strategy/ç•¶æ²–åšç©º.html">ç•¶æ²–åšç©º</a></li><li class="chapter-item "><a href="strategy/æŠ„åº•.html">æŠ„åº•</a></li><li class="chapter-item "><a href="strategy/éº»é“æ˜/éº»é“æ˜.html">éº»é“æ˜</a></li><li class="chapter-item "><a href="strategy/è³ºè´å¤§ç›¤çš„å‹•èƒ½æŠ•è³‡æ³•.html">è³ºè´å¤§ç›¤çš„å‹•èƒ½æŠ•è³‡æ³•</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="strategy/éº»é“æ˜/å‡çªç ´.html">å‡çªç ´</a></li></ol></li><li class="chapter-item "><a href="strategy/å¥‡æ­£/å¥‡æ­£.html">å¥‡æ­£</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="strategy/å¥‡æ­£/è³‡é‡‘æ§ç®¡èˆ‡è©¦å–®ç­–ç•¥.html">è³‡é‡‘æ§ç®¡èˆ‡è©¦å–®ç­–ç•¥</a></li><li class="chapter-item "><a href="strategy/å¥‡æ­£/å¦‚ä½•å‡ºå ´.html">å¦‚ä½•å‡ºå ´</a></li></ol></li><li class="chapter-item "><a href="strategy/ptt_stock/a0808996.html">PTT Stock</a></li><li class="chapter-item "><a href="strategy/Book/JG.html">JG</a></li><li class="chapter-item "><a href="strategy/bnf.html">BNF</a></li><li class="chapter-item "><a href="strategy/cis.html">CIS</a></li><li class="chapter-item "><a href="strategy/GA.html">GA</a></li><li class="chapter-item "><a href="strategy/stock.html">Stock</a></li><li class="chapter-item "><a href="strategy/note.html">Resource</a></li><li class="chapter-item "><a href="strategy/nansen.html">Nansen</a></li><li class="chapter-item "><a href="strategy/example.html">Example</a></li><li class="chapter-item "><a href="strategy/other.html">Other</a></li><li class="chapter-item "><a href="strategy/sample.html">Sample</a></li><li class="chapter-item "><a href="strategy/shioaji.html">shioaji æ¨¡æ“¬</a></li><li class="chapter-item "><a href="strategy/grid.html">Grid</a></li><li class="chapter-item "><a href="strategy/pine-script.html">pine-script</a></li><li class="chapter-item "><a href="strategy/æ‹¾äººç‰™æ…§.html">æ‹¾äººç‰™æ…§</a></li><li class="chapter-item "><a href="strategy/sharpe_ratio.html">å¤æ™®å€¼</a></li><li class="chapter-item "><a href="strategy/display_mae_mfe_analysis.html">MAE&amp;MFEåˆ†æ</a></li><li class="chapter-item "><a href="strategy/æµ·é¾œæŠ•è³‡æ³•å‰‡.html">æµ·é¾œæŠ•è³‡æ³•å‰‡</a></li><li class="chapter-item "><a href="strategy/edge-ratio-follow-application.html">å½ˆæ€§é€²å‡ºå ´çš„åˆ¤æ–·</a></li><li class="chapter-item "><a href="strategy/ä¸‰å¿ƒæ³•é †å‹¢æ“ä½œé™³æ—å…ƒ10å¹´è³‡ç”¢ç¿»10å€.html">ä¸‰å¿ƒæ³•é †å‹¢æ“ä½œé™³æ—å…ƒ10å¹´è³‡ç”¢ç¿»10å€</a></li><li class="chapter-item "><a href="strategy/Jump.html">JUMP</a></li><li class="chapter-item "><a href="strategy/å¼µæ¾å…æŠ•è³‡å¿ƒæ³•.html">å¼µå…æŠ•è³‡å¿ƒæ³•</a></li><li class="chapter-item "><a href="strategy/vectorbt_é…å°.html">vectorbt é…å°</a></li><li class="chapter-item "><a href="strategy/äº¤æ˜“çš„è¡Œç‚ºèˆ‡æ€ç¶­åˆ†äº«.html">äº¤æ˜“çš„è¡Œç‚ºèˆ‡æ€ç¶­åˆ†äº«</a></li><li class="chapter-item "><a href="strategy/æŠ•è³‡æŠ•æ©Ÿçš„è§€å¿µèˆ‡å¿ƒå¾—åˆ†äº«.html">æŠ•è³‡æŠ•æ©Ÿçš„è§€å¿µèˆ‡å¿ƒå¾—åˆ†äº«</a></li><li class="chapter-item "><a href="strategy/finlab.html">Finlab</a></li><li class="chapter-item "><a href="strategy/backtrader/basis.html">Backtrader</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹.html">Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹</a></li><li class="chapter-item "><a href="strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶äºŒå®šæœŸå®šé¡æŠ•è³‡.html">Python å›æ¸¬æ¡†æ¶ï¼ˆäºŒï¼‰å®šæœŸå®šé¡æŠ•è³‡</a></li><li class="chapter-item "><a href="strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸‰æŠ€è¡“æŒ‡æ¨™.html">Python å›æ¸¬æ¡†æ¶ï¼ˆä¸‰ï¼‰æŠ€è¡“æŒ‡æ¨™</a></li><li class="chapter-item "><a href="strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶å››CrossOverå’ŒSignal.html">Python å›æ¸¬æ¡†æ¶ï¼ˆå››ï¼‰CrossOver å’Œ Signal</a></li><li class="chapter-item "><a href="strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶äº”Sizer.html">Python å›æ¸¬æ¡†æ¶ï¼ˆäº”ï¼‰Sizer</a></li><li class="chapter-item "><a href="strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶å…­Analyzers.html">Python å›æ¸¬æ¡†æ¶ï¼ˆå…­ï¼‰Analyzers</a></li><li class="chapter-item "><a href="strategy/backtrader/å¤šè‚¡çµ„åˆæ“ä½œç­–ç•¥.html">å¤šè‚¡çµ„åˆæ“ä½œ</a></li><li class="chapter-item "><a href="strategy/backtrader/å‡ç·šäº¤å‰ç­–ç•¥.html">å‡ç·šäº¤å‰ç­–ç•¥</a></li><li class="chapter-item "><a href="strategy/backtrader/å”å¥‡å®‰é€šé“ç­–ç•¥.html">å”å¥‡å®‰é€šé“ç­–ç•¥</a></li><li class="chapter-item "><a href="strategy/backtrader/Sizersæ¨¡çµ„.html">Sizersæ¨¡çµ„</a></li><li class="chapter-item "><a href="strategy/backtrader/Observersæ¨¡çµ„.html">Observersæ¨¡çµ„</a></li><li class="chapter-item "><a href="strategy/backtrader/Pyfolio.html">Pyfolio</a></li><li class="chapter-item "><a href="strategy/backtrader/Sample.html">Sample</a></li><li class="chapter-item "><a href="strategy/backtrader/performance.html">Performance</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="mq/kafka.html">MQ</a></li><li class="chapter-item expanded "><a href="mq/kafka-python.html">Kafkaçš„é€šä¿—ç¸½çµ</a></li><li class="chapter-item expanded "><a href="database/database.html">Database</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="database/redis.html">Redis</a></li><li class="chapter-item "><a href="database/hash.html">Redis Hash</a></li><li class="chapter-item "><a href="database/clickhouse.html">ClickHouse</a></li><li class="chapter-item "><a href="database/dolphin.html">Dolphin</a></li><li class="chapter-item "><a href="database/sqlite.html">Sqlite</a></li></ol></li><li class="chapter-item expanded "><a href="cryptotrade/cryptotrade.html">CryptoTrade</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="cryptotrade/binance/binance.html">Binance</a></li><li class="chapter-item "><a href="cryptotrade/binance/oco.html">å¦‚ä½•å°‡OCOè¨‚å–®ç™¼é€åˆ°Binance</a></li></ol></li><li class="chapter-item expanded "><a href="git/git.html">Git</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="git/git-remove-commited-files.html">git-remove-commited-files</a></li><li class="chapter-item "><a href="git/cheat-sheet.html">Git å¸¸ç”¨</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rust-ç­†è¨˜"><a class="header" href="#rust-ç­†è¨˜">Rust ç­†è¨˜</a></h1>
<ul>
<li>as_ptr()</li>
</ul>
<pre><pre class="playground"><code class="language-rust">fn print_type_of&lt;T&gt;(_: T) {
    println!("{}", std::any::type_name::&lt;T&gt;());
}

fn main() {
    let free_coloring_book = vec![
        "mercury", "venus", "earth", "mars", "jupiter", "saturn", "uranus", "neptune",
    ];
    // 1. free_coloring_bookå †ä¸Šæ•¸æ“šçš„åœ°å€
    println!("address: {:p}", free_coloring_book.as_ptr());

    // 2. free_coloring_bookæ£§ä¸Šçš„åœ°å€
    let a = &amp;free_coloring_book;
    println!("address: {:p}", a);

    let mut friends_coloring_book = free_coloring_book;

    // 3. friends_coloring_bookå †ä¸Šæ•¸æ“šçš„åœ°å€ï¼Œå’Œ1ä¸€æ¨£
    println!("address: {:p}", friends_coloring_book.as_ptr());

    // 4. friends_coloring_bookæ£§ä¸Šçš„åœ°å€
    let b = &amp;friends_coloring_book;
    println!("address: {:p}", b);
}</code></pre></pre>
<ul>
<li>Rc / Box ç”¨æ³•</li>
</ul>
<pre><pre class="playground"><code class="language-rust">use std::rc::Rc;

struct Aa {
    id: i32,
}

impl Drop for Aa {
    fn drop(&amp;mut self) {
        println!("Aa Drop, id: {}", self.id);
    }
}

fn print_type_of&lt;T&gt;(_: &amp;T) {
    println!("{}", std::any::type_name::&lt;T&gt;());
}

fn test_1() {
    let a1 = Aa { id: 1 }; // æ•¸æ“šåˆ†é…åœ¨æ£§ä¸­
    let a1 = Rc::new(a1); // æ•¸æ“š move åˆ°äº†å †ä¸­ï¼Ÿ
    print_type_of(&amp;a1);
    //drop(a1);
    println!("xxxxxxx");
}

fn test_2() {
    let a1 = Aa { id: 1 }; // æ•¸æ“šåˆ†é…åœ¨æ£§ä¸­
    let a1 = Box::new(a1); // æ•¸æ“š move åˆ°äº†å †ä¸­ï¼Ÿ
    print_type_of(&amp;a1);
}

fn main() {
    test_1();
    test_2();
}</code></pre></pre>
<ul>
<li>data  bss text heap stack</li>
</ul>
<pre><pre class="playground"><code class="language-rust">/// .Textæ®µå­˜æ”¾çš„æ˜¯ç¨‹åºä¸­çš„å¯åŸ·è¡Œä»£ç¢¼
/// .Dataæ®µä¿å­˜çš„æ˜¯å·²ç¶“åˆå§‹åŒ–äº†çš„å…¨å±€è®Šé‡å’Œéœæ…‹è®Šé‡
/// .RODataï¼ˆReadOnlyDataï¼‰æ®µå­˜æ”¾ç¨‹åºä¸­çš„å¸¸é‡å€¼ï¼Œå¦‚å­—ç¬¦ä¸²å¸¸é‡
/// .BSSæ®µå­˜æ”¾çš„æ˜¯æœªåˆå§‹åŒ–çš„å…¨å±€è®Šé‡å’Œéœæ…‹è®Šé‡ï¼Œç¨‹åºåŸ·è¡Œå‰æœƒå…ˆé€²è¡Œä¸€éåˆå§‹åŒ–
const G_ARRAY: [i32; 5] = [10; 5];
const G_X: i32 = 100;
static G_VAR: i32 = 1000;

fn test06_heap_or_stack() {
    let s: &amp;str = "test list";
    //å­—ç¬¦ä¸²å­—é¢é‡ï¼Œä½æ–¼RODataæ®µ
    println!("&amp;str: {:p}", s); //&amp;str: 0x7ff77e4c6b88
    println!("{:p}", &amp;G_ARRAY); //dataæ®µ:0x7ff6c5fc6bb8
    println!("{:p}", &amp;G_X); //dataæ®µ:0x7ff6c5fc64f0
    println!("{:p}", &amp;G_VAR); //dataæ®µ:0x7ff77e4c6200
    println!("{}", "-".repeat(10));

    // ä½æ–¼å †
    let bi = Box::new(30);
    println!("{:p}", bi); //å †:0x19f6c6585e0
                          // å°‡å­—ç¬¦ä¸²å­—é¢é‡å¾å…§å­˜ä¸­çš„ä»£ç¢¼å€ï¼ˆRODataæ®µï¼‰å¾©åˆ¶ä¸€ä»½åˆ°å †
                          // æ£§ä¸Šåˆ†é…çš„è®Šé‡s1æŒ‡å‘å †å…§å­˜
    let mut s1: String = String::from("Hello");
    // å¯ä»¥é€šéstd::mem::transmuteå°‡
    // å¾24å­—ç¯€çš„é•·åº¦çš„3å€‹uszieè®€å‡ºä¾†
    let pstr: [usize; 3] = unsafe { std::mem::transmute(s1) };
    // pstr[0]æ˜¯ä¸€å€‹å †å…§å­˜åœ°å€
    println!("ptr: 0x{:x}", pstr[0]); //ptr: 0x19f6c658750

    println!("{}", "-".repeat(10));
    // ä½æ–¼æ£§
    let nums1 = [1, 2, 3, 4, 5, 6];
    let mut list: Vec&lt;i32&gt; = vec![20, 30, 40];
    let t = 100;
    println!("{:p}", &amp;t); //æ£§0x116aeff104
    println!("{:p}", &amp;nums1); //æ£§0x116aeff0d0
    println!("{:p}", &amp;list); //æ£§0x116aeff0e8
                             // å¾RODataå€å¾©åˆ¶äº†ä¸€ä»½å­—ç¬¦ä¸²å­—é¢é‡æ”¾åˆ°å †ä¸Šï¼Œ
                             // ç„¶å¾Œç”¨æ£§ä¸Šåˆ†é…çš„sæŒ‡å‘å †
    let s: String = "Hello".to_owned();
    println!("{:p}", &amp;s); //0x116aeff1f8
    let s: String = String::from("Hello");
    println!("{:p}", &amp;s); //0x116aeff260
    let s: String = "Hello".into();
    println!("{:p}", &amp;s); //0x116aeff2c8
}

fn main() {
    test06_heap_or_stack();
}</code></pre></pre>
<h2 id="ownershipæœ‰å€‹ç‰¹æ€§æ˜¯å€‹å¤§å‘"><a class="header" href="#ownershipæœ‰å€‹ç‰¹æ€§æ˜¯å€‹å¤§å‘">ownershipæœ‰å€‹ç‰¹æ€§æ˜¯å€‹å¤§å‘</a></h2>
<pre><pre class="playground"><code class="language-rust">// ownershipæœ‰å€‹ç‰¹æ€§ï¼Œæ„Ÿè¦ºæ˜¯å€‹å¤§å‘ï¼ŒæŠŠä¸å¯è®Šè³‡æ–™çš„ownership moveåˆ°å¯è®Šè³‡æ–™ï¼Œé‚£éº¼å°±æ”¹å€¼äº†ã€‚é€™å€‹è¨­å®šä¸å®‰å…¨ã€‚
fn main() {
    let immutable = Box::new(5u32);
    println!("{:}", immutable);

    let mut mutable_box = immutable;
    println!("{:}", mutable_box);
    *mutable_box = 4;
    println!("{:}", mutable_box);
} </code></pre></pre>
<h2 id="rustä¸­mut--mutçš„å€åˆ¥"><a class="header" href="#rustä¸­mut--mutçš„å€åˆ¥">Rustä¸­mut, &amp;, &amp;mutçš„å€åˆ¥</a></h2>
<p>è³‡æºï¼šè¨˜æ†¶é«”å€å¡Šã€‚ä¸åŒçš„è¨˜æ†¶é«”å€å¡Šä½ç½®å’Œå¤§å°å°±æ˜¯ä¸åŒçš„è³‡æºã€‚</p>
<h3 id="str"><a class="header" href="#str">str</a></h3>
<p>let a = "xxx".to_string();ã€€ã€€
å«ç¾©ï¼šaç¹«çµåˆ°å­—ä¸²è³‡æºAä¸Šï¼Œæ“æœ‰è³‡æºAçš„æ‰€æœ‰æ¬Š</p>
<p>let mut a = "xxx".to_string();ã€€
å«ç¾©ï¼šaç¹«çµåˆ°å­—ä¸²è³‡æºAä¸Šï¼Œæ“æœ‰è³‡æºAçš„æ‰€æœ‰æ¬Šï¼ŒåŒæ™‚aé‚„å¯ç¹«çµåˆ°æ–°çš„è³‡æºä¸Šé¢å»ï¼ˆæ›´æ–°ç¹«çµçš„èƒ½åŠ›ï¼Œä½†æ–°èˆŠè³‡æºé¡å‹è¦åŒï¼‰ï¼›</p>
<h3 id="value"><a class="header" href="#value">value</a></h3>
<p>let b = a;
å«ç¾©ï¼šaç¹«çµçš„è³‡æºAè½‰ç§»çµ¦bï¼Œbæ“æœ‰é€™å€‹è³‡æºA</p>
<p>let b = &amp;a;ã€€ã€€
å«ç¾©ï¼šaç¹«çµçš„è³‡æºAå€Ÿçµ¦bä½¿ç”¨ï¼Œbåªæœ‰è³‡æºAçš„è®€æ¬Šé™</p>
<p>let b = &amp;mut a;ã€€ã€€
å«ç¾©ï¼šaç¹«çµçš„è³‡æºAå€Ÿçµ¦bä½¿ç”¨ï¼Œbæœ‰è³‡æºAçš„è®€å¯«æ¬Šé™</p>
<p>let mut b = &amp;mut a;ã€€ã€€
å«ç¾©ï¼šaç¹«çµçš„è³‡æºAå€Ÿçµ¦bä½¿ç”¨ï¼Œbæœ‰è³‡æºAçš„è®€å¯«æ¬Šé™ã€‚åŒæ™‚ï¼Œbå¯ç¹«çµåˆ°æ–°çš„è³‡æºä¸Šé¢å»ï¼ˆæ›´æ–°ç¹«çµçš„èƒ½åŠ›ï¼‰</p>
<h3 id="string"><a class="header" href="#string">String</a></h3>
<p>fn do(c: String) {}ã€€ã€€
å«ç¾©ï¼šå‚³åƒçš„æ™‚å€™ï¼Œå¯¦åƒdç¹«çµçš„è³‡æºDçš„æ‰€æœ‰æ¬Šè½‰ç§»çµ¦c</p>
<p>fn do(c: &amp;String) {}ã€€ã€€
å«ç¾©ï¼šå‚³åƒçš„æ™‚å€™ï¼Œå¯¦åƒdå°‡ç¹«çµçš„è³‡æºDå€Ÿçµ¦cä½¿ç”¨ï¼Œcå°è³‡æºDå”¯è®€</p>
<p>fn do(c: &amp;mut String) {}ã€€ã€€
å«ç¾©ï¼šå‚³åƒçš„æ™‚å€™ï¼Œå¯¦åƒdå°‡ç¹«çµçš„è³‡æºDå€Ÿçµ¦cä½¿ç”¨ï¼Œcå°è³‡æºDå¯è®€å¯«</p>
<p>fn do(mut c: &amp;mut String) {}ã€€ã€€
å«ç¾©ï¼šå‚³åƒçš„æ™‚å€™ï¼Œå¯¦åƒdå°‡ç¹«çµçš„è³‡æºDå€Ÿçµ¦cä½¿ç”¨ï¼Œcå°è³‡æºDå¯è®€å¯«ã€‚åŒæ™‚ï¼Œcå¯ç¹«çµåˆ°æ–°çš„è³‡æºä¸Šé¢å»ï¼ˆæ›´æ–°ç¹«çµçš„èƒ½åŠ›ï¼‰</p>
<p>å‡½æ•¸åƒæ•¸è£¡é¢ï¼Œå†’è™Ÿå·¦é‚Šçš„éƒ¨åˆ†ï¼Œmut cï¼Œé€™å€‹mutæ˜¯å°å‡½æ•¸é«”å…§éƒ¨æœ‰æ•ˆï¼›å†’è™Ÿå³é‚Šçš„éƒ¨åˆ†ï¼Œ&amp;mut Stringï¼Œé€™å€‹ &amp;mut æ˜¯é‡å°å¤–éƒ¨å¯¦åƒå‚³å…¥æ™‚çš„å½¢å¼åŒ–ï¼ˆé¡å‹ï¼‰èªªæ˜ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­è¼¸å‡ºæ˜¯ä»€éº¼ï¼š</p>
<pre><pre class="playground"><code class="language-rust">fn concat_literal(s: &amp;mut String) {     
    s.extend("world!".chars());         
}                                       
                                          
fn main() {                             
    let mut s = "hello, ".to_owned();   
    concat_literal(&amp;mut s);             
    println!("{}", s);                  
}  </code></pre></pre>
<h2 id="æ‰“å°-borrow-ä½å€"><a class="header" href="#æ‰“å°-borrow-ä½å€">æ‰“å° borrow ä½å€</a></h2>
<pre><pre class="playground"><code class="language-rust">fn print_type_of&lt;T&gt;(_: T) {
    println!("{}", std::any::type_name::&lt;T&gt;());
}

fn test(a: &amp;mut i32) {
    println!("{:p}", *&amp;a); // æ‰“å° reference address 
    println!("{:p}", a); // æ‰“å° reference address 
    println!("{:}", a);
    *a = 100;
    println!("{:p}", &amp;a);
}

fn main() {
    let mut a = 10;
    print_type_of(a);
    let b = &amp;mut a;
    *b = 50;
    print_type_of(b);
    println!("{:p}", &amp;a);
    test(&amp;mut a);
    println!("{:}", a);
}</code></pre></pre>
<pre><pre class="playground"><code class="language-rust">fn print_type_of&lt;T&gt;(_: T) {
    println!("{}", std::any::type_name::&lt;T&gt;());
}

fn main() {
    let a: i32 = 5;
    print_type_of(a);
    println!("addrï¼š{:p}", &amp;a);
    let b = &amp;a;
    print_type_of(b);
    println!("addrï¼š{:p}", b);
    println!("value ï¼š{:}", b);
    //&amp;aå…ˆè½‰æˆrawæŒ‡é‡ï¼Œç„¶å¾Œå†æŠŠæŒ‡é‡è½‰æˆusizeï¼Œé€™å€‹å¯ä»¥printçš„
    let addr = &amp;a as *const i32 as usize;
    println!("addrï¼š0x{:X}", addr);

    //ç‚ºäº†é©—è­‰å‰›æ‰çš„åœ°å€æ˜¯ä¸æ˜¯æ­£ç¢ºçš„ï¼Œæˆ‘å€‘ä¿®æ”¹é€™å€‹æŒ‡é‡æŒ‡å‘çš„æ•¸æ“š
    //paå°±æ˜¯addrå°æ‡‰çš„rawæŒ‡é‡
    let pa = addr as *mut i32;
    //è§£å¼•ç”¨ï¼Œ*paå…¶å¯¦å°±æ˜¯&amp;mut aäº†ï¼Œçµ¦ä»–è³¦å€¼100
    unsafe { *pa = 100 };

    //æ‰“å°aï¼Œå¯ä»¥çœ‹åˆ°aå·²ç¶“è®Šæˆ100äº†
    println!("value:{}", a);
}</code></pre></pre>
<h2 id="self-å’Œ-self-çš„å€åˆ¥"><a class="header" href="#self-å’Œ-self-çš„å€åˆ¥">&amp;self å’Œ self çš„å€åˆ¥</a></h2>
<p>åœ¨ Rust çš„æ–¹æ³•ä¸­ï¼Œç¬¬ä¸€å€‹åƒæ•¸ç‚º &amp; selfï¼Œé‚£éº¼å¦‚æœæ”¹æˆ selfï¼ˆä¸æ˜¯å¤§å¯«çš„ Selfï¼‰è¡Œä¸è¡Œï¼Œå…©è€…æœ‰ä»€éº¼å€åˆ¥ã€‚
&amp;selfï¼Œè¡¨ç¤ºå‘å‡½æ•¸å‚³éçš„æ˜¯ä¸€å€‹å¼•ç”¨ï¼Œä¸æœƒç™¼ç”Ÿå°åƒæ‰€æœ‰æ¬Šçš„è½‰ç§»ï¼›
selfï¼Œè¡¨ç¤ºå‘å‡½æ•¸å‚³éçš„æ˜¯ä¸€å€‹å°è±¡ï¼Œæœƒç™¼ç”Ÿæ‰€æœ‰æ¬Šçš„è½‰ç§»ï¼Œå°è±¡çš„æ‰€æœ‰æ¬Šæœƒå‚³éåˆ°å‡½æ•¸ä¸­ã€‚
åŸæ–‡ä½œè€…ï¼šlinghuyichong
è½‰è‡ªéˆæ¥ï¼šhttps://learnku.com/articles/39050</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct MyType {
    name: String,
}

impl MyType {
    fn do_something(self, age: u32) {
        //ç­‰åƒ¹æ–¼ fn do_something(self: Self, age: u32) {
        //ç­‰åƒ¹æ–¼ fn do_something(self: MyType, age: u32) {
        println!("name = {}", self.name);
        println!("age = {}", age);
    }

    fn do_something2(&amp;self, age: u32) {
        println!("name = {}", self.name);
        println!("age = {}", age);
    }
}

fn main() {
    let my_type = MyType {
        name: "linghuyichong".to_string(),
    };
    //ä½¿ç”¨self
    my_type.do_something(18); //ç­‰åƒ¹æ–¼MyType::do_something(my_type, 18);
                              //println!("my_type: {:#?}", my_type);    //åœ¨do_somethingä¸­ï¼Œå‚³å…¥çš„æ˜¯å°è±¡ï¼Œè€Œä¸æ˜¯å¼•ç”¨ï¼Œå› æ­¤my_typeçš„æ‰€æœ‰æ¬Šå°±è½‰ç§»åˆ°å‡½æ•¸ä¸­äº†ï¼Œå› æ­¤ä¸èƒ½å†ä½¿ç”¨

    //ä½¿ç”¨&amp;self
    let my_type2 = MyType {
        name: "linghuyichong".to_string(),
    };
    my_type2.do_something2(18);
    my_type2.do_something2(18);
    println!("my_type2: {:#?}", my_type2); //åœ¨do_somethingä¸­ï¼Œå‚³å…¥æ˜¯å¼•ç”¨ï¼Œå‡½æ•¸ä¸¦æ²’æœ‰ç²å–my_type2çš„æ‰€æœ‰æ¬Šï¼Œå› æ­¤æ­¤è™•å¯ä»¥ä½¿ç”¨
    println!("Hello, world!");
}</code></pre></pre>
<ul>
<li>
<p>æ¨¡æ“¬C++ å»ºæ§‹/è§£æ§‹</p>
<pre><pre class="playground"><code class="language-rust">use std::thread;
use std::process;

struct MyStruct {
    value: i32,
}

impl MyStruct {
    fn new(value: i32) -&gt; MyStruct {
        println!("MyStruct with value {} created by pid {} tid {:?}", value, process::id(), thread::current().id());
        MyStruct { value: value }
    }
}

impl Drop for MyStruct {
    fn drop(&amp;mut self) {
        println!("MyStruct with value {} dropped by pid {} tid {:?}", self.value, process::id(), thread::current().id());
    }
}

fn main() {
    let my_struct = MyStruct::new(42);
}</code></pre></pre>
</li>
<li>
<p>trait</p>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust">
/*
 * é€™å€‹ç¨‹å¼ç¢¼å®šç¾©äº†ä¸€å€‹åå« Movable çš„ traitï¼Œé€™å€‹ trait å®šç¾©äº†ä¸€å€‹ movement æ–¹æ³•ã€‚
 * Human å’Œ Rabbit æ˜¯å…©å€‹çµæ§‹é«”ï¼Œåˆ†åˆ¥å¯¦ç¾äº† Movable traitã€‚åœ¨æ¯å€‹å¯¦ç¾ä¸­ï¼Œ
 * éƒ½å®šç¾©äº†ä¸€å€‹ movement æ–¹æ³•ï¼Œå¯¦ç¾äº†çµæ§‹é«”å¦‚ä½•ç§»å‹•çš„è¡Œç‚ºã€‚
 * åœ¨ main å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹ Human å’Œä¸€å€‹ Rabbit çš„å¯¦ä¾‹ï¼Œå­˜å„²åœ¨ human å’Œ rabbit è®Šæ•¸ä¸­ã€‚
 * ç„¶å¾Œï¼Œæˆ‘å€‘ä¾æ¬¡å°é€™å…©å€‹è®Šæ•¸åˆ†åˆ¥èª¿ç”¨äº† movement æ–¹æ³•ï¼Œåˆ†åˆ¥è¼¸å‡ºäº† "Human walk" å’Œ "Rabbit jump"ã€‚
 * é€™å€‹ç¨‹å¼ç¢¼å±•ç¤ºç­å¦‚ä½•ä½¿ç”¨ Rust çš„ trait å’Œçµæ§‹é«”ä¾†å¯¦ç¾å¤šæ…‹è¡Œç‚ºã€‚
 * ä½¿ç”¨ traitï¼Œå¯ä»¥å°‡é¡ä¼¼çš„æ“ä½œçµ„ç¹”æˆä¸€å€‹ä»‹é¢ï¼Œä¸¦å°‡å…¶å¯¦ç¾ç‚ºå¤šå€‹ä¸åŒçš„é¡å‹ã€‚é€™ä½¿å¾—ä»£ç¢¼æ›´åŠ æ¨¡çµ„åŒ–ï¼Œå¯é‡ç”¨æ€§æ›´é«˜ã€‚
 * */
trait Movable {
    fn movement(&amp;self);
}

struct Human;

impl Movable for Human {
    fn movement(&amp;self) {
        println!("Human walk");
    }
}

struct Rabbit;

impl Movable for Rabbit {
    fn movement(&amp;self) {
        println!("Rabbit jump");
    }
}

fn main() {
    let human = Human;
    let rabbit = Rabbit;

    human.movement();
    rabbit.movement();
}</code></pre></pre>
<ul>
<li>Rust ä¸­æœ‰ä¸‰ç¨®æ–¹å¼ä¾†å¼•ç”¨é€™å€‹çµæ§‹å¯¦ä¾‹ï¼š<code>self</code>ã€<code>&amp;self</code>ã€<code>&amp;mut self</code>ã€‚ä¸‹é¢èˆ‰ä¾‹èªªæ˜é€™ä¸‰ç¨®å¯¦ä¾‹å¼•ç”¨æ–¹å¼çš„ä¸åŒä¹‹è™•ã€‚</li>
</ul>
<p>self<code>å’Œ</code>&amp;mut self` éƒ½ç”¨æ–¼å¼•ç”¨çµæ§‹é«”å¯¦ä¾‹ï¼Œä½†æœ‰è‘—ä¸åŒçš„å«ç¾©ã€‚</p>
<p><code>self</code> è¡¨ç¤ºæ–¹æ³•ä½¿ç”¨çµæ§‹é«”å¯¦ä¾‹çš„æ‰€æœ‰æ¬Šï¼›è€Œ <code>&amp;mut self</code> å‰‡è¡¨ç¤ºæ–¹æ³•ä½¿ç”¨çµæ§‹é«”å¯¦ä¾‹çš„å¯è®Šå¼•ç”¨ã€‚</p>
<p>å…·é«”ä¾†èªªï¼Œç•¶ä½¿ç”¨ <code>self</code> å®šç¾©æ–¹æ³•æ™‚ï¼Œé€™å€‹æ–¹æ³•æœƒæ¥å—çµæ§‹é«”å¯¦ä¾‹çš„æ‰€æœ‰æ¬Šï¼Œå³å°‡çµæ§‹é«”å¯¦ä¾‹ç§»å‹•åˆ°æ–¹æ³•ä¸­ï¼Œå¯ä»¥åœ¨æ–¹æ³•å…§éƒ¨é€²è¡Œä¿®æ”¹æˆ–éŠ·æ¯€ã€‚ç•¶æ–¹æ³•åŸ·è¡Œå®Œç•¢å¾Œï¼Œçµæ§‹é«”å¯¦ä¾‹çš„æ§åˆ¶æ¬Šæœƒè¿”å›åˆ°èª¿ç”¨æ–¹ã€‚</p>
<p>è€Œä½¿ç”¨ <code>&amp;mut self</code> å®šç¾©æ–¹æ³•æ™‚ï¼Œé€™å€‹æ–¹æ³•æœƒæ¥å—çµæ§‹é«”å¯¦ä¾‹çš„å¯è®Šå¼•ç”¨ã€‚ç•¶æ–¹æ³•è¢«èª¿ç”¨æ™‚ï¼Œçµæ§‹é«”å¯¦ä¾‹ä¾ç„¶ä¿æŒå­˜åœ¨ï¼Œä¸¦ä¸”å¯ä»¥åœ¨æ–¹æ³•å…§éƒ¨é€²è¡Œä¿®æ”¹ã€‚ç•¶æ–¹æ³•åŸ·è¡Œå®Œç•¢å¾Œï¼Œçµæ§‹é«”å¯¦ä¾‹ä¿æŒå­˜åœ¨ä¸¦ä¸”å¯ä»¥ç¹¼çºŒä½¿ç”¨ã€‚</p>
<p>ç¸½é«”ä¾†èªªï¼Œä½¿ç”¨ <code>self</code> æ¯”ä½¿ç”¨ <code>&amp;mut self</code> æ›´åŠ éˆæ´»ï¼Œä½†ä¹Ÿæ›´åŠ å±éšªï¼Œå› ç‚ºå®ƒè½‰ç§»äº†çµæ§‹é«”å¯¦ä¾‹çš„æ‰€æœ‰æ¬Šã€‚è€Œä½¿ç”¨ <code>&amp;mut self</code> å¯ä»¥è®“æ–¹æ³•åœ¨èª¿ç”¨æ™‚ä¿ç•™çµæ§‹é«”å¯¦ä¾‹ï¼Œä¸¦å¯ä»¥åœ¨æ–¹æ³•å…§éƒ¨é€²è¡Œä¿®æ”¹ï¼Œä½†éœ€è¦æ³¨æ„å¦‚æœçµæ§‹é«”åŒæ™‚è¢«å¤šå€‹å¯è®€å¯«çš„å¼•ç”¨é€²è¡Œä¿®æ”¹ï¼Œå°±æœƒç”¢ç”Ÿè³½åšæœƒåŒæ­¥éŒ¯èª¤ã€‚å› æ­¤ï¼Œæ–¹æ³•çš„å¯¦ç¾å¿…é ˆå°å¿ƒè™•ç†å°çµæ§‹é«”å¯¦ä¾‹çš„å­˜å„²å’Œä¿®æ”¹ä¾è³´é—œä¿‚ã€‚</p>
<p>é¦–å…ˆï¼Œè®“æˆ‘å€‘å®šç¾©ä¸€å€‹çµæ§‹ <code>Person</code>ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€å€‹åç¨±å±¬æ€§ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Person {
    name: String,
}
<span class="boring">}</span></code></pre></pre>
<p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘ç‚ºé€™å€‹çµæ§‹å®šç¾©ä¸‰ç¨®æ–¹æ³•ï¼Œåˆ†åˆ¥ä½¿ç”¨ <code>self</code>ã€<code>&amp;self</code> å’Œ <code>&amp;mut self</code> ä¾†å¼•ç”¨å¯¦ä¾‹ã€‚</p>
<ol>
<li>ä½¿ç”¨ <code>self</code> å¼•ç”¨å¯¦ä¾‹ï¼Œä¸¦ä¿®æ”¹çµæ§‹å±¬æ€§ï¼š</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Person {
    fn set_name(self, new_name: String) -&gt; Person {
        Person { name: new_name }
    }
}
<span class="boring">}</span></code></pre></pre>
<p>åœ¨é€™å€‹æ–¹æ³•ä¸­ï¼Œ<code>self</code> ç‚ºçµæ§‹é«”çš„å€¼ï¼Œé€éä½¿ç”¨ <code>set_name</code> æ–¹æ³•ï¼Œæˆ‘å€‘å¯ä»¥å°‡ä¸€å€‹ <code>Person</code> çµæ§‹é«”çš„åç¨±å±¬æ€§æ›´æ”¹ç‚ºä¸€å€‹æ–°çš„åç¨±ï¼Œç„¶å¾Œè¿”å›ä¸€å€‹æ–°çš„ <code>Person</code> çµæ§‹é«”ï¼ŒåŸä¾†çš„å¯¦ä¾‹æ²’æœ‰è¢«ä¿®æ”¹ã€‚é€™ç¨®æ–¹å¼å¯ä»¥åŸåœ°ä¿®æ”¹å¯¦ä¾‹ï¼Œå› ç‚ºå®ƒè½‰ç§»äº†æ‰€æœ‰æ¬Šã€‚</p>
<ol>
<li>ä½¿ç”¨ <code>&amp;self</code> å¼•ç”¨å¯¦ä¾‹ï¼Œä½†ä¸ä¿®æ”¹çµæ§‹å±¬æ€§ï¼š</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Person {
    fn greet(&amp;self) {
        println!("Hi, my name is {}", self.name);
    }
}
<span class="boring">}</span></code></pre></pre>
<p>åœ¨é€™å€‹æ–¹æ³•ä¸­ï¼Œ<code>&amp;self</code> ç‚ºçµæ§‹é«”çš„å€Ÿç”¨å¼•ç”¨ï¼Œå®ƒå°‡ <code>Person</code> çµæ§‹é«”çš„æ‰€æœ‰æ¬Šå€Ÿç”¨çµ¦äº† <code>greet</code> æ–¹æ³•ï¼Œä½†ä¸å…è¨± <code>greet</code> æ–¹æ³•ä¿®æ”¹è©²å¯¦ä¾‹çš„ä»»ä½•å±¬æ€§ã€‚å› æ­¤ï¼Œé€™ç¨®æ–¹å¼é©ç”¨æ–¼åªéœ€è¦è®€å–çµæ§‹å±¬æ€§çš„æ–¹æ³•ã€‚</p>
<ol>
<li>ä½¿ç”¨ <code>&amp;mut self</code> å¼•ç”¨å¯¦ä¾‹ï¼Œä¸¦ä¿®æ”¹çµæ§‹å±¬æ€§ï¼š</li>
</ol>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Person {
    fn rename(&amp;mut self, new_name: String) {
        self.name = new_name;
    }
}
<span class="boring">}</span></code></pre></pre>
<p>åœ¨é€™å€‹æ–¹æ³•ä¸­ï¼Œ<code>&amp;mut self</code> ç‚ºçµæ§‹é«”çš„å¯è®Šå¼•ç”¨ï¼Œé€éä½¿ç”¨ <code>rename</code> æ–¹æ³•ï¼Œæˆ‘å€‘å¯ä»¥å°‡ä¸€å€‹ <code>Person</code> çµæ§‹é«”çš„åç¨±å±¬æ€§æ›´æ”¹ç‚ºä¸€å€‹æ–°çš„åç¨±ã€‚é€™ç¨®æ–¹å¼å…è¨±ä¿®æ”¹çµæ§‹å±¬æ€§ï¼Œå› ç‚ºå®ƒä½¿ç”¨äº†çµæ§‹é«”çš„å¯è®Šå¼•ç”¨ã€‚</p>
<p>ç¸½çµä¾†èªªï¼Œé€™ä¸‰ç¨®æ–¹å¼åˆ†åˆ¥æä¾›äº†ä¸åŒçš„å¯¦ä¾‹å¼•ç”¨æ–¹æ³•ã€‚ä½¿ç”¨ <code>self</code> å¾åŸå§‹çš„å¯¦ä¾‹ç§»å‹•æ‰€æœ‰æ¬Šï¼Œé€™åœ¨æ­¸é‚„æ–°å‰µå»ºçš„ <code>Person</code> çµæ§‹é«”æ™‚ç‰¹åˆ¥æœ‰ç”¨ã€‚ä½¿ç”¨ <code>&amp;self</code> æˆ– <code>&amp;mut self</code> ä»¥å¼•ç”¨çš„æ–¹å¼è®€å–å’Œä¿®æ”¹çµæ§‹å±¬æ€§ã€‚ä½¿ç”¨ <code>&amp;self</code>å¯ä»¥ä¿è­‰å¯¦ä¾‹æ˜¯ä¸å¯è®Šçš„ï¼Œè€Œä½¿ç”¨ <code>&amp;mut self</code> å…è¨±ä¿®æ”¹å¯¦ä¾‹çš„å…§å®¹ã€‚</p>
<ul>
<li>
<p>åœ¨ Rust ä¸­ï¼Œ<code>self</code> å’Œ <code>Self</code> éƒ½è¡¨ç¤ºçµæ§‹é«”æˆ–æšèˆ‰çš„é¡å‹ï¼Œä½†æœ‰è‘—ä¸åŒçš„å«ç¾©ã€‚</p>
<p>self<code>åœ¨æ–¹æ³•å®šç¾©ä¸­æ˜¯ç”¨ä¾†å¼•ç”¨å¯¦ä¾‹è‡ªèº«ï¼Œè€Œ</code>Self<code>å‰‡ç”¨ä¾†è¡¨ç¤ºçµæ§‹é«”æˆ–æšèˆ‰æœ¬èº«çš„é¡å‹ã€‚ä¸‹é¢æ˜¯ä¸€å€‹ç¤ºä¾‹ï¼Œèªªæ˜ç­</code>Self<code>å’Œ</code>self` çš„ä½¿ç”¨ï¼š</p>
<p>åœ¨é€™å€‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘å€‘å®šç¾©äº†ä¸€å€‹åç‚º <code>Rectangle</code> çš„çµæ§‹é«”ï¼Œä¸¦ç‚ºå…¶å¯¦ç¾äº†ä¸‰å€‹æ–¹æ³•ï¼š<code>new</code>ã€<code>area</code> å’Œ <code>same</code>ã€‚</p>
<p>åœ¨ <code>new</code> æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº† <code>Self</code> ä¾†è¡¨ç¤ºçµæ§‹é«”çš„é¡å‹ï¼Œä¸¦ä½¿ç”¨äº† <code>self</code> è®Šé‡ï¼Œå®ƒæ˜¯ä¸€å€‹å¼•ç”¨çµæ§‹é«”å¯¦ä¾‹çš„ä¸å¯è®Šå¼•ç”¨ã€‚é€™å€‹æ–¹æ³•å‰µå»ºäº†ä¸€å€‹æ–°çš„ <code>Rectangle</code> çµæ§‹é«”å¯¦ä¾‹ï¼Œä¸¦å°‡å…¶è¿”å›ã€‚</p>
<p>åœ¨ <code>area</code> æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº† <code>&amp;self</code> å¼•ç”¨ï¼Œé€™å€‹æ–¹æ³•åªæ˜¯è¨ˆç®—çµæ§‹é«”å¯¦ä¾‹çš„é¢ç©ï¼Œä½†ä¸ä¿®æ”¹å®ƒã€‚</p>
<p>åœ¨ <code>same</code> æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº† <code>&amp;Self</code> å¼•ç”¨ï¼Œé€™å€‹æ–¹æ³•ä¸éœ€è¦å¼•ç”¨çµæ§‹é«”å¯¦ä¾‹æœ¬èº«ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>Rectangle</code> é¡å‹ä¾†æ¯”è¼ƒå…©å€‹å¯¦ä¾‹æ˜¯å¦å…·æœ‰ç›¸åŒçš„å¯¬åº¦å’Œé«˜åº¦ã€‚</p>
<p>åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹ <code>Rectangle</code> çµæ§‹é«”å¯¦ä¾‹ï¼Œèª¿ç”¨äº† <code>area</code> æ–¹æ³•ä¾†è¨ˆç®—å¯¦ä¾‹çš„é¢ç©ï¼Œä¸¦èª¿ç”¨äº† <code>same</code> æ–¹æ³•ä¾†æª¢æŸ¥å¯¦ä¾‹æ˜¯å¦æ˜¯ä¸€å€‹æ­£æ–¹å½¢ã€‚</p>
<p>ç¸½çµä¾†èªªï¼Œ<code>self</code> ä¸»è¦ç”¨æ–¼æ–¹æ³•ä¸­å¼•ç”¨çµæ§‹é«”å¯¦ä¾‹æœ¬èº«ï¼Œè€Œ <code>Self</code> å‰‡ç”¨ä½œè¡¨ç¤ºçµæ§‹é«”æˆ–æšèˆ‰çš„é¡å‹ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn new(width: u32, height: u32) -&gt; Self {
        Self { width, height }
    }

    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }

    fn same(rect: &amp;Self) -&gt; bool {
        rect.width == rect.height
    }
}

fn main() {
    let rectangle = Rectangle::new(10, 5);
    println!(
        "The area of the rectangle is {} square pixels.",
        rectangle.area()
    );
    println!("Is the rectangle a square? {}", Rectangle::same(&amp;rectangle));
}
</code></pre></pre>
<h2 id="handle-trait-çš„æ–¹å¼ä¸åŒ"><a class="header" href="#handle-trait-çš„æ–¹å¼ä¸åŒ"><code>Handle</code> trait çš„æ–¹å¼ä¸åŒ</a></h2>
<p>ç¬¬ä¸€å€‹ä»£ç¢¼ç¤ºä¾‹ä¸­ï¼Œæˆ‘å€‘åœ¨ <code>Handle</code> trait ä¸­å®šç¾©äº†ä¸€å€‹å¯¦ä¾‹æ–¹æ³• <code>handle()</code>ï¼Œå®ƒæ¥å—ä¸€å€‹ <code>&amp;self</code> åƒæ•¸ï¼Œè¡¨ç¤ºè©²æ–¹æ³•æ˜¯èˆ‡ <code>Handler</code> çµæ§‹é«”å¯¦ä¾‹ç›¸é—œè¯çš„ã€‚åœ¨å¯¦ç¾ <code>Handle</code> trait æ™‚ï¼Œæˆ‘å€‘å°æ¯å€‹éœ€è¦è™•ç†çš„é¡å‹éƒ½åˆ†åˆ¥å¯¦ç¾äº† <code>handle()</code> æ–¹æ³•ï¼Œé€šé <code>impl Handle&lt;i32&gt; for Handler</code> å’Œ <code>impl Handle&lt;f64&gt; for Handler</code> å®šç¾©äº†å° <code>i32</code> å’Œ <code>f64</code> é¡å‹çš„è™•ç†éç¨‹ã€‚åœ¨ <code>main()</code> ä¸­ï¼Œæˆ‘å€‘å‰µå»ºäº† <code>Handler</code> çµæ§‹é«”å°è±¡ <code>handler</code>ï¼Œç„¶å¾Œèª¿ç”¨ <code>handler.handle(10)</code> å’Œ <code>handler.handle(10.5)</code> æ–¹æ³•ä¾†è™•ç†è¼¸å…¥çš„ä¸åŒé¡å‹æ•¸æ“šã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Handler;

trait Handle&lt;T&gt; {
    fn handle(&amp;self, input: T);
}

impl Handle&lt;i32&gt; for Handler {
    fn handle(&amp;self, input: i32) {
        println!("This is i32: {}", input);
    }
}

impl Handle&lt;f64&gt; for Handler {
    fn handle(&amp;self, input: f64) {
        println!("This is f64: {}", input);
    }
}

fn main() {
    let handler = Handler;

    // ä½¿ç”¨ i32 é¡å‹çš„ Handler
    handler.handle(10);

    // ä½¿ç”¨ f64 é¡å‹çš„ Handler
    handler.handle(10.5);
}</code></pre></pre>
<p>ç¬¬äºŒå€‹ä»£ç¢¼ç¤ºä¾‹ä¸­ï¼Œæˆ‘å€‘åœ¨ <code>Handle</code> trait ä¸­å®šç¾©äº†ä¸€å€‹é—œè¯å‡½æ•¸ <code>handle()</code>ï¼Œå®ƒä¸éœ€è¦ <code>&amp;self</code> åƒæ•¸ï¼Œè¡¨ç¤ºè©²å‡½æ•¸èˆ‡ <code>Handler</code> çµæ§‹é«”å¯¦ä¾‹ç„¡é—œã€‚åœ¨å¯¦ç¾ <code>Handle</code> trait æ™‚ï¼Œæˆ‘å€‘åŒæ¨£å°æ¯å€‹éœ€è¦è™•ç†çš„é¡å‹éƒ½åˆ†åˆ¥å¯¦ç¾äº† <code>handle()</code> é—œè¯å‡½æ•¸ï¼Œé€šé <code>impl Handle&lt;i32&gt; for Handler</code> å’Œ <code>impl Handle&lt;f64&gt; for Handler</code> å®šç¾©äº†å° <code>i32</code> å’Œ <code>f64</code> é¡å‹çš„è™•ç†éç¨‹ã€‚åœ¨ <code>main()</code> ä¸­ï¼Œæˆ‘å€‘ä¸å‰µå»ºä»»ä½• <code>Handler</code> çš„å°è±¡ï¼Œè€Œæ˜¯ç›´æ¥å° <code>Handler</code> çµæ§‹é«”é¡å‹èª¿ç”¨ <code>Handler::handle(10)</code> å’Œ <code>Handler::handle(10.5)</code>æ–¹æ³•ä¾†è™•ç†è¼¸å…¥çš„ä¸åŒé¡å‹æ•¸æ“šã€‚</p>
<p>å› æ­¤ï¼Œé€™å…©æ®µä»£ç¢¼çš„å€åˆ¥åœ¨æ–¼å¯¦ç¾ <code>Handle</code> trait çš„æ–¹å¼ä¸åŒã€‚ç¬¬ä¸€å€‹ä»£ç¢¼ç¤ºä¾‹ä¸­å¯¦ç¾äº†ä¸€å€‹å¯¦ä¾‹æ–¹æ³• <code>handle()</code>ï¼Œç¬¬äºŒå€‹ä»£ç¢¼ç¤ºä¾‹ä¸­å¯¦ç¾äº†ä¸€å€‹é—œè¯å‡½æ•¸ <code>handle()</code>ã€‚é€™å…©å€‹æ–¹æ³•/å‡½æ•¸çš„èª¿ç”¨æ–¹å¼ä¹Ÿä¸åŒã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Handler;

trait Handle&lt;T&gt; {
    fn handle(&amp;self, input: T);
}

impl Handle&lt;i32&gt; for Handler {
    fn handle(&amp;self, input: i32) {
        println!("This is i32: {}", input);
    }
}

impl Handle&lt;f64&gt; for Handler {
    fn handle(&amp;self, input: f64) {
        println!("This is f64: {}", input);
    }
}

fn main() {
    let handler = Handler;

    // ä½¿ç”¨ i32 é¡å‹çš„ Handler
    handler.handle(10);

    // ä½¿ç”¨ f64 é¡å‹çš„ Handler
    handler.handle(10.5);
}</code></pre></pre>
</li>
</ul>
<h3 id="enum-ç”¨æ³•"><a class="header" href="#enum-ç”¨æ³•">enum ç”¨æ³•</a></h3>
<pre><pre class="playground"><code class="language-rust">#[allow(clippy::all)]
enum WebsocketAPI {
    Default,
    MultiStream,
    Custom(String),
}

fn handle_websocket_api(api: WebsocketAPI) {
    match api {
        WebsocketAPI::Default =&gt; {
            println!("Handling default WebSocket API");
            // Your code for the default case
        }
        WebsocketAPI::MultiStream =&gt; {
            println!("Handling multi-stream WebSocket API");
            // Your code for the multi-stream case
        }
        WebsocketAPI::Custom(custom_api) =&gt; {
            println!("Handling custom WebSocket API: {}", custom_api);
            // Your code for the custom case, using the custom API string
        }
    }
}

fn main() {
    let default_api = WebsocketAPI::Default;
    let multi_stream_api = WebsocketAPI::MultiStream;
    let custom_api = WebsocketAPI::Custom(String::from("wss://custom.api"));

    handle_websocket_api(default_api);
    handle_websocket_api(multi_stream_api);
    handle_websocket_api(custom_api);
}
</code></pre></pre>
<h3 id="hashmap-ç”¨æ³•"><a class="header" href="#hashmap-ç”¨æ³•">HashMap ç”¨æ³•ï¼š</a></h3>
<p><code>HashMap</code>æ˜¯ä¸€ç¨®éµ-å€¼å°çš„é›†åˆï¼Œå…¶ä¸­æ¯å€‹éµå¿…é ˆæ˜¯å”¯ä¸€çš„ã€‚å®ƒæ˜¯Rustæ¨™æº–åº«çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ–¼å¯¦ç¾å­—å…¸æˆ–é—œè¯æ•¸çµ„ã€‚</p>
<p>é€™æ˜¯ä¸€å€‹ä½¿ç”¨<code>HashMap</code>çš„ä¾‹å­ï¼š</p>
<pre><pre class="playground"><code class="language-rust">use std::collections::HashMap;

fn main() {
    // Creating a new HashMap
    let mut my_map = HashMap::new();

    // Inserting key-value pairs
    my_map.insert("key1", "value1");
    my_map.insert("key2", "value2");
    my_map.insert("key3", "value3");

    // Accessing values using keys
    if let Some(value) = my_map.get("key2") {
        println!("Value for key2: {}", value);
    }

    // Iterating over key-value pairs
    for (key, value) in &amp;my_map {
        println!("Key: {}, Value: {}", key, value);
    }
}</code></pre></pre>
<h3 id="è¿­ä»£å™¨çš„-map-æ–¹æ³•"><a class="header" href="#è¿­ä»£å™¨çš„-map-æ–¹æ³•">è¿­ä»£å™¨çš„ <code>map</code> æ–¹æ³•ï¼š</a></h3>
<p>åœ¨Rustä¸­ï¼Œè¿­ä»£å™¨å…·æœ‰<code>map</code>æ–¹æ³•ï¼Œå®ƒé€šéå°‡å‡½æ•¸æ‡‰ç”¨æ–¼æ¯å€‹å…ƒç´ ä¾†è½‰æ›è¿­ä»£å™¨ä¸­çš„æ¯å€‹é …ç›®ã€‚é€™è£¡æ˜¯ä¸€å€‹ç°¡å–®çš„ä¾‹å­ï¼š</p>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨<code>map</code>æ–¹æ³•å‰µå»ºäº†ä¸€å€‹æ–°çš„è¿­ä»£å™¨ï¼Œå…¶ä¸­æ¯å€‹å…ƒç´ éƒ½åŠ å€ã€‚ç„¶å¾Œä½¿ç”¨<code>collect</code>æ–¹æ³•å°‡è¿­ä»£å™¨è½‰æ›è¿´å‘é‡ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let numbers = vec![1, 2, 3, 4, 5];

    // Using map to double each number
    let doubled_numbers: Vec&lt;_&gt; = numbers.into_iter().map(|x| x * 2).collect();

    println!("Original numbers: {:?}", numbers);
    println!("Doubled numbers: {:?}", doubled_numbers);
}</code></pre></pre>
<h3 id="é–‰åŒ…closures"><a class="header" href="#é–‰åŒ…closures">é–‰åŒ…ï¼ˆclosuresï¼‰</a></h3>
<p>æ˜¯ä¸€ç¨®ç‰¹æ®Šçš„å‡½æ•¸é¡å‹ï¼Œå®ƒå¯ä»¥æ•ç²å…¶ç’°å¢ƒä¸­çš„è®Šæ•¸ã€‚é–‰åŒ…å…·æœ‰ä»¥ä¸‹å¹¾å€‹ç”¨æ³•å’Œå„ªå‹¢ï¼š</p>
<h3 id="ç°¡æ½”æ€§å’Œéˆæ´»æ€§"><a class="header" href="#ç°¡æ½”æ€§å’Œéˆæ´»æ€§">ç°¡æ½”æ€§å’Œéˆæ´»æ€§ï¼š</a></h3>
<p>é–‰åŒ…å…è¨±ä½ ç·¨å¯«æ›´ç‚ºç°¡æ½”ã€ç›´è§€çš„ç¨‹å¼ç¢¼ã€‚ç›¸æ¯”æ–¼å®šç¾©ä¸€å€‹å®Œæ•´çš„å‡½æ•¸ï¼Œé–‰åŒ…å¯ä»¥ç›´æ¥åœ¨éœ€è¦æ™‚è²æ˜å’Œä½¿ç”¨ï¼Œä½¿ç¨‹å¼ç¢¼æ›´å…·éˆæ´»æ€§ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ä½¿ç”¨é–‰åŒ…
let add = |x, y| x + y;
println!("Sum: {}", add(3, 4));

// ç›¸åŒçš„åŠŸèƒ½ä½¿ç”¨å‡½æ•¸
fn add_function(x: i32, y: i32) -&gt; i32 {
    x + y
}
println!("Sum: {}", add_function(3, 4));
<span class="boring">}</span></code></pre></pre>
<h3 id="æ•ç²ç’°å¢ƒè®Šæ•¸"><a class="header" href="#æ•ç²ç’°å¢ƒè®Šæ•¸">æ•ç²ç’°å¢ƒè®Šæ•¸ï¼š</a></h3>
<p>é–‰åŒ…å¯ä»¥æ•ç²å…¶æ‰€åœ¨ç¯„ç–‡ä¸­çš„è®Šæ•¸ï¼Œå¯ä»¥æ˜¯å¼•ç”¨ï¼ˆ<code>&amp;</code>ï¼‰æˆ–ç§»å‹•ï¼ˆ<code>move</code>ï¼‰ã€‚é€™å…è¨±ä½ åœ¨é–‰åŒ…å…§éƒ¨ä½¿ç”¨å¤–éƒ¨è®Šæ•¸ï¼Œè€Œä¸éœ€è¦é¡¯å¼å‚³éåƒæ•¸ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 10;
let closure = || println!("x: {}", x);
closure();
<span class="boring">}</span></code></pre></pre>
<h3 id="æ‰€æœ‰æ¬Šè½‰ç§»"><a class="header" href="#æ‰€æœ‰æ¬Šè½‰ç§»"><strong>æ‰€æœ‰æ¬Šè½‰ç§»ï¼š</strong></a></h3>
<p>ä½¿ç”¨ <code>move</code> é—œéµå­—ï¼Œé–‰åŒ…å¯ä»¥å°‡å…¶ç’°å¢ƒä¸­çš„æ‰€æœ‰æ¬Šè½‰ç§»åˆ°é–‰åŒ…å…§ï¼Œå¾è€Œå¯¦ç¾æ‰€æœ‰æ¬Šçš„è½‰ç§»ã€‚é€™å°æ–¼å°‡è³‡æ–™å‚³éçµ¦åŸ·è¡Œç·’æˆ–å…¶ä»–é–‰åŒ…éå¸¸æœ‰ç”¨ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let data = vec![1, 2, 3];
let closure = move || {
    // data æ‰€æœ‰æ¬Šå·²è½‰ç§»åˆ°é–‰åŒ…
    println!("{:?}", data);
};
closure();
// ä¸‹é¢çš„è¡Œå°‡æœƒå¼•ç™¼ç·¨è­¯éŒ¯èª¤ï¼Œå› ç‚º data æ‰€æœ‰æ¬Šå·²è½‰ç§»
// println!("{:?}", data);
<span class="boring">}</span></code></pre></pre>
<h3 id="å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆ"><a class="header" href="#å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆ"><strong>å‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆï¼š</strong></a></h3>
<p>é–‰åŒ…ä½¿Rustæ›´åŠ é©åˆå‡½æ•¸å¼ç¨‹å¼è¨­è¨ˆé¢¨æ ¼ã€‚ä½ å¯ä»¥å°‡é–‰åŒ…å‚³éçµ¦å…¶ä»–å‡½æ•¸ï¼Œæˆ–è€…å°‡å…¶ä½œç‚ºè¿­ä»£å™¨çš„åƒæ•¸ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let squared: Vec&lt;_&gt; = numbers.into_iter().map(|x| x * x).collect();
println!("{:?}", squared);
<span class="boring">}</span></code></pre></pre>
<h3 id="æ³›å‹å’Œtraitçš„ä½¿ç”¨"><a class="header" href="#æ³›å‹å’Œtraitçš„ä½¿ç”¨"><strong>æ³›å‹å’Œtraitçš„ä½¿ç”¨ï¼š</strong></a></h3>
<p>é–‰åŒ…å¯ä»¥èˆ‡æ³›å‹å’Œtraitä¸€èµ·ä½¿ç”¨ï¼Œä½¿å…¶æ›´åŠ é€šç”¨å’Œéˆæ´»ã€‚ä½ å¯ä»¥å®šç¾©ä¸€å€‹æ¥å—é–‰åŒ…ä½œç‚ºåƒæ•¸çš„æ³›å‹å‡½æ•¸ï¼Œä»¥è™•ç†ä¸åŒé¡å‹çš„æ“ä½œã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn perform_operation&lt;T, U, F&gt;(value: T, operation: F) -&gt; U
where
    F: Fn(T) -&gt; U,
{
    operation(value)
}

fn main() {
    // å°æ•´æ•¸é€²è¡Œæ“ä½œ
    let result_int = perform_operation(5, |x| x * 2);
    println!("Result for integer: {}", result_int);

    // å°æµ®é»æ•¸é€²è¡Œæ“ä½œ
    let result_float = perform_operation(3.5, |x| x * 2.0);
    println!("Result for float: {}", result_float);

    // å°å­—ä¸²é€²è¡Œæ“ä½œ
    let result_string = perform_operation("Hello", |x| format!("{}!", x));
    println!("Result for string: {}", result_string);
}</code></pre></pre>
<ol>
<li><code>fn perform_operation&lt;T, U, F&gt;(value: T, operation: F) -&gt; U</code>: é€™æ˜¯ä¸€å€‹æ³›å‹å‡½æ•¸çš„è²æ˜ã€‚å®ƒæœ‰ä¸‰å€‹æ³›å‹åƒæ•¸ï¼Œåˆ†åˆ¥ç‚º <code>T</code>ã€<code>U</code> å’Œ <code>F</code>ã€‚é€™è¡¨ç¤ºé€™å€‹å‡½æ•¸å¯ä»¥æ¥å—ä¸åŒé¡å‹çš„å€¼ï¼ˆ<code>T</code>ï¼‰å’Œè¿”å›ä¸åŒé¡å‹çš„çµæœï¼ˆ<code>U</code>ï¼‰ï¼ŒåŒæ™‚é‚„æ¥å—ä¸€å€‹æ³›å‹çš„å‡½æ•¸æˆ–é–‰åŒ…ï¼ˆ<code>F</code>ï¼‰ã€‚</li>
<li><code>where F: Fn(T) -&gt; U</code>: é€™æ˜¯ä¸€å€‹ trait boundï¼ˆç‰¹å¾µç´„æŸï¼‰ï¼Œå®ƒè¦å®šäº†æ³›å‹ <code>F</code> å¿…é ˆå¯¦ç¾ <code>Fn(T) -&gt; U</code> é€™å€‹ç‰¹å¾µã€‚é€™è¡¨ç¤º <code>F</code> å¿…é ˆæ˜¯ä¸€å€‹æ¥å— <code>T</code> é¡å‹åƒæ•¸çš„å‡½æ•¸ï¼Œä¸¦è¿”å› <code>U</code> é¡å‹çš„å€¼ã€‚æ›å¥è©±èªªï¼Œ<code>operation</code> åƒæ•¸å¿…é ˆæ˜¯ä¸€å€‹å¯ä»¥æ¥å— <code>value</code> é¡å‹çš„å‡½æ•¸æˆ–é–‰åŒ…ã€‚</li>
<li><code>{ operation(value) }</code>: å‡½æ•¸é«”ä¸­çš„é€™ä¸€è¡Œæ˜¯å…·é«”çš„å¯¦ç¾ã€‚å®ƒèª¿ç”¨äº†å‚³å…¥çš„ <code>operation</code> å‡½æ•¸æˆ–é–‰åŒ…ï¼Œä¸¦å°‡ <code>value</code> ä½œç‚ºåƒæ•¸å‚³éçµ¦å®ƒã€‚æ•´å€‹å‡½æ•¸æœ€çµ‚è¿”å› <code>operation</code> çš„çµæœï¼Œé€™å€‹çµæœçš„é¡å‹æ˜¯ <code>U</code>ã€‚</li>
</ol>
<p>é€™æ®µç¨‹å¼ç¢¼çš„ç›®çš„æ˜¯å‰µå»ºä¸€å€‹é€šç”¨çš„å‡½æ•¸ï¼Œå¯ä»¥å°‡ä¸€å€‹å€¼å’Œä¸€å€‹å‡½æ•¸æˆ–é–‰åŒ…å‚³éçµ¦å®ƒï¼Œä¸¦è¿”å›è©²å‡½æ•¸æˆ–é–‰åŒ…å°è©²å€¼çš„æ“ä½œçµæœã€‚é€šéä½¿ç”¨æ³›å‹ï¼Œé€™å€‹å‡½æ•¸å¯ä»¥è™•ç†ä¸åŒé¡å‹çš„è¼¸å…¥å’Œè¼¸å‡ºã€‚</p>
<p><code>T</code>ã€<code>U</code> å’Œ <code>F</code> åªæ˜¯æ…£ä¾‹ä¸Šå¸¸ç”¨çš„æ³›å‹åƒæ•¸åç¨±ï¼Œå¯¦éš›ä¸Šä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æœ‰æ•ˆçš„è­˜åˆ¥ç¬¦è™Ÿä½œç‚ºæ³›å‹åƒæ•¸åç¨±ã€‚é€™äº›å­—æ¯é€šå¸¸ä»£è¡¨ä¸åŒçš„æ¦‚å¿µï¼š</p>
<ul>
<li><code>T</code>ï¼šé€šå¸¸è¡¨ç¤º "Type"ï¼Œè¡¨ç¤ºæ³›å‹çš„é¡å‹åƒæ•¸ã€‚</li>
<li><code>U</code>ï¼šé€šå¸¸ç”¨æ–¼è¡¨ç¤ºç¬¬äºŒå€‹æ³›å‹é¡å‹åƒæ•¸ã€‚</li>
<li><code>F</code>ï¼šé€šå¸¸è¡¨ç¤º "Function"ï¼Œç”¨æ–¼è¡¨ç¤ºæ¥å—æˆ–è¿”å›å‡½æ•¸çš„æ³›å‹åƒæ•¸ã€‚</li>
</ul>
<p>é€™äº›åƒ…åƒ…æ˜¯æ…£ä¾‹ï¼Œè€Œä¸æ˜¯å¼·åˆ¶çš„è¦å‰‡ã€‚ç•¶ä½ é–±è®€å…¶ä»–äººçš„ä»£ç¢¼æˆ–å¯«è‡ªå·±çš„ä»£ç¢¼æ™‚ï¼Œç¿’æ…£ä¸Šä½¿ç”¨é€™æ¨£çš„å­—æ¯å¯ä»¥è®“ä»£ç¢¼æ›´å®¹æ˜“é–±è®€å’Œç†è§£ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn perform_operation&lt;Input, Output, Func&gt;(value: Input, operation: Func) -&gt; Output
where
    Func: Fn(Input) -&gt; Output,
{
    operation(value)
}

fn main() {
    // å°æ•´æ•¸é€²è¡Œæ“ä½œ
    let result_int = perform_operation(5, |x| x * 2);
    println!("Result for integer: {}", result_int);

    // å°æµ®é»æ•¸é€²è¡Œæ“ä½œ
    let result_float = perform_operation(3.5, |x| x * 2.0);
    println!("Result for float: {}", result_float);

    // å°å­—ä¸²é€²è¡Œæ“ä½œ
    let result_string = perform_operation("Hello", |x| format!("{}!", x));
    println!("Result for string: {}", result_string);
}</code></pre></pre>
<h2 id="trait"><a class="header" href="#trait">trait</a></h2>
<p>traitæ˜¯ä¸€ç¨®å®šç¾©å…±äº«è¡Œç‚ºçš„æ©Ÿåˆ¶ï¼Œå®ƒé¡ä¼¼æ–¼å…¶ä»–èªè¨€ä¸­çš„æ¥å£ï¼ˆinterfaceï¼‰ã€‚traitå¯ä»¥ç”¨æ–¼å®šç¾©æ–¹æ³•ç°½åï¼Œç„¶å¾Œé¡å‹å¯¦ç¾é€™äº›traitï¼Œä»¥æä¾›å°é€™äº›æ–¹æ³•çš„å…·é«”å¯¦ç¾ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹ç°¡å–®çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºç­å¦‚ä½•å®šç¾©traitå’Œå¯¦ç¾å®ƒï¼š</p>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹åç‚º Printable çš„ trait
trait Printable {
    // æ–¹æ³•ç°½åï¼Œè¡¨ç¤ºå¯¦ç¾é€™å€‹ trait çš„é¡å‹éœ€è¦å¯¦ç¾ print æ–¹æ³•
    fn print(&amp;self);
}

// å¯¦ç¾ Printable trait çš„çµæ§‹é«”
struct Dog {
    name: String,
}

// å¯¦ç¾ Printable trait çš„çµæ§‹é«”
struct Cat {
    name: String,
}

// å¯¦ç¾ Printable trait for Dog
impl Printable for Dog {
    // å¯¦ç¾ print æ–¹æ³•
    fn print(&amp;self) {
        println!("Dog named {}", self.name);
    }
}

// å¯¦ç¾ Printable trait for Cat
impl Printable for Cat {
    // å¯¦ç¾ print æ–¹æ³•
    fn print(&amp;self) {
        println!("Cat named {}", self.name);
    }
}

fn main() {
    // å‰µå»ºä¸€å€‹ Dog å¯¦ä¾‹
    let dog = Dog { name: String::from("Buddy") };
    // å‘¼å« Printable trait ä¸­çš„ print æ–¹æ³•
    dog.print();

    // å‰µå»ºä¸€å€‹ Cat å¯¦ä¾‹
    let cat = Cat { name: String::from("Whiskers") };
    // å‘¼å« Printable trait ä¸­çš„ print æ–¹æ³•
    cat.print();
}</code></pre></pre>
<ul>
<li>æˆ‘å€‘å®šç¾©äº†ä¸€å€‹åç‚º <code>Printable</code> çš„ traitï¼Œå®ƒåŒ…å«ä¸€å€‹æ–¹æ³• <code>print</code>ã€‚</li>
<li>æˆ‘å€‘å‰µå»ºäº†å…©å€‹çµæ§‹é«” <code>Dog</code> å’Œ <code>Cat</code>ã€‚</li>
<li>æˆ‘å€‘ç‚ºæ¯å€‹çµæ§‹é«”å¯¦ç¾äº† <code>Printable</code> traitï¼Œæä¾›äº†å° <code>print</code> æ–¹æ³•çš„å…·é«”å¯¦ç¾ã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹ <code>Dog</code> å¯¦ä¾‹å’Œä¸€å€‹ <code>Cat</code> å¯¦ä¾‹ï¼Œç„¶å¾Œåˆ†åˆ¥å‘¼å«äº†å®ƒå€‘çš„ <code>print</code> æ–¹æ³•ã€‚</li>
</ul>
<p>é€™å°±æ˜¯traitçš„åŸºæœ¬ç”¨æ³•ã€‚traité‚„å¯ä»¥ç”¨æ–¼å¯¦ç¾æ³›å‹ï¼Œä»¥åŠåœ¨å‡½æ•¸ä¸­æŒ‡å®štraitç´„æŸï¼Œé€™æ¨£å¯ä»¥åœ¨ä¸åŒé¡å‹ä¸Šä½¿ç”¨ç›¸åŒçš„traitæ–¹æ³•ã€‚</p>
<h2 id="trait-å’Œæ³›å‹æ˜¯-rust-ä¸­çš„å…©å€‹ä¸åŒçš„æ¦‚å¿µä½†å®ƒå€‘ç¶“å¸¸ä¸€èµ·ä½¿ç”¨"><a class="header" href="#trait-å’Œæ³›å‹æ˜¯-rust-ä¸­çš„å…©å€‹ä¸åŒçš„æ¦‚å¿µä½†å®ƒå€‘ç¶“å¸¸ä¸€èµ·ä½¿ç”¨">trait å’Œæ³›å‹æ˜¯ Rust ä¸­çš„å…©å€‹ä¸åŒçš„æ¦‚å¿µï¼Œä½†å®ƒå€‘ç¶“å¸¸ä¸€èµ·ä½¿ç”¨ã€‚</a></h2>
<p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯ä¸€ç¨®é€šç”¨ç·¨ç¨‹æ¦‚å¿µï¼Œå®ƒå…è¨±ç·¨å¯«å¯ä»¥è™•ç†å¤šç¨®ä¸åŒé¡å‹çš„ä»£ç¢¼è€Œä¸å¤±éˆæ´»æ€§å’Œå®‰å…¨æ€§çš„æ–¹å¼ã€‚é€šéä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥åœ¨å‡½æ•¸ã€çµæ§‹ã€åˆ—èˆ‰å’Œæ–¹æ³•ç­‰å¤šç¨®å ´æ™¯ä¸­å‰µå»ºé€šç”¨çš„ä»£ç¢¼ã€‚</p>
<p><strong>ç¯„ä¾‹ï¼š</strong></p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Debug; // å¼•å…¥ Debug trait

fn print&lt;T: Debug&gt;(value: T) {
    println!("Value: {:#?}", value);
}

fn main() {
    print(5);
    print("Hello");
}</code></pre></pre>
<p>é€™è£¡çš„ <code>print</code> å‡½æ•¸ä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥æ¥å—ä»»ä½•é¡å‹çš„åƒæ•¸ã€‚</p>
<h3 id="trait-1"><a class="header" href="#trait-1">Traitï¼š</a></h3>
<p>Trait å®šç¾©äº†ä¸€çµ„å¯ä»¥ç”±é¡å‹å¯¦ç¾çš„æ–¹æ³•çš„é›†åˆï¼Œé€™æ¨£å°±å¯ä»¥å…±äº«æŸç¨®è¡Œç‚ºã€‚Trait æä¾›äº†ä¸€ç¨®æ–¹å¼ä¾†æè¿°é¡å‹ä¹‹é–“çš„å…±åŒç‰¹å¾µã€‚</p>
<p><strong>ç¯„ä¾‹ï¼š</strong></p>
<pre><pre class="playground"><code class="language-rust">trait Printable {
    fn print(&amp;self);
}

struct Dog {
    name: String,
}

impl Printable for Dog {
    fn print(&amp;self) {
        println!("Dog named {}", self.name);
    }
}

struct Cat {
    name: String,
}

impl Printable for Cat {
    fn print(&amp;self) {
        println!("Cat named {}", self.name);
    }
}

fn main() {
    let dog = Dog {
        name: String::from("Buddy"),
    };
    dog.print();

    let cat = Cat {
        name: String::from("Whiskers"),
    };
    cat.print();
}</code></pre></pre>
<p>åœ¨é€™è£¡ï¼Œ<code>Printable</code> æ˜¯ä¸€å€‹ traitï¼Œ<code>Dog</code> å’Œ <code>Cat</code> çµæ§‹é«”å¯¦ç¾äº†é€™å€‹ traitï¼Œæä¾›äº†å° <code>print</code> æ–¹æ³•çš„å…·é«”å¯¦ç¾ã€‚</p>
<h3 id="çµè«–"><a class="header" href="#çµè«–">çµè«–ï¼š</a></h3>
<p>ç¸½é«”è€Œè¨€ï¼Œæ³›å‹æ˜¯ä¸€ç¨®æ›´é€šç”¨çš„ç·¨ç¨‹æ¦‚å¿µï¼Œç”¨æ–¼å‰µå»ºå¯ä»¥è™•ç†å¤šç¨®é¡å‹çš„ä»£ç¢¼ï¼Œè€Œ trait å‰‡ç”¨æ–¼æè¿°é¡å‹ä¹‹é–“çš„å…±åŒç‰¹å¾µï¼Œè®“ä¸åŒçš„é¡å‹å¯ä»¥å…±äº«æŸç¨®è¡Œç‚ºã€‚åœ¨å¯¦è¸ä¸­ï¼Œæ³›å‹å’Œ trait ç¶“å¸¸ä¸€èµ·ä½¿ç”¨ï¼Œä½¿å¾—ä»£ç¢¼æ›´åŠ éˆæ´»å’Œå¯æ“´å±•ã€‚</p>
<h2 id="self-èˆ‡-self-å·®ç•°"><a class="header" href="#self-èˆ‡-self-å·®ç•°">Self èˆ‡ self å·®ç•°</a></h2>
<p><code>Self</code> æ˜¯ä¸€å€‹ç‰¹æ®Šçš„é—œéµå­—ï¼Œé€šå¸¸ç”¨æ–¼è¡¨ç¤ºå¯¦ç¾ trait çš„é¡å‹ã€‚å®ƒè¡¨ç¤ºå¯¦éš›é¡å‹ï¼Œå³å¯¦ç¾ trait çš„é¡å‹æœ¬èº«ã€‚ä½¿ç”¨ <code>Self</code> çš„æ™‚æ©Ÿä¸»è¦åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p><strong>è¿”å›é¡å‹è²æ˜ï¼š</strong> ç•¶ä½ åœ¨ trait çš„æ–¹æ³•ä¸­è²æ˜è¿”å›é¡å‹æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>Self</code> ä¾†è¡¨ç¤ºå¯¦ç¾è©² trait çš„å…·é«”é¡å‹ã€‚é€™å…è¨±å¯¦ç¾æ–¹åœ¨æ–¹æ³•ä¸­è¿”å›å…¶å¯¦éš›é¡å‹ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait ExampleTrait {
    fn example_method(&amp;self) -&gt; Self;
}
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>é—œè¯é¡å‹ï¼š</strong> <code>Self</code> ä¹Ÿå¯ç”¨æ–¼é—œè¯é¡å‹ï¼Œé€™æ˜¯ä¸€ç¨®åœ¨ trait ä¸­è²æ˜é¡å‹ä¸¦åœ¨å¯¦ç¾ä¸­å…·é«”åŒ–çš„æ–¹å¼ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait ExampleTrait {
    type Item;
    
    fn get_item(&amp;self) -&gt; Self::Item;
}
<span class="boring">}</span></code></pre></pre>
</li>
</ol>
<p>ç¸½é«”è€Œè¨€ï¼Œ<code>Self</code> ç”¨æ–¼åœ¨ trait ä¸­è¡¨ç¤ºå¯¦ç¾è©² trait çš„é¡å‹ï¼Œä¸¦åœ¨éœ€è¦æŒ‡ä»£å¯¦éš›é¡å‹çš„åœ°æ–¹ä½¿ç”¨ã€‚</p>
<p><code>type</code> æ˜¯ä¸€å€‹é—œéµå­—ï¼Œç”¨æ–¼è²æ˜èˆ‡traité—œè¯çš„é—œè¯é¡å‹ã€‚é—œè¯é¡å‹å…è¨±traitä¸­ä½¿ç”¨çš„é¡å‹åœ¨å¯¦ç¾traitæ™‚å…·é«”åŒ–ã€‚åœ¨ä½ çš„ä¾‹å­ä¸­ï¼Œ<code>type Item;</code> å°±æ˜¯åœ¨trait <code>ExampleTrait</code> ä¸­è²æ˜ç­ä¸€å€‹é—œè¯é¡å‹ <code>Item</code>ã€‚</p>
<pre><pre class="playground"><code class="language-rust">trait ExampleTrait {
    type Item;  // é—œè¯é¡å‹è²æ˜
    
    fn create_instance() -&gt; Self;  // ä½¿ç”¨Selfä½œç‚ºè¿”å›é¡å‹
    fn get_item(&amp;self) -&gt; Self::Item;  // ä½¿ç”¨Self::Itemä½œç‚ºè¿”å›é¡å‹
}

struct ExampleType;

impl ExampleTrait for ExampleType {
    type Item = i32;  // å…·é«”åŒ–é—œè¯é¡å‹
    
    fn create_instance() -&gt; Self {
        ExampleType  // è¿”å›å¯¦ç¾traitçš„å…·é«”é¡å‹
    }

    fn get_item(&amp;self) -&gt; Self::Item {
        42  // åœ¨å¯¦ç¾ä¸­è¿”å›é—œè¯é¡å‹çš„å¯¦ä¾‹
    }
}

fn main() {
    let instance = ExampleType::create_instance();
    let item = instance.get_item();
    
    println!("Item: {}", item);
}</code></pre></pre>
<h2 id="python-ç¹¼æ‰¿-ç”¨-rust-å¯¦ä½œ"><a class="header" href="#python-ç¹¼æ‰¿-ç”¨-rust-å¯¦ä½œ">python ç¹¼æ‰¿ ç”¨ Rust å¯¦ä½œ</a></h2>
<pre><code class="language-python"># å®šç¾©çˆ¶é¡
class Animal:
    def __init__(self, name):
        self.name = name

    def speak(self):
        pass  # çˆ¶é¡ä¸­çš„æ–¹æ³•ï¼Œå­é¡å°‡è¦†è“‹å®ƒ

# å®šç¾©å­é¡ï¼Œç¹¼æ‰¿è‡ª Animal
class Dog(Animal):
    def speak(self):
        return f"{self.name} says Woof!"

# å®šç¾©å¦ä¸€å€‹å­é¡ï¼Œä¹Ÿç¹¼æ‰¿è‡ª Animal
class Cat(Animal):
    def speak(self):
        return f"{self.name} says Meow!"

# å‰µå»ºå¯¦ä¾‹ä¸¦èª¿ç”¨æ–¹æ³•
dog_instance = Dog("Buddy")
cat_instance = Cat("Whiskers")

print(dog_instance.speak())  # è¼¸å‡º: Buddy says Woof!
print(cat_instance.speak())  # è¼¸å‡º: Whiskers says Meow!
</code></pre>
<pre><pre class="playground"><code class="language-rust">// å®šç¾© trait
trait Animal {
    fn new(name: &amp;str) -&gt; Self;
    fn speak(&amp;self) -&gt; String;
}

// å®šç¾©çµæ§‹é«”å¯¦ç¾ trait
struct Dog {
    name: String,
}

impl Animal for Dog {
    fn new(name: &amp;str) -&gt; Self {
        Dog {
            name: name.to_string(),
        }
    }

    fn speak(&amp;self) -&gt; String {
        format!("{} says Woof!", self.name)
    }
}

// å®šç¾©å¦ä¸€å€‹çµæ§‹é«”å¯¦ç¾ trait
struct Cat {
    name: String,
}

impl Animal for Cat {
    fn new(name: &amp;str) -&gt; Self {
        Cat {
            name: name.to_string(),
        }
    }

    fn speak(&amp;self) -&gt; String {
        format!("{} says Meow!", self.name)
    }
}

fn main() {
    // å‰µå»ºå¯¦ä¾‹ä¸¦èª¿ç”¨æ–¹æ³•
    let dog_instance = Dog::new("Buddy");
    let cat_instance = Cat::new("Whiskers");

    println!("{}", dog_instance.speak()); // è¼¸å‡º: Buddy says Woof!
    println!("{}", cat_instance.speak()); // è¼¸å‡º: Whiskers says Meow!
}</code></pre></pre>
<h3 id="enum-è·Ÿ-impl"><a class="header" href="#enum-è·Ÿ-impl">enum è·Ÿ impl</a></h3>
<p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº†åˆ—èˆ‰ <code>Animal</code> ä¾†è¡¨ç¤ºä¸åŒé¡å‹çš„å‹•ç‰©ï¼ˆç‹—å’Œè²“ï¼‰ã€‚æ¯å€‹å‹•ç‰©é¡å‹éƒ½æœ‰ä¸€å€‹ <code>name</code> æ¬„ä½ã€‚æˆ‘å€‘é€šéåœ¨åˆ—èˆ‰ä¸Šå¯¦ç¾æ–¹æ³•ä¾†æ¨¡æ“¬å»ºæ§‹å‡½å¼ï¼ˆ<code>new_dog</code> å’Œ <code>new_cat</code>ï¼‰å’Œ <code>speak</code> æ–¹æ³•ã€‚åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘å»ºç«‹äº†å…©å€‹ä¸åŒé¡å‹çš„å‹•ç‰©å¯¦ä¾‹ä¸¦å‘¼å«äº†å®ƒå€‘çš„ <code>speak</code> æ–¹æ³•ã€‚</p>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹æšèˆ‰ï¼Œè¡¨ç¤ºä¸åŒé¡å‹çš„å‹•ç‰©
enum Animal {
    Dog { name: String },
    Cat { name: String },
}

// æšèˆ‰ä¸Šçš„æ–¹æ³•
impl Animal {
    // æ§‹é€ å‡½æ•¸
    fn new_dog(name: &amp;str) -&gt; Self {
        Animal::Dog { name: name.to_string() }
    }

    fn new_cat(name: &amp;str) -&gt; Self {
        Animal::Cat { name: name.to_string() }
    }

    // èªªè©±çš„æ–¹æ³•
    fn speak(&amp;self) -&gt; String {
        match self {
            Animal::Dog { name } =&gt; format!("{} says Woof!", name),
            Animal::Cat { name } =&gt; format!("{} says Meow!", name),
        }
    }
}

fn main() {
    // å‰µå»ºå¯¦ä¾‹ä¸¦èª¿ç”¨æ–¹æ³•
    let dog_instance = Animal::new_dog("Buddy");
    let cat_instance = Animal::new_cat("Whiskers");

    println!("{}", dog_instance.speak()); // è¼¸å‡º: Buddy says Woof!
    println!("{}", cat_instance.speak()); // è¼¸å‡º: Whiskers says Meow!
}</code></pre></pre>
<h3 id="struct-è·Ÿ-impl"><a class="header" href="#struct-è·Ÿ-impl">struct è·Ÿ impl</a></h3>
<p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº† <code>struct</code> å®šç¾©äº† <code>Animal</code> çµæ§‹é«”ï¼Œå…¶ä¸­åŒ…å«äº† <code>kind</code> è¡¨ç¤ºå‹•ç‰©çš„ç¨®é¡ï¼ˆ"Dog" æˆ– "Cat"ï¼‰ï¼Œä»¥åŠ <code>name</code> è¡¨ç¤ºå‹•ç‰©çš„åå­—ã€‚å»ºæ§‹å‡½å¼ <code>new</code> ç”¨æ–¼å»ºç«‹æ–°çš„ <code>Animal</code> å¯¦ä¾‹ï¼Œè€Œ <code>speak</code> æ–¹æ³•æ ¹æ“šå‹•ç‰©çš„ç¨®é¡è¼¸å‡ºä¸åŒçš„è²éŸ³ã€‚åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘å»ºç«‹äº†å…©å€‹ä¸åŒé¡å‹çš„å‹•ç‰©å¯¦ä¾‹ä¸¦å‘¼å«äº†å®ƒå€‘çš„ <code>speak</code> æ–¹æ³•ã€‚</p>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©çµæ§‹é«”
struct Animal {
    kind: String,
    name: String,
}

// Animal çµæ§‹é«”çš„æ–¹æ³•
impl Animal {
    // æ§‹é€ å‡½æ•¸
    fn new(kind: &amp;str, name: &amp;str) -&gt; Self {
        Animal {
            kind: kind.to_string(),
            name: name.to_string(),
        }
    }

    // èªªè©±çš„æ–¹æ³•
    fn speak(&amp;self) -&gt; String {
        match self.kind.as_str() {
            "Dog" =&gt; format!("{} says Woof!", self.name),
            "Cat" =&gt; format!("{} says Meow!", self.name),
            _ =&gt; format!("Unknown animal"),
        }
    }
}

fn main() {
    // å‰µå»ºå¯¦ä¾‹ä¸¦èª¿ç”¨æ–¹æ³•
    let dog_instance = Animal::new("Dog", "Buddy");
    let cat_instance = Animal::new("Cat", "Whiskers");

    println!("{}", dog_instance.speak()); // è¼¸å‡º: Buddy says Woof!
    println!("{}", cat_instance.speak()); // è¼¸å‡º: Whiskers says Meow!
}</code></pre></pre>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©çµæ§‹é«”
struct Point {
    x: f64,
    y: f64,
}

// åœ¨çµæ§‹é«”ä¸Šå¯¦ç¾æ–¹æ³•
impl Point {
    // æ§‹é€ å‡½æ•¸
    fn new(x: f64, y: f64) -&gt; Point {
        Point { x, y }
    }

    // è¨ˆç®—å…©é»ä¹‹é–“çš„è·é›¢
    fn distance(&amp;self, other: &amp;Point) -&gt; f64 {
        ((self.x - other.x).powi(2) + (self.y - other.y).powi(2)).sqrt()
    }

    // ç§»å‹•é»çš„ä½ç½®
    fn translate(&amp;mut self, dx: f64, dy: f64) {
        self.x += dx;
        self.y += dy;
    }
}

fn main() {
    // å‰µå»º Point çš„å¯¦ä¾‹
    let point1 = Point::new(0.0, 0.0);
    let point2 = Point::new(3.0, 4.0);

    // èª¿ç”¨ Point ä¸Šçš„æ–¹æ³•
    println!("Distance between points: {}", point1.distance(&amp;point2));

    let mut point3 = Point::new(1.0, 1.0);
    point3.translate(2.0, 3.0);
    println!("New point location: ({}, {})", point3.x, point3.y);
}</code></pre></pre>
<h2 id="async-await-spawn-ç”¨æ³•"><a class="header" href="#async-await-spawn-ç”¨æ³•">Async Await spawn ç”¨æ³•</a></h2>
<pre><pre class="playground"><code class="language-rust">use tokio::time::{sleep, Duration};

// ç•°æ­¥å‡½æ•¸
async fn async_function(id: usize) {
    println!("Start of async function {}", id);

    // æ¨¡æ“¬ç•°æ­¥æ“ä½œï¼Œä¾‹å¦‚ I/O æ“ä½œ
    sleep(Duration::from_secs(2)).await;

    println!("End of async function {}", id);
}

// æ‚¨å¯ä»¥ä¸€æ¬¡é€£çºŒå‘¼å« async_function å¤šæ¬¡ã€‚åœ¨éåŒæ­¥ç¨‹å¼è¨­è¨ˆä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ tokio::spawn æˆ–å…¶ä»–é¡ä¼¼çš„åŠŸèƒ½ä¾†ä¸¦è¡ŒåŸ·è¡Œå¤šå€‹éåŒæ­¥ä»»å‹™ã€‚ä¸‹é¢æ˜¯ä¸€å€‹ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•é€£çºŒå‘¼å« async_function 5 æ¬¡
#[tokio::main]
async fn main() {
    println!("Start of main function");

    // å‰µå»ºä¸€å€‹ Vec ä¾†å­˜å„²ä»»å‹™å¥æŸ„
    let mut handles = Vec::new();

    // èª¿ç”¨ async_function 5 æ¬¡
    for i in 0..5 {
        // ä½¿ç”¨ tokio::spawn å•Ÿå‹•ç•°æ­¥ä»»å‹™ï¼Œä¸¦å°‡ä»»å‹™å¥æŸ„å­˜å„²åœ¨ Vec ä¸­
        let handle = tokio::spawn(async_function(i));
        handles.push(handle);
    }

    // ç­‰å¾…æ‰€æœ‰ä»»å‹™å®Œæˆ
    for handle in handles {
        handle.await.expect("Failed to await task");
    }

    println!("End of main function");
}</code></pre></pre>
<pre><code class="language-toml">[package]
name = "rust_async_test"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
tokio = { version = "1", features = ["full"] }
</code></pre>
<h3 id="into"><a class="header" href="#into">into</a></h3>
<p><code>Into</code> trait æ˜¯ä¸€ç¨®å¸¸è¦‹çš„ç”¨æ–¼é¡å‹è½‰æ›çš„ traitï¼Œä½†ä¸¦ä¸æ˜¯å”¯ä¸€çš„æ–¹å¼ã€‚Rust é‚„æä¾›äº†ä¸€ç¨®ç°¡åŒ–é¡å‹è½‰æ›çš„æ‰‹æ®µï¼Œå³ä½¿ç”¨ <code>Into</code> trait çš„ <code>into</code> æ–¹æ³•ã€‚</p>
<p>åœ¨ Rust ä¸­ï¼Œå°æ–¼ä»»ä½•å¯¦ç¾äº† <code>From</code> trait çš„é¡å‹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ <code>into</code> æ–¹æ³•é€²è¡Œé¡å‹è½‰æ›ã€‚é€™æ˜¯å› ç‚º <code>Into</code> trait æ˜¯ <code>From</code> trait çš„é€†ã€‚å…·é«”ä¾†èªªï¼Œ<code>Into&lt;T&gt;</code> trait çš„å¯¦ç¾æ˜¯ç”± <code>T</code> å¯¦ç¾çš„ <code>From&lt;U&gt;</code> trait æ±ºå®šçš„ã€‚</p>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹çµæ§‹ Point
struct Point {
    x: i32,
    y: i32,
}

// å¯¦ç¾ Into&lt;T&gt; trait for Point
impl Into&lt;(i32, i32)&gt; for Point {
    fn into(self) -&gt; (i32, i32) {
        (self.x, self.y)
    }
}

fn main() {
    // å‰µå»ºä¸€å€‹ Point å¯¦ä¾‹
    let point = Point { x: 10, y: 20 };

    // ä½¿ç”¨ .into() å°‡ Point è½‰æ›æˆ (i32, i32)
    let tuple: (i32, i32) = point.into();

    // æ‰“å°è½‰æ›å¾Œçš„çµæœ
    println!("Tuple: {:?}", tuple);
}</code></pre></pre>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹çµæ§‹ Point
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    // å‰µå»ºä¸€å€‹ Point å¯¦ä¾‹
    let point = Point { x: 10, y: 20 };

    // ä½¿ç”¨ .into() å°‡ Point è½‰æ›æˆ (i32, i32)
    let tuple: (i32, i32) = point.into();

    // æ‰“å°è½‰æ›å¾Œçš„çµæœ
    println!("Tuple: {:?}", tuple);
}</code></pre></pre>
<p>struct ç”¨æ–¼å®šç¾©çµæ§‹é«”ï¼ˆstructureï¼‰ï¼Œå³ä¸€ç¨®ç”¨ä¾†çµ„ç¹”å’Œå­˜å„²æ•¸æ“šçš„è‡ªå®šç¾©é¡å‹ã€‚è€Œ trait å‰‡ç”¨æ–¼å®šç¾©æ¥å£ï¼Œå³ä¸€çµ„æ–¹æ³•çš„é›†åˆï¼Œé€™äº›æ–¹æ³•å¯ä»¥è¢«å¯¦ç¾åœ¨å„ç¨®ä¸åŒçš„é¡å‹ä¸Šã€‚</p>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ç‰¹å¾µ Displayable
trait Displayable {
    fn display(&amp;self);
}

// å¯¦ç¾ç‰¹å¾µ Displayable for Point
struct Point {
    x: f64,
    y: f64,
}

impl Displayable for Point {
    fn display(&amp;self) {
        println!("Point: ({}, {})", self.x, self.y);
    }
}

// å¯¦ç¾ç‰¹å¾µ Displayable for Circle
struct Circle {
    radius: f64,
}

impl Displayable for Circle {
    fn display(&amp;self) {
        println!("Circle with radius: {}", self.radius);
    }
}

// å®šç¾©ç‰¹å¾µ Add
trait Add {
    fn add(&amp;self, other: &amp;Self) -&gt; Self;
}

// å¯¦ç¾ç‰¹å¾µ Add for i32
impl Add for i32 {
    fn add(&amp;self, other: &amp;Self) -&gt; Self {
        *self + *other
    }
}

// å¯¦ç¾ç‰¹å¾µ Add for f64
impl Add for f64 {
    fn add(&amp;self, other: &amp;Self) -&gt; Self {
        *self + *other
    }
}

// å®šç¾©ç‰¹å¾µ Double
trait Double {
    fn double(&amp;self) -&gt; Self;
}

// å¯¦ç¾ç‰¹å¾µ Double for i32
impl Double for i32 {
    fn double(&amp;self) -&gt; Self {
        *self * 2
    }
}

// å¯¦ç¾ç‰¹å¾µ Double for f64
impl Double for f64 {
    fn double(&amp;self) -&gt; Self {
        *self * 2.0
    }
}

// ä¸»å‡½æ•¸
fn main() {
    // ä½¿ç”¨ Displayable ç‰¹å¾µçš„æ–¹æ³•
    let point = Point { x: 1.0, y: 2.0 };
    point.display();

    let circle = Circle { radius: 3.0 };
    circle.display();

    // ä½¿ç”¨ Add ç‰¹å¾µçš„æ–¹æ³•
    let sum_i32 = 10i32.add(&amp;5);
    let sum_f64 = 3.5f64.add(&amp;2.5);

    println!("Sum of i32: {}", sum_i32);
    println!("Sum of f64: {}", sum_f64);

    // ä½¿ç”¨ Double ç‰¹å¾µçš„æ–¹æ³•
    let doubled_i32 = 7i32.double();
    let doubled_f64 = 4.2f64.double();

    println!("Doubled i32: {}", doubled_i32);
    println!("Doubled f64: {}", doubled_f64);
}</code></pre></pre>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ç‰¹å¾µ Add
trait Add {
    fn add(&amp;self, other: &amp;Self) -&gt; Self;
}

// å¯¦ç¾ç‰¹å¾µ Add for i32
impl Add for i32 {
    fn add(&amp;self, other: &amp;Self) -&gt; Self {
        *self + *other
    }
}

// å¯¦ç¾ç‰¹å¾µ Add for f64
impl Add for f64 {
    fn add(&amp;self, other: &amp;Self) -&gt; Self {
        *self + *other
    }
}

// ä¸»å‡½æ•¸
fn main() {
    // ä½¿ç”¨ Add ç‰¹å¾µçš„æ–¹æ³•
    let sum_i32 = 10i32.add(&amp;5);
    let sum_f64 = 3.5f64.add(&amp;2.5);

    println!("Sum of i32: {}", sum_i32);
    println!("Sum of f64: {}", sum_f64);
}</code></pre></pre>
<h2 id="å¤šå‹polymorphism"><a class="header" href="#å¤šå‹polymorphism">å¤šå‹ï¼ˆpolymorphismï¼‰</a></h2>
<p>åœ¨ Rust ä¸­é€šå¸¸æ˜¯é€šé trait å’Œæ³›å‹å¯¦ç¾çš„ã€‚ä¸‹é¢æ˜¯ä¸€å€‹ç°¡å–®çš„å¤šå‹ç¯„ä¾‹ï¼Œå…¶ä¸­ä½¿ç”¨äº† trait å’Œæ³›å‹ï¼Œå…è¨±ä¸€å€‹å‡½æ•¸æ¥å—ä¸åŒé¡å‹çš„åƒæ•¸ï¼š</p>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹ç‰¹å¾µ Display
trait Display {
    fn display(&amp;self);
}

// å¯¦ç¾ Display ç‰¹å¾µçš„çµæ§‹é«” Point
struct Point {
    x: f64,
    y: f64,
}

impl Display for Point {
    fn display(&amp;self) {
        println!("Point: ({}, {})", self.x, self.y);
    }
}

// å¯¦ç¾ Display ç‰¹å¾µçš„çµæ§‹é«” Circle
struct Circle {
    radius: f64,
}

impl Display for Circle {
    fn display(&amp;self) {
        println!("Circle with radius: {}", self.radius);
    }
}

// å¤šå‹å‡½æ•¸ï¼Œæ¥å—å¯¦ç¾ Display ç‰¹å¾µçš„ä»»æ„é¡å‹
fn show_displayable&lt;T: Display&gt;(item: T) {
    item.display();
}

fn main() {
    let point = Point { x: 1.0, y: 2.0 };
    let circle = Circle { radius: 3.0 };

    // èª¿ç”¨å¤šå‹å‡½æ•¸ï¼Œå¯ä»¥æ¥å—ä¸åŒé¡å‹çš„åƒæ•¸
    show_displayable(point);
    show_displayable(circle);
}</code></pre></pre>
<h2 id="æ³›å‹"><a class="header" href="#æ³›å‹">æ³›å‹</a></h2>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹æ³›å‹å‡½æ•¸ï¼Œæ¥å—å…©å€‹åƒæ•¸ä¸¦è¿”å›å®ƒå€‘çš„å’Œ
fn add&lt;T&gt;(a: T, b: T) -&gt; T
where
    T: std::ops::Add&lt;Output = T&gt;,
{
    a + b
}

fn main() {
    // ä½¿ç”¨æ³›å‹å‡½æ•¸ï¼Œå¯ä»¥è™•ç†ä¸åŒé¡å‹çš„æ•¸æ“š
    let sum_i32 = add(5, 3);
    let sum_f64 = add(3.5, 2.5);

    println!("Sum of i32: {}", sum_i32);
    println!("Sum of f64: {}", sum_f64);
}</code></pre></pre>
<p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œ<code>add</code> å‡½æ•¸æ˜¯ä¸€å€‹æ³›å‹å‡½æ•¸ï¼Œå®ƒæ¥å—å…©å€‹ç›¸åŒé¡å‹çš„åƒæ•¸ <code>a</code> å’Œ <code>b</code>ï¼Œä¸¦è¿”å›å®ƒå€‘çš„å’Œã€‚æ³›å‹åƒæ•¸ <code>T</code> è¡¨ç¤ºå¯ä»¥æ˜¯ä»»ä½•é¡å‹ã€‚<code>where T: std::ops::Add&lt;Output = T&gt;</code> ç¢ºä¿ <code>T</code> å¯¦ç¾äº† <code>Add</code> traitï¼Œä¸¦æŒ‡å®šäº† <code>Output</code> é¡å‹ç‚º <code>T</code>ã€‚</p>
<p>åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘åˆ†åˆ¥ä½¿ç”¨æ•´æ•¸å’Œæµ®é»æ•¸èª¿ç”¨äº† <code>add</code> å‡½æ•¸ï¼Œé¡¯ç¤ºäº†æ³›å‹å‡½æ•¸å¯ä»¥è™•ç†ä¸åŒé¡å‹çš„æ•¸æ“šä¸¦è¿”å›æ­£ç¢ºçš„çµæœã€‚</p>
<p>åœ¨ä¸Šè¿°çš„æ³›å‹ç¯„ä¾‹ä¸­ï¼Œ<code>where T: std::ops::Add&lt;Output = T&gt;</code> æ˜¯ä¸€å€‹æ³›å‹ç´„æŸï¼ˆgeneric constraintï¼‰å­å¥ï¼Œç”¨æ–¼æŒ‡å®šæ³›å‹åƒæ•¸ <code>T</code> å¿…é ˆæ»¿è¶³çš„æ¢ä»¶ã€‚</p>
<p>é€™å€‹ç´„æŸçš„æ„ç¾©æ˜¯ï¼Œæ³›å‹åƒæ•¸ <code>T</code> å¿…é ˆå¯¦ç¾ <code>std::ops::Add</code> traitï¼Œä¸¦ä¸”å…¶ <code>Add</code> å¯¦ç¾çš„è¼¸å‡ºé¡å‹ï¼ˆOutputï¼‰å¿…é ˆæ˜¯ <code>T</code>ã€‚æ›å¥è©±èªªï¼Œ<code>T</code> åªèƒ½èˆ‡è‡ªå·±ç›¸åŠ ï¼Œè€Œä¸æ˜¯èˆ‡å…¶ä»–é¡å‹ç›¸åŠ ã€‚</p>
<p>é€™æ¨£çš„ç´„æŸç¢ºä¿äº† <code>add</code> å‡½æ•¸åœ¨ç·¨è­¯æ™‚æœŸåªèƒ½è¢«ç”¨æ–¼é‚£äº›æ”¯æŒ <code>+</code> é‹ç®—çš„é¡å‹ï¼Œä¸¦ä¿è­‰äº†åœ¨ç·¨è­¯æ™‚æœŸå°±èƒ½å¤ ç¢ºå®š <code>add</code> å‡½æ•¸çš„è¡Œç‚ºã€‚</p>
<p>ä¸ä½¿ç”¨ <code>where</code> å­å¥çš„ç‰ˆæœ¬å¯èƒ½çœ‹èµ·ä¾†åƒé€™æ¨£ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(a: T, b: T) -&gt; T {
    a + b
}
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust">fn multiply_value&lt;T&gt;(value: T, factor: T) -&gt; T
where
    T: std::ops::Mul&lt;Output = T&gt;,
{
    value * factor
}

fn main() {
    let integer_result = multiply_value(5, 3);
    let float_result = multiply_value(3.5, 2.0);

    println!("Result of multiplying integers: {}", integer_result);
    println!("Result of multiplying floats: {}", float_result);
}</code></pre></pre>
<p><code>where</code> å­å¥çš„å­˜åœ¨è®“ç´„æŸæ¢ä»¶æ›´ç‚ºæ¸…æ™°ï¼Œæœ‰æ™‚å¯ä»¥æé«˜ä»£ç¢¼çš„å¯è®€æ€§ï¼Œç‰¹åˆ¥æ˜¯ç•¶ç´„æŸæ¢ä»¶è¼ƒé•·æˆ–è¼ƒè¤‡é›œæ™‚ã€‚é€™ç¨®å¯«æ³•çš„ä¸»è¦å„ªå‹¢æ˜¯å¯ä»¥å°‡ç´„æŸå¾å‡½æ•¸çš„ç°½åä¸­åˆ†é›¢å‡ºä¾†ï¼Œè®“ç°½åæ›´åŠ ç°¡æ½”ã€‚</p>
<p>ç¸½é«”è€Œè¨€ï¼Œ<code>where</code> å­å¥çš„ä½¿ç”¨æ˜¯ç‚ºäº†ç¢ºå®šæ³›å‹åƒæ•¸æ»¿è¶³ç‰¹å®šçš„æ¢ä»¶ï¼Œæé«˜ä»£ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ã€‚</p>
<h2 id="derivedebug"><a class="header" href="#derivedebug"><code>#[derive(Debug)] </code></a></h2>
<p>ä½¿ç”¨ <code>#[derive(Debug)]</code> æ™‚ï¼ŒRust ç·¨è­¯å™¨æœƒè‡ªå‹•ç”Ÿæˆä¸€å€‹ <code>Debug</code> trait çš„å¯¦ç¾ã€‚é€™å€‹ç”Ÿæˆçš„å¯¦ç¾é€šå¸¸åŒ…å«ä¸€å€‹ <code>fmt::Debug</code> trait çš„ <code>fmt</code> æ–¹æ³•ï¼Œè©²æ–¹æ³•è² è²¬å°‡é¡å‹çš„åµéŒ¯è¡¨ç¤ºæ ¼å¼åŒ–ç‚ºå­—ä¸²ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug)]
struct Point {
    x: f64,
    y: f64,
}
<span class="boring">}</span></code></pre></pre>
<p>ç•¶ä½ ä½¿ç”¨ <code>#[derive(Debug)]</code> è¨»è§£æ™‚ï¼ŒRust ç·¨è­¯å™¨æœƒè‡ªå‹•ç”Ÿæˆé¡ä¼¼ä»¥ä¸‹çš„ç¨‹å¼ç¢¼ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl std::fmt::Debug for Point {
    fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
        // ä½¿ç”¨ Formatter å°‡èª¿è©¦ä¿¡æ¯æ ¼å¼åŒ–ç‚ºå­—ç¬¦ä¸²
        f.debug_struct("Point")
            .field("x", &amp;self.x)
            .field("y", &amp;self.y)
            .finish()
    }
}
<span class="boring">}</span></code></pre></pre>
<p>é€™å€‹ç”Ÿæˆçš„å¯¦ç¾ç‚º <code>Point</code> é¡å‹å¯¦ç¾äº† <code>Debug</code> trait ä¸­çš„ <code>fmt</code> æ–¹æ³•ã€‚åœ¨é€™å€‹æ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº† <code>std::fmt::Debug</code> ä¸­æä¾›çš„ <code>debug_struct</code>ã€<code>field</code> å’Œ <code>finish</code> æ–¹æ³•ä¾†å»ºæ§‹åµéŒ¯è¡¨ç¤ºã€‚å…·é«”ä¾†èªªï¼š</p>
<ul>
<li><code>debug_struct("Point")</code> å»ºç«‹ä¸€å€‹åç‚º "Point" çš„åµéŒ¯çµæ§‹é«”ã€‚</li>
<li><code>field("x", &amp;self.x)</code> æ–°å¢ä¸€å€‹åç‚º "x" çš„æ¬„ä½ï¼Œä¸¦å°‡ <code>self.x</code> çš„åµéŒ¯è¡¨ç¤ºæ–°å¢åˆ°çµæ§‹é«”ä¸­ã€‚</li>
<li><code>field("y", &amp;self.y)</code> åŒæ¨£æ–°å¢ä¸€å€‹åç‚º "y" çš„æ¬„ä½ï¼Œä¸¦å°‡ <code>self.y</code> çš„åµéŒ¯è¡¨ç¤ºæ–°å¢åˆ°çµæ§‹é«”ä¸­ã€‚</li>
<li><code>finish()</code> å®Œæˆçµæ§‹é«”çš„å»ºæ§‹ï¼Œç”Ÿæˆæœ€çµ‚çš„åµéŒ¯è¡¨ç¤ºã€‚</li>
</ul>
<p>é€™æ¨£ï¼Œç•¶ä½ ä½¿ç”¨ <code>println!</code> å®ä¸¦ä½¿ç”¨ <code>{:?}</code> é ç•™ä½ç½®åˆ—å° <code>Point</code> é¡å‹çš„å¯¦ä¾‹æ™‚ï¼Œç·¨è­¯å™¨è‡ªå‹•ç”Ÿæˆçš„ <code>Debug</code> trait å¯¦ç¾å°‡è¢«å‘¼å«ï¼Œè¼¸å‡ºé¡ä¼¼æ–¼ <code>Point { x: 3.0, y: 4.0 }</code> çš„åµéŒ¯è³‡è¨Šã€‚é€™ç¨®è‡ªå‹•ç”Ÿæˆçš„å¯¦ç¾ç°¡åŒ–äº†åµéŒ¯éç¨‹ï¼Œä½¿å¾—åµéŒ¯è³‡è¨Šæ›´åŠ æ˜“è®€å’Œå‹å¥½ã€‚</p>
<h2 id="result"><a class="header" href="#result">Result</a></h2>
<p><code>Result</code> æ˜¯ä¸€å€‹åˆ—èˆ‰é¡å‹ï¼Œç”¨æ–¼è¡¨ç¤ºå‡½æ•¸åŸ·è¡Œçš„çµæœï¼Œç‰¹åˆ¥æ˜¯å¯èƒ½ç™¼ç”ŸéŒ¯èª¤çš„æƒ…æ³ã€‚<code>Result</code> çš„å®šç¾©å¦‚ä¸‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Result&lt;T, E&gt; {
    Ok(T),
    Err(E),
}
<span class="boring">}</span></code></pre></pre>
<p>é€™è£¡æœ‰å…©å€‹è®Šæ•¸ï¼Œ<code>T</code> å’Œ <code>E</code>ã€‚<code>T</code> ä»£è¡¨æˆåŠŸæ™‚è¿”å›çš„å€¼çš„é¡å‹ï¼Œè€Œ <code>E</code> ä»£è¡¨éŒ¯èª¤æ™‚è¿”å›çš„å€¼çš„é¡å‹ã€‚<code>Result</code> åˆ—èˆ‰æœ‰å…©å€‹è®Šé«”ï¼š</p>
<ol>
<li><code>Ok(T)</code>: è¡¨ç¤ºæ“ä½œæˆåŠŸï¼ŒåŒ…å«ä¸€å€‹æˆåŠŸæ™‚è¿”å›çš„å€¼ <code>T</code>ã€‚</li>
<li><code>Err(E)</code>: è¡¨ç¤ºæ“ä½œç™¼ç”ŸéŒ¯èª¤ï¼ŒåŒ…å«ä¸€å€‹éŒ¯èª¤æ™‚è¿”å›çš„å€¼ <code>E</code>ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼Œä¸€å€‹å‡½æ•¸å¯èƒ½è¿”å› <code>Result</code> é¡å‹ä¾†è¡¨ç¤ºåŸ·è¡Œçµæœï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn divide(a: i32, b: i32) -&gt; Result&lt;i32, &amp;'static str&gt; {
    if b == 0 {
        // å¦‚æœå˜—è©¦é™¤ä»¥é›¶ï¼Œå‰‡è¿”å›ä¸€å€‹ Err è®Šé«”ï¼ŒåŒ…å«éŒ¯èª¤ä¿¡æ¯
        Err("Cannot divide by zero!")
    } else {
        // å¦‚æœæˆåŠŸï¼Œè¿”å› Ok è®Šé«”ï¼ŒåŒ…å«çµæœå€¼
        Ok(a / b)
    }
}
<span class="boring">}</span></code></pre></pre>
<p><code>Result&lt;i32, &amp;'static str&gt;</code> æ˜¯ä¸€å€‹ <code>Result</code> é¡å‹çš„å¯¦ä¾‹ï¼Œè¡¨ç¤ºå¯èƒ½è¿”å›ä¸€å€‹æ•´æ•¸ï¼ˆ<code>i32</code>é¡å‹ï¼‰çš„æˆåŠŸçµæœï¼Œæˆ–è€…è¿”å›ä¸€å€‹éœæ…‹å­—ä¸²åˆ‡ç‰‡ï¼ˆ<code>&amp;'static str</code>é¡å‹ï¼‰çš„éŒ¯èª¤è³‡è¨Šã€‚</p>
<p>è®“æˆ‘å€‘è©³ç´°è§£é‡‹é€™å€‹é¡å‹ï¼š</p>
<ul>
<li><code>Result</code>: é€™æ˜¯Rustæ¨™æº–åº«ä¸­çš„åˆ—èˆ‰é¡å‹ï¼Œç”¨æ–¼è¡¨ç¤ºæ“ä½œçš„çµæœï¼Œå¯ä»¥æ˜¯æˆåŠŸçš„å€¼ï¼ˆ<code>Ok</code>è®Šé«”ï¼‰æˆ–éŒ¯èª¤çš„å€¼ï¼ˆ<code>Err</code>è®Šé«”ï¼‰ã€‚</li>
<li><code>&lt;i32, &amp;'static str&gt;</code>: é€™æ˜¯ <code>Result</code> çš„å…©å€‹é¡å‹åƒæ•¸ã€‚ç¬¬ä¸€å€‹åƒæ•¸ <code>i32</code> è¡¨ç¤ºæˆåŠŸæ™‚è¿”å›çš„å€¼çš„é¡å‹ï¼Œç¬¬äºŒå€‹åƒæ•¸ <code>&amp;'static str</code> è¡¨ç¤ºéŒ¯èª¤æ™‚è¿”å›çš„å€¼çš„é¡å‹ã€‚<code>&amp;'static str</code> æ˜¯ä¸€å€‹æŒ‡å‘éœæ…‹å­—ä¸²åˆ‡ç‰‡çš„å¼•ç”¨ï¼Œé€šå¸¸ç”¨æ–¼è¡¨ç¤ºåœ¨æ•´å€‹ç¨‹åºç”Ÿå‘½é€±æœŸä¸­éƒ½æœ‰æ•ˆçš„å­—ä¸²ã€‚</li>
</ul>
<p>åœ¨ä½¿ç”¨ <code>Result</code> é¡å‹æ™‚ï¼Œé€šå¸¸æœƒä½¿ç”¨æ¨¡å¼åŒ¹é…ï¼ˆpattern matchingï¼‰æˆ– <code>Result</code> çš„æ–¹æ³•ä¾†è™•ç†æ“ä½œçš„æˆåŠŸå’Œå¤±æ•—æƒ…æ³ã€‚ä¾‹å¦‚ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match divide(10, 2) {
    Ok(result) =&gt; println!("Result: {}", result),
    Err(err) =&gt; println!("Error: {}", err),
}
<span class="boring">}</span></code></pre></pre>
<p>æˆ–è€…ä½¿ç”¨ <code>unwrap</code>ã€<code>expect</code>ã€<code>map</code>ã€<code>and_then</code> ç­‰æ–¹æ³•é€²è¡Œæ›´è¤‡é›œçš„è™•ç†ã€‚é€™æ¨£çš„è¨­è¨ˆä½¿å¾—åœ¨Rustä¸­æ˜ç¢ºè™•ç†å¯èƒ½ç™¼ç”Ÿçš„éŒ¯èª¤ï¼Œé¿å…äº†åœ¨åŸ·è¡Œéšæ®µå‡ºç¾æœªè™•ç†çš„ç•°å¸¸ã€‚é€™ä¹Ÿæ˜¯Rustä¸­çš„ä¸€ç¨®æ¨å´‡éŒ¯èª¤è™•ç†çš„å“²å­¸ï¼Œé€šéå¼·åˆ¶ä½¿ç”¨ <code>Result</code> é¡å‹é¼“å‹µé–‹ç™¼è€…æ›´åŠ é—œæ³¨å’Œè™•ç†æ½›åœ¨çš„éŒ¯èª¤æƒ…æ³ã€‚</p>
<h2 id="æ¨¡æ“¬-result-åˆ—èˆ‰"><a class="header" href="#æ¨¡æ“¬-result-åˆ—èˆ‰">æ¨¡æ“¬ Result åˆ—èˆ‰</a></h2>
<pre><pre class="playground"><code class="language-rust">enum _Result&lt;T, E&gt; {
    Ok(T),
    Err(E),
}

fn divide(a: i32, b: i32) -&gt; _Result&lt;i32, &amp;'static str&gt; {
    if b == 0 {
        // å¦‚æœå˜—è©¦é™¤ä»¥é›¶ï¼Œå‰‡è¿”å›ä¸€å€‹ Err è®Šé«”ï¼ŒåŒ…å«éŒ¯èª¤ä¿¡æ¯
        _Result::Err("Cannot divide by zero!")
    } else {
        // å¦‚æœæˆåŠŸï¼Œè¿”å› Ok è®Šé«”ï¼ŒåŒ…å«çµæœå€¼
        _Result::Ok(a / b)
    }
}

fn main() {
    match divide(10, 2) {
        _Result::Ok(result) =&gt; println!("Result: {}", result),
        _Result::Err(err) =&gt; println!("Error: {}", err),
    }
}</code></pre></pre>
<h2 id="rustä¸­å­—ä¸²æ“ä½œçš„æ“æœ‰æ¬Šå’Œå¯è®Šå¼•ç”¨"><a class="header" href="#rustä¸­å­—ä¸²æ“ä½œçš„æ“æœ‰æ¬Šå’Œå¯è®Šå¼•ç”¨">Rustä¸­å­—ä¸²æ“ä½œçš„æ“æœ‰æ¬Šå’Œå¯è®Šå¼•ç”¨</a></h2>
<p>é€™å…©å€‹ç¨‹å¼ç¢¼çš„ä¸»è¦å€åˆ¥åœ¨æ–¼å‡½æ•¸ <code>greet</code> å¦‚ä½•è™•ç†å­—ä¸²çš„æ“æœ‰æ¬Šï¼ˆownershipï¼‰ï¼š</p>
<h3 id="ç¬¬ä¸€å€‹ç¯„ä¾‹"><a class="header" href="#ç¬¬ä¸€å€‹ç¯„ä¾‹">ç¬¬ä¸€å€‹ç¯„ä¾‹ï¼š</a></h3>
<pre><pre class="playground"><code class="language-rust">rustCopy codefn greet(mut message: String) -&gt; String {
    message.push_str(", World!"); // ä¿®æ”¹å­—ä¸²çš„å…§å®¹
    println!("{}", message);
    message
}

fn main() {
    let message = String::from("Hello");
    println!("{}", message);
    let msg = greet(message);
    println!("{}", msg);
}</code></pre></pre>
<ol>
<li><code>greet</code> å‡½æ•¸æ¥å—ä¸€å€‹ <code>String</code> çš„æ“æœ‰æ¬Šï¼Œå°å®ƒé€²è¡Œä¿®æ”¹ï¼ˆpush_strï¼‰ï¼Œç„¶å¾Œè¿”å›ä¿®æ”¹å¾Œçš„å­—ä¸²ï¼ŒåŒæ™‚ä¹Ÿè½‰ç§»äº†æ“æœ‰æ¬Šã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œ<code>message</code> çš„æ“æœ‰æ¬Šåœ¨èª¿ç”¨ <code>greet</code> å‡½æ•¸æ™‚è½‰ç§»åˆ°äº† <code>greet</code> å…§ï¼Œå› æ­¤ <code>main</code> ç„¡æ³•å†ä½¿ç”¨åŸå§‹çš„ <code>message</code>ã€‚</li>
</ol>
<h3 id="ç¬¬äºŒå€‹ç¯„ä¾‹"><a class="header" href="#ç¬¬äºŒå€‹ç¯„ä¾‹">ç¬¬äºŒå€‹ç¯„ä¾‹ï¼š</a></h3>
<pre><pre class="playground"><code class="language-rust">rustCopy codefn greet(message: &amp;mut String) {
    message.push_str(", World!"); // ä¿®æ”¹å­—ä¸²çš„å…§å®¹
    println!("{}", message);
}

fn main() {
    let mut message = String::from("Hello");
    println!("{}", message);

    greet(&amp;mut message); // å‚³éå­—ä¸²çš„å¯è®Šå¼•ç”¨
    println!("{}", message);
}</code></pre></pre>
<ol>
<li><code>greet</code> å‡½æ•¸æ¥å—ä¸€å€‹ <code>&amp;mut String</code>ï¼Œé€™æ˜¯å­—ä¸²çš„å¯è®Šå¼•ç”¨ï¼Œå®ƒå…è¨± <code>greet</code> ä¿®æ”¹å­—ä¸²çš„å…§å®¹ï¼Œä½†ä¸è½‰ç§»æ“æœ‰æ¬Šã€‚</li>
<li>åœ¨ <code>main</code> å‡½æ•¸ä¸­ï¼Œ<code>message</code> ä¿ç•™äº†æ“æœ‰æ¬Šï¼Œä½ å¯ä»¥é€šéå‚³é <code>&amp;mut message</code> ä¾†å‚³éå°å­—ä¸²çš„å¯è®Šå¼•ç”¨ï¼Œä½¿ <code>greet</code> èƒ½å¤ ä¿®æ”¹å­—ä¸²çš„å…§å®¹ã€‚</li>
<li><code>main</code> ä»ç„¶æ“æœ‰ <code>message</code> ä¸¦ä¸”å¯ä»¥åœ¨ <code>greet</code> è¢«å‘¼å«å¾Œç¹¼çºŒä½¿ç”¨ä¿®æ”¹å¾Œçš„ <code>message</code>ã€‚</li>
</ol>
<p>ç¸½çš„ä¾†èªªï¼Œç¬¬äºŒå€‹ç¯„ä¾‹ä½¿ç”¨äº†å¼•ç”¨å’Œå¯è®Šå¼•ç”¨ï¼Œä¿ç•™äº† <code>message</code> çš„æ“æœ‰æ¬Šï¼Œå…è¨±åœ¨å‡½æ•¸é–“é€²è¡Œè³‡æ–™çš„å…±äº«ï¼Œè€Œä¸æ˜¯è½‰ç§»æ“æœ‰æ¬Šã€‚</p>
<h2 id="borrow-checker-çš„é™åˆ¶"><a class="header" href="#borrow-checker-çš„é™åˆ¶">Borrow Checker çš„é™åˆ¶</a></h2>
<p>Rust çš„ Borrow Checker çš„é™åˆ¶ï¼Œé€™æ˜¯ç‚ºäº†ç¢ºä¿åœ¨ç·¨è­¯æ™‚èƒ½å¤ é¿å…æ•¸æ“šç«¶çˆ­å’Œå®‰å…¨æ€§å•é¡Œã€‚å…·é«”ä¾†èªªï¼Œåœ¨åŒä¸€å€‹ä½œç”¨åŸŸä¸­ï¼Œä½ ä¸èƒ½åŒæ™‚æ“æœ‰å…©å€‹å¯è®Šå¼•ç”¨æŒ‡å‘åŒä¸€å€‹å€¼ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼ä½ ç„¡æ³•åŒæ™‚æ“æœ‰ a å’Œ b å…©å€‹å¯è®Šå¼•ç”¨æŒ‡å‘ array çš„å…©å€‹å…ƒç´ çš„åŸå› ã€‚</p>
<p>Rust æä¾›äº†ä¸€äº›æ–¹æ³•ä¾†è™•ç†é€™ç¨®æƒ…æ³ï¼Œå…¶ä¸­ä¸€å€‹æ–¹æ³•æ˜¯ä½¿ç”¨ .split_at_mut() æ–¹æ³•ä¾†å°‡é™£åˆ—åˆ†æˆå…©å€‹ä¸é‡ç–Šçš„å¯è®Šå¼•ç”¨ã€‚é€™è£¡æ˜¯å¦‚ä½•ä¿®æ”¹ä½ çš„ç¨‹å¼ç¢¼ä»¥è§£æ±ºé€™å€‹å•é¡Œï¼š</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut array = [123, 456];
    
    // å°‡é™£åˆ—æ‹†åˆ†æˆå…©å€‹å¯è®Šå¼•ç”¨ï¼Œåˆ†åˆ¥æŒ‡å‘ä¸åŒçš„å…ƒç´ 
    let (a, b) = array.split_at_mut(1);
    let a = &amp;mut a[0];
    let b = &amp;mut b[0];
    
    *a = 789;
    *b = 101112;
    println!("{:?}", array);
}</code></pre></pre>
<h2 id="å¦‚ä½•ä½¿ç”¨-arc-å’Œ-mutex-åœ¨å¤šå€‹ç·šç¨‹ä¹‹é–“å®‰å…¨åœ°å…±äº«å’Œä¿®æ”¹ä¸€å€‹å¯è®Šçš„å‘é‡æ•¸æ“šçµæ§‹"><a class="header" href="#å¦‚ä½•ä½¿ç”¨-arc-å’Œ-mutex-åœ¨å¤šå€‹ç·šç¨‹ä¹‹é–“å®‰å…¨åœ°å…±äº«å’Œä¿®æ”¹ä¸€å€‹å¯è®Šçš„å‘é‡æ•¸æ“šçµæ§‹">å¦‚ä½•ä½¿ç”¨ <code>Arc</code> å’Œ <code>Mutex</code> åœ¨å¤šå€‹ç·šç¨‹ä¹‹é–“å®‰å…¨åœ°å…±äº«å’Œä¿®æ”¹ä¸€å€‹å¯è®Šçš„å‘é‡æ•¸æ“šçµæ§‹ã€‚</a></h2>
<pre><pre class="playground"><code class="language-rust">use std::sync::{Arc, Mutex};
use std::thread;
/*
 * // å…‹éš† Arcï¼Œä»¥ä¾¿åœ¨å…©å€‹ç·šç¨‹é–“å…±äº«
 * let shared_data1 = Arc::clone(&amp;shared_data);
 * let shared_data2 = Arc::clone(&amp;shared_data);
 * Arc:clone ä½œç”¨
 * Arc::clone(&amp;shared_data) æ˜¯ç”¨æ–¼åœ¨å¤šå€‹ç·šç¨‹ä¹‹é–“å®‰å…¨åœ°å…±äº«è³‡æ–™çš„æ–¹æ³•ã€‚
 * Arc æ˜¯ Rust æ¨™æº–åº«æä¾›çš„ä¸€ç¨®åƒè€ƒè¨ˆæ•¸æ™ºæ…§å‹æŒ‡æ¨™é¡å‹,å…¨ç¨±æ˜¯ Atomic Reference Countedã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨å¤šå€‹ç·šç¨‹é–“å…±äº«æ‰€æœ‰æ¬Š,ä¸¦åœ¨æ²’æœ‰ç·šç¨‹å†ä½¿ç”¨è³‡æ–™æ™‚è‡ªå‹•é‡‹æ”¾å…¶è¨˜æ†¶é«”ã€‚
 * ç•¶ä½ èª¿ç”¨ Arc::clone(&amp;shared_data) æ™‚,å®ƒæœƒå»ºç«‹ä¸€å€‹æ–°çš„ Arc æŒ‡æ¨™,æŒ‡å‘èˆ‡åŸå§‹ shared_data ç›¸åŒçš„å †ä¸Šè³‡æ–™ã€‚é€™å€‹æ–°æŒ‡æ¨™çš„åƒè€ƒè¨ˆæ•¸æœƒå¢åŠ ,è¡¨ç¤ºæœ‰ä¸€å€‹æ–°çš„æ‰€æœ‰è€…ã€‚
 * é€™ç¨®åƒè€ƒè¨ˆæ•¸æ©Ÿåˆ¶ç¢ºä¿äº†åªè¦æœ‰ä¸€å€‹ Arc æŒ‡æ¨™å­˜åœ¨,å°±ä¸æœƒé‡‹æ”¾åº•å±¤è³‡æ–™ã€‚ç•¶æœ€å¾Œä¸€å€‹ Arc æŒ‡æ¨™è¢«ä¸Ÿæ£„æ™‚,åƒè€ƒè¨ˆæ•¸æœƒæ­¸é›¶,åº•å±¤è³‡æ–™çš„è¨˜æ†¶é«”æ‰æœƒè¢«è‡ªå‹•é‡‹æ”¾ã€‚
 * é€šéåœ¨å¤šå€‹ç·šç¨‹ä¸­å…‹éš† Arc æŒ‡æ¨™,ä½ å¯ä»¥å®‰å…¨åœ°åœ¨å®ƒå€‘ä¹‹é–“å…±äº«è³‡æ–™,è€Œç„¡éœ€æ·±åº¦è¤‡è£½è³‡æ–™æˆ–æ‰‹å‹•ç®¡ç†å…¶ç”Ÿå‘½é€±æœŸã€‚é€™åœ¨éœ€è¦åœ¨ç·šç¨‹é–“å‚³éæ‰€æœ‰æ¬Šçš„æƒ…æ³ä¸‹éå¸¸æœ‰ç”¨ã€‚
 * ç¸½çš„ä¾†èªª,Arc::clone è®“ä½ å¯ä»¥å»ºç«‹æŒ‡å‘ç›¸åŒè³‡æ–™çš„å¤šå€‹ Arc æŒ‡æ¨™,å¾è€Œåœ¨ç·šç¨‹é–“å…±äº«è³‡æ–™,è€Œä¸æœƒç”¢ç”Ÿè³‡æ–™ç«¶çˆ­æˆ–é•åæ‰€æœ‰æ¬Šè¦å‰‡ã€‚
 *
 */

// let mut data = shared_data1.lock().unwrap();` é€™è¡Œä»£ç¢¼çš„ä½œç”¨æ˜¯å¾ `Arc` æ™ºæ…§æŒ‡æ¨™ä¸­å–å¾—å¯è®Šå¼•ç”¨è³‡æ–™çš„å­˜å–æ¬Šã€‚è®“æˆ‘å€‘ä»”ç´°è§£é‡‹ä¸€ä¸‹:
// 1. `shared_data1` æ˜¯ä¸€å€‹ `Arc&lt;T&gt;` é¡å‹çš„æ™ºæ…§æŒ‡æ¨™,å®ƒå°è£äº†è³‡æ–™ `T` ä¸¦å¯¦ç¾äº†è³‡æ–™çš„å¼•ç”¨è¨ˆæ•¸å’Œç·šç¨‹é–“å®‰å…¨å­˜å–ã€‚
// 2. `.lock()` æ–¹æ³•æ˜¯ç”± `Arc&lt;T&gt;` å¯¦ç¾çš„,å®ƒè¿”å›ä¸€å€‹ `LockResult` é¡å‹,ä»£è¡¨å°å…§éƒ¨è³‡æ–™ `T` çš„å­˜å–æ¬Šã€‚
// 3. `.unwrap()` æ˜¯è§£é–‹ `Result` é¡å‹ã€‚å¦‚æœ `lock()` æˆåŠŸç²å–å­˜å–æ¬Š,å®ƒæœƒè¿”å› `Ok(MutexGuard)` é¡å‹,è¡¨ç¤ºç²å¾—äº†å¯è®Šå¼•ç”¨ `&amp;mut T`ã€‚å¦‚æœå¤±æ•—è¿”å› `Err(PoisonError)`ã€‚`.unwrap()` æœƒç›´æ¥è§£é–‹é€™å€‹ `Ok` ä¸¦å–å¾— `MutexGuard`ã€‚
// 4. `let mut data = ...` é€™ä¸€è¡Œè³¦å€¼,å°‡å¾ `lock()` ä¸­ç²å–çš„å¯è®Šå¼•ç”¨ `&amp;mut T` è³¦å€¼çµ¦ `data`ã€‚
//
// æ‰€ä»¥é€™è¡Œä»£ç¢¼çš„ä½œç”¨æ˜¯:
// 1) é€šé `Arc` æ™ºæ…§æŒ‡æ¨™å­˜å–å…§éƒ¨è³‡æ–™
// 2) ç²å–è©²è³‡æ–™çš„äº’æ–¥å¯è®Šå¼•ç”¨ (é¿å…è³‡æ–™ç«¶çˆ­)
// 3) å°‡å¯è®Šå¼•ç”¨è³¦çµ¦æ–°è®Šæ•¸ `data`
// é€™æ¨£å°±å¯ä»¥å®‰å…¨åœ°åœ¨å–®å€‹ç·šç¨‹ä¸­ä¿®æ”¹è³‡æ–™,åŒæ™‚å…¶ä»–ç·šç¨‹ç„¡æ³•åŒæ™‚ä¿®æ”¹,å¾è€Œé¿å…è³‡æ–™ç«¶çˆ­å•é¡Œã€‚ç•¶ `data` é›¢é–‹ä½œç”¨åŸŸæ™‚,å¯è®Šå¼•ç”¨æœƒè‡ªå‹•è¢«é‡‹æ”¾ã€‚

fn main() {
    // å‰µå»ºä¸€å€‹å…±äº«çš„å¯è®Šæ•¸æ“šçµæ§‹
    let shared_data = Arc::new(Mutex::new(vec![1, 2, 3]));

    // å…‹éš† Arcï¼Œä»¥ä¾¿åœ¨å…©å€‹ç·šç¨‹é–“å…±äº«
    let shared_data1 = Arc::clone(&amp;shared_data);
    let shared_data2 = Arc::clone(&amp;shared_data);

    // åœ¨å…©å€‹ç·šç¨‹ä¸­åˆ†åˆ¥ä¿®æ”¹æ•¸æ“š
    let thread1 = thread::spawn(move || {
        let mut data = shared_data1.lock().unwrap();
        data.push(4);
    });

    let thread2 = thread::spawn(move || {
        let mut data = shared_data2.lock().unwrap();
        data.push(5);
    });

    // ç­‰å¾…å…©å€‹ç·šç¨‹å®Œæˆ
    thread1.join().unwrap();
    thread2.join().unwrap();

    // æ‰“å°æœ€çµ‚çµæœ
    println!("{:?}", shared_data.lock().unwrap());
}</code></pre></pre>
<h2 id="ä½¿ç”¨éšŠåˆ—queueåœ¨å…©å€‹ç·šç¨‹ä¹‹é–“å‚³éè³‡æ–™rust-æ¨™æº–åº«æä¾›äº†-stdsyncmpsc-æ¨¡çµ„ä¾†å¯¦ç¾å¤šç”Ÿç”¢è€…å–®æ¶ˆè²»è€…multiple-producer-single-consumer-mpscé€šé“"><a class="header" href="#ä½¿ç”¨éšŠåˆ—queueåœ¨å…©å€‹ç·šç¨‹ä¹‹é–“å‚³éè³‡æ–™rust-æ¨™æº–åº«æä¾›äº†-stdsyncmpsc-æ¨¡çµ„ä¾†å¯¦ç¾å¤šç”Ÿç”¢è€…å–®æ¶ˆè²»è€…multiple-producer-single-consumer-mpscé€šé“">ä½¿ç”¨éšŠåˆ—(queue)åœ¨å…©å€‹ç·šç¨‹ä¹‹é–“å‚³éè³‡æ–™ã€‚Rust æ¨™æº–åº«æä¾›äº† <code>std::sync::mpsc</code> æ¨¡çµ„ä¾†å¯¦ç¾å¤šç”Ÿç”¢è€…å–®æ¶ˆè²»è€…(Multiple Producer Single Consumer, MPSC)é€šé“ã€‚</a></h2>
<pre><pre class="playground"><code class="language-rust">use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    // å‰µå»ºä¸€å€‹é€šé“ï¼Œé€™æœƒç”¢ç”Ÿä¸€å€‹ç™¼é€ç«¯å’Œä¸€å€‹æ¥æ”¶ç«¯
    let (tx, rx) = mpsc::channel();

    // å•Ÿå‹•ä¸€å€‹æ–°çš„ç·šç¨‹ä½œç‚ºç”Ÿç”¢è€…
    let sender = thread::spawn(move || {
        // å‘é€šé“ä¸­ç™¼é€ä¸€äº›è³‡æ–™
        tx.send(1).unwrap();
        // ç­‰å¾…ä¸€æ®µæ™‚é–“
        thread::sleep(Duration::from_secs(3));
        tx.send(2).unwrap();
        tx.send(3).unwrap();
    });

    // åœ¨ä¸»ç·šç¨‹ä¸­æ¥æ”¶è³‡æ–™
    for received in rx {
        println!("Received: {}", received);
    }

    // ç­‰å¾…ç”Ÿç”¢è€…ç·šç¨‹çµæŸ
    sender.join().unwrap();
}</code></pre></pre>
<hr />
<h3 id="ç¤ºä¾‹-1ä½¿ç”¨å¯è®Šå¼•ç”¨"><a class="header" href="#ç¤ºä¾‹-1ä½¿ç”¨å¯è®Šå¼•ç”¨">ç¤ºä¾‹ 1ï¼šä½¿ç”¨å¯è®Šå¼•ç”¨</a></h3>
<pre><pre class="playground"><code class="language-rust">fn modify_buffer(buffer: &amp;mut [u8]) {
    buffer[0] = 1;
}

fn main() {
    let buf = &amp;mut [0u8; 1024];
    modify_buffer(buf);
}</code></pre></pre>
<h4 id="èªªæ˜"><a class="header" href="#èªªæ˜">èªªæ˜</a></h4>
<ol>
<li>
<p><strong>å‡½æ•¸è²æ˜</strong>ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn modify_buffer(buffer: &amp;mut [u8]) {
    buffer[0] = 1;
}
<span class="boring">}</span></code></pre></pre>
<ul>
<li>é€™å€‹å‡½æ•¸æ¥å—ä¸€å€‹å¯è®Šå¼•ç”¨ <code>&amp;mut [u8]</code>ï¼ŒæŒ‡å‘ä¸€å€‹ <code>u8</code> é™£åˆ—ã€‚</li>
<li>å‡½æ•¸å°‡é™£åˆ—çš„ç¬¬ä¸€å€‹å…ƒç´ è¨­å®šç‚º 1ã€‚</li>
</ul>
</li>
<li>
<p><strong>main å‡½æ•¸</strong>ï¼š</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let buf = &amp;mut [0u8; 1024];
    modify_buffer(buf);
}</code></pre></pre>
<ul>
<li><code>let buf = &amp;mut [0u8; 1024];</code> å»ºç«‹ä¸€å€‹é•·åº¦ç‚º 1024 çš„ <code>u8</code> é™£åˆ—ï¼Œä¸¦å»ºç«‹ä¸€å€‹æŒ‡å‘é€™å€‹é™£åˆ—çš„å¯è®Šå¼•ç”¨ <code>buf</code>ã€‚</li>
<li><code>modify_buffer(buf);</code> å‘¼å« <code>modify_buffer</code> å‡½æ•¸ï¼Œå°‡ <code>buf</code> å‚³éçµ¦å®ƒã€‚é€™å‚³éçš„æ˜¯é™£åˆ—çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯é™£åˆ—æœ¬èº«ã€‚</li>
</ul>
</li>
</ol>
<hr />
<h3 id="ç¤ºä¾‹-2ç›´æ¥ä½¿ç”¨å¯è®Šé™£åˆ—"><a class="header" href="#ç¤ºä¾‹-2ç›´æ¥ä½¿ç”¨å¯è®Šé™£åˆ—">ç¤ºä¾‹ 2ï¼šç›´æ¥ä½¿ç”¨å¯è®Šé™£åˆ—</a></h3>
<pre><pre class="playground"><code class="language-rust">fn modify_buffer(buffer: &amp;mut [u8; 1024]) {
    buffer[0] = 1;
}

fn main() {
    let mut buf = [0u8; 1024];
    modify_buffer(&amp;mut buf);
}</code></pre></pre>
<h4 id="èªªæ˜-1"><a class="header" href="#èªªæ˜-1">èªªæ˜</a></h4>
<ol>
<li>
<p><strong>å‡½æ•¸è²æ˜</strong>ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn modify_buffer(buffer: &amp;mut [u8; 1024]) {
    buffer[0] = 1;
}
<span class="boring">}</span></code></pre></pre>
<ul>
<li>é€™å€‹å‡½æ•¸æ¥å—ä¸€å€‹å¯è®Šå¼•ç”¨ <code>&amp;mut [u8; 1024]</code>ï¼ŒæŒ‡å‘ä¸€å€‹é•·åº¦ç‚º 1024 çš„ <code>u8</code> é™£åˆ—ã€‚</li>
<li>å‡½æ•¸å°‡é™£åˆ—çš„ç¬¬ä¸€å€‹å…ƒç´ è¨­å®šç‚º 1ã€‚</li>
</ul>
</li>
<li>
<p><strong>main å‡½æ•¸</strong>ï¼š</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut buf = [0u8; 1024];
    modify_buffer(&amp;mut buf);
}</code></pre></pre>
<ul>
<li><code>let mut buf = [0u8; 1024];</code> å»ºç«‹ä¸€å€‹é•·åº¦ç‚º 1024 çš„å¯è®Š <code>u8</code> é™£åˆ— <code>buf</code>ã€‚</li>
<li><code>modify_buffer(&amp;mut buf);</code> å‘¼å« <code>modify_buffer</code> å‡½æ•¸ï¼Œå°‡ <code>buf</code> çš„å¯è®Šå¼•ç”¨å‚³éçµ¦å®ƒã€‚</li>
</ul>
</li>
</ol>
<hr />
<h3 id="ä¸»è¦å·®ç•°"><a class="header" href="#ä¸»è¦å·®ç•°">ä¸»è¦å·®ç•°</a></h3>
<ol>
<li><strong>åƒæ•¸é¡å‹</strong>ï¼š
<ul>
<li>ç¤ºä¾‹ 1 çš„ <code>modify_buffer</code> å‡½æ•¸æ¥å—ä¸€å€‹åˆ‡ç‰‡ <code>&amp;mut [u8]</code>ï¼Œé€™æ„å‘³è‘—å®ƒå¯ä»¥è™•ç†ä»»ä½•é•·åº¦çš„å¯è®Š <code>u8</code> é™£åˆ—ã€‚</li>
<li>ç¤ºä¾‹ 2 çš„ <code>modify_buffer</code> å‡½æ•¸æ¥å—ä¸€å€‹å›ºå®šé•·åº¦çš„é™£åˆ— <code>&amp;mut [u8; 1024]</code>ï¼Œåªèƒ½è™•ç†é•·åº¦ç‚º 1024 çš„é™£åˆ—ã€‚</li>
</ul>
</li>
<li><strong>éˆæ´»æ€§</strong>ï¼š
<ul>
<li>ç¤ºä¾‹ 1 æ›´éˆæ´»ï¼Œå› ç‚ºå®ƒå¯ä»¥è™•ç†ä¸åŒé•·åº¦çš„é™£åˆ—ï¼Œåªè¦å®ƒå€‘æ˜¯ <code>u8</code> é¡å‹çš„åˆ‡ç‰‡ã€‚</li>
<li>ç¤ºä¾‹ 2 æ›´å›ºå®šï¼Œåªèƒ½è™•ç†é•·åº¦ç‚º 1024 çš„é™£åˆ—ã€‚</li>
</ul>
</li>
<li><strong>è¨˜æ†¶é«”ç®¡ç†</strong>ï¼š
<ul>
<li>å…©å€‹ç¤ºä¾‹ä¸­çš„é™£åˆ—éƒ½æ˜¯åœ¨æ£§ä¸Šåˆ†é…çš„ã€‚æ²’æœ‰ä½¿ç”¨ <code>Box</code> æˆ– <code>Vec</code> é€²è¡Œå †åˆ†é…ã€‚</li>
</ul>
</li>
</ol>
<h3 id="ä½•æ™‚ä½¿ç”¨å“ªç¨®æ–¹å¼"><a class="header" href="#ä½•æ™‚ä½¿ç”¨å“ªç¨®æ–¹å¼">ä½•æ™‚ä½¿ç”¨å“ªç¨®æ–¹å¼</a></h3>
<ul>
<li>å¦‚æœä½ éœ€è¦è™•ç†ä¸åŒé•·åº¦çš„é™£åˆ—æˆ–åˆ‡ç‰‡ï¼Œç¤ºä¾‹ 1 çš„æ–¹å¼æ›´åˆé©ã€‚</li>
<li>å¦‚æœä½ åªéœ€è¦è™•ç†å›ºå®šé•·åº¦çš„é™£åˆ—ï¼Œç¤ºä¾‹ 2 çš„æ–¹å¼æ›´ç°¡å–®å’Œç›´æ¥ã€‚</li>
</ul>
<p>é¸æ“‡å“ªç¨®æ–¹å¼å–æ±ºæ–¼ä½ çš„å…·é«”éœ€æ±‚ã€‚å¦‚æœéœ€è¦æ›´å¤šéˆæ´»æ€§å’Œé€šç”¨æ€§ï¼Œä½¿ç”¨åˆ‡ç‰‡ã€‚å¦‚æœåªéœ€è¦è™•ç†å›ºå®šå¤§å°çš„é™£åˆ—ï¼Œç›´æ¥ä½¿ç”¨é™£åˆ—æ›´å¥½ã€‚</p>
<hr />
<p>é›–ç„¶ Rust çš„æ‰€æœ‰æ¬Šè¦å‰‡å’Œå…§å­˜ç®¡ç†èˆ‡æ£§ï¼ˆstackï¼‰å’Œå †ï¼ˆheapï¼‰çš„æ¦‚å¿µæœ‰ä¸€å®šé—œä¿‚ï¼Œä½†ä¸èƒ½ç°¡å–®åœ°ç”¨â€œæ£§ä¸Šçš„è®Šé‡å°±æ˜¯ <code>Copy</code>ï¼Œå †ä¸Šçš„è®Šé‡å°±æ˜¯ <code>Move</code>â€ä¾†åˆ¤æ–·ã€‚é—œéµåœ¨æ–¼é¡å‹æ˜¯å¦å¯¦ç¾äº† <code>Copy</code> traitï¼Œè€Œä¸æ˜¯è®Šé‡å­˜å„²åœ¨æ£§é‚„æ˜¯å †ä¸Šã€‚</p>
<h3 id="æ£§å’Œå †çš„å€åˆ¥"><a class="header" href="#æ£§å’Œå †çš„å€åˆ¥">æ£§å’Œå †çš„å€åˆ¥</a></h3>
<ul>
<li><strong>æ£§ï¼ˆStackï¼‰</strong>ï¼šç”¨æ–¼å­˜å„²å‡½æ•¸èª¿ç”¨å’Œå±€éƒ¨è®Šé‡ï¼Œå…·æœ‰å¾Œé€²å…ˆå‡ºï¼ˆLIFOï¼‰åŸå‰‡ã€‚æ£§ä¸Šåˆ†é…çš„å…§å­˜æ˜¯è‡ªå‹•ç®¡ç†çš„ï¼Œä¸”é–‹éŠ·å°ã€é€Ÿåº¦å¿«ã€‚</li>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šç”¨æ–¼å‹•æ…‹åˆ†é…å…§å­˜ï¼Œé©ç”¨æ–¼å¤§å°åœ¨ç·¨è­¯æ™‚ä¸ç¢ºå®šçš„å°è±¡ã€‚å †ä¸Šçš„å…§å­˜åˆ†é…å’Œé‡‹æ”¾éœ€è¦ç¨‹åºå“¡æ‰‹å‹•ç®¡ç†æˆ–é€šéåƒåœ¾å›æ”¶æ©Ÿåˆ¶é€²è¡Œç®¡ç†ã€‚</li>
</ul>
<h3 id="copy-å’Œ-move-çš„å€åˆ¥"><a class="header" href="#copy-å’Œ-move-çš„å€åˆ¥"><code>Copy</code> å’Œ <code>Move</code> çš„å€åˆ¥</a></h3>
<ul>
<li><strong><code>Copy</code> trait</strong>ï¼šå¯¦ç¾äº† <code>Copy</code> trait çš„é¡å‹åœ¨è³¦å€¼æˆ–å‚³éæ™‚æœƒåŸ·è¡ŒæŒ‰ä½è¤‡è£½ã€‚ç°¡å–®çš„æ¨™é‡é¡å‹ï¼ˆå¦‚æ•´æ•¸ã€æµ®é»æ•¸ã€å¸ƒçˆ¾å€¼ã€å­—ç¬¦ï¼‰å’Œè¤‡åˆé¡å‹ï¼ˆå¦‚å…ƒçµ„ï¼Œåªè¦å…¶æ‰€æœ‰å…ƒç´ éƒ½å¯¦ç¾äº† <code>Copy</code>ï¼‰éƒ½å¯¦ç¾äº† <code>Copy</code> traitã€‚</li>
<li><strong>æ‰€æœ‰æ¬Šè½‰ç§»ï¼ˆMoveï¼‰</strong>ï¼šå°æ–¼æ²’æœ‰å¯¦ç¾ <code>Copy</code> trait çš„é¡å‹ï¼ˆå¦‚ <code>String</code>ã€<code>Vec&lt;T&gt;</code> ç­‰ï¼‰ï¼Œè³¦å€¼æˆ–å‚³éæ™‚æœƒè½‰ç§»æ‰€æœ‰æ¬Šï¼Œè€Œä¸æ˜¯æŒ‰ä½è¤‡è£½ã€‚</li>
</ul>
<h3 id="ç¤ºä¾‹"><a class="header" href="#ç¤ºä¾‹">ç¤ºä¾‹</a></h3>
<h4 id="æ£§ä¸Šçš„-copy-é¡å‹"><a class="header" href="#æ£§ä¸Šçš„-copy-é¡å‹">æ£§ä¸Šçš„ <code>Copy</code> é¡å‹</a></h4>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 5;
    let y = x; // x æ˜¯ä¸€å€‹å¯¦ç¾äº† Copy trait çš„æ•´æ•¸é¡å‹
    println!("x: {}, y: {}", x, y); // x å’Œ y éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå› ç‚º x æ˜¯è¢«è¤‡åˆ¶çš„
}</code></pre></pre>
<h4 id="å †ä¸Šçš„-move-é¡å‹"><a class="header" href="#å †ä¸Šçš„-move-é¡å‹">å †ä¸Šçš„ <code>Move</code> é¡å‹</a></h4>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("hello");
    let s2 = s1; // s1 æ˜¯ String é¡å‹ï¼Œæ²’æœ‰å¯¦ç¾ Copy trait
    // println!("{}", s1); // é€™è¡Œæœƒå°è‡´ç·¨è­¯éŒ¯èª¤ï¼Œå› ç‚º s1 çš„æ‰€æœ‰æ¬Šå·²è¢«è½‰ç§»åˆ° s2
    println!("{}", s2); // s2 å¯ä»¥æ­£å¸¸ä½¿ç”¨
}</code></pre></pre>
<h3 id="ç¶œåˆè€ƒæ…®æ£§å’Œå †"><a class="header" href="#ç¶œåˆè€ƒæ…®æ£§å’Œå †">ç¶œåˆè€ƒæ…®æ£§å’Œå †</a></h3>
<p>å³ä½¿æŸäº›é¡å‹çš„æ•¸æ“šå­˜å„²åœ¨å †ä¸Šï¼Œé€™äº›é¡å‹çš„è®Šé‡ä»ç„¶åœ¨æ£§ä¸Šã€‚é‡è¦çš„æ˜¯ï¼Œè®Šé‡æœ¬èº«ï¼ˆæŒ‡å‘å †æ•¸æ“šçš„æŒ‡é‡ï¼‰æ˜¯å¦å¯¦ç¾äº† <code>Copy</code> traitã€‚</p>
<h4 id="çµæ§‹é«”ç¤ºä¾‹"><a class="header" href="#çµæ§‹é«”ç¤ºä¾‹">çµæ§‹é«”ç¤ºä¾‹</a></h4>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug, Copy, Clone)]
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p1 = Point { x: 10, y: 20 };
    let p2 = p1; // Point å¯¦ç¾äº† Copy traitï¼Œå› æ­¤æ˜¯æŒ‰ä½è¤‡è£½
    println!("{:?}", p1); // p1 å¯ä»¥æ­£å¸¸ä½¿ç”¨
    println!("{:?}", p2); // p2 ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨
}</code></pre></pre>
<pre><pre class="playground"><code class="language-rust">struct Custom {
    data: String,
}

fn main() {
    let c1 = Custom { data: String::from("hello") };
    let c2 = c1; // Custom æ²’æœ‰å¯¦ç¾ Copy traitï¼Œå› æ­¤æ˜¯æ‰€æœ‰æ¬Šè½‰ç§»
    // println!("{:?}", c1); // é€™è¡Œæœƒå°è‡´ç·¨è­¯éŒ¯èª¤ï¼Œå› ç‚º c1 çš„æ‰€æœ‰æ¬Šå·²è¢«è½‰ç§»åˆ° c2
    println!("{:?}", c2); // c2 å¯ä»¥æ­£å¸¸ä½¿ç”¨
}</code></pre></pre>
<p>ç¸½çµä¾†èªªï¼Œåˆ¤æ–·è®Šé‡æ˜¯ <code>Copy</code> é‚„æ˜¯ <code>Move</code> ä¸èƒ½åƒ…é€šéå…¶å­˜å„²åœ¨æ£§ä¸Šé‚„æ˜¯å †ä¸Šä¾†æ±ºå®šï¼Œè€Œæ˜¯è¦çœ‹è©²é¡å‹æ˜¯å¦å¯¦ç¾äº† <code>Copy</code> traitã€‚å°æ–¼å¯¦ç¾äº† <code>Copy</code> trait çš„é¡å‹ï¼Œè³¦å€¼å’Œå‚³éæ™‚æœƒé€²è¡ŒæŒ‰ä½è¤‡è£½ï¼›å°æ–¼æœªå¯¦ç¾ <code>Copy</code> trait çš„é¡å‹ï¼Œè³¦å€¼å’Œå‚³éæ™‚æœƒé€²è¡Œæ‰€æœ‰æ¬Šè½‰ç§»ã€‚</p>
<hr />
<h2 id="ä½¿ç”¨-rust-ç‰¹å¾µtraitså’Œçµ„åˆcompositionä¾†æ¨¡æ“¬ç¹¼æ‰¿çš„ä¸€å€‹å®Œæ•´ç¯„ä¾‹"><a class="header" href="#ä½¿ç”¨-rust-ç‰¹å¾µtraitså’Œçµ„åˆcompositionä¾†æ¨¡æ“¬ç¹¼æ‰¿çš„ä¸€å€‹å®Œæ•´ç¯„ä¾‹">ä½¿ç”¨ Rust ç‰¹å¾µï¼ˆTraitsï¼‰å’Œçµ„åˆï¼ˆCompositionï¼‰ä¾†æ¨¡æ“¬ç¹¼æ‰¿çš„ä¸€å€‹å®Œæ•´ç¯„ä¾‹</a></h2>
<pre><pre class="playground"><code class="language-rust">// å®šç¾©ä¸€å€‹ç‰¹å¾µ Animalï¼Œè¡¨ç¤ºå‹•ç‰©çš„è¡Œç‚º
trait Animal {
    fn speak(&amp;self); // å®šç¾©ä¸€å€‹æ–¹æ³• speakï¼Œæ²’æœ‰é»˜èªå¯¦ç¾
}

// å®šç¾©ä¸€å€‹çµæ§‹é«” Dogï¼Œè¡¨ç¤ºç‹—
struct Dog;

// ç‚ºçµæ§‹é«” Dog å¯¦ç¾ç‰¹å¾µ Animal
impl Animal for Dog {
    fn speak(&amp;self) {
        println!("æ±ªæ±ª!"); // ç‹—çš„å…·é«”å¯¦ç¾ï¼Œæ‰“å° "æ±ªæ±ª!"
    }
}

// å®šç¾©å¦ä¸€å€‹çµæ§‹é«” Catï¼Œè¡¨ç¤ºè²“
struct Cat;

// ç‚ºçµæ§‹é«” Cat å¯¦ç¾ç‰¹å¾µ Animal
impl Animal for Cat {
    fn speak(&amp;self) {
        println!("å–µå–µ!"); // è²“çš„å…·é«”å¯¦ç¾ï¼Œæ‰“å° "å–µå–µ!"
    }
}

// å®šç¾©ä¸€å€‹é€šç”¨å‡½æ•¸ï¼Œæ¥å—ä¸€å€‹å¯¦ç¾äº† Animal ç‰¹å¾µçš„å¼•ç”¨
fn make_animal_speak(animal: &amp;dyn Animal) {
    animal.speak(); // èª¿ç”¨ç‰¹å¾µçš„æ–¹æ³•
}

// å®šç¾©ä¸€å€‹çµæ§‹é«” Engineï¼Œè¡¨ç¤ºå¼•æ“
struct Engine {
    horsepower: u32, // å¼•æ“çš„é¦¬åŠ›
}

// å®šç¾©ä¸€å€‹çµæ§‹é«” Carï¼Œè¡¨ç¤ºè»Šè¼›
struct Car {
    engine: Engine, // è»Šè¼›åŒ…å«ä¸€å€‹å¼•æ“
    model: String, // è»Šè¼›çš„å‹è™Ÿ
}

// ç‚ºçµæ§‹é«” Car å®šç¾©æ–¹æ³•
impl Car {
    fn start(&amp;self) {
        println!(
            "{} çš„å¼•æ“æ“æœ‰ {} é¦¬åŠ›æ­£åœ¨å•Ÿå‹•!",
            self.model, self.engine.horsepower
        );
    }
}

// ä¸»å‡½æ•¸
fn main() {
    // å‰µå»ºä¸€å€‹ Dog å¯¦ä¾‹
    let dog = Dog;
    // å‰µå»ºä¸€å€‹ Cat å¯¦ä¾‹
    let cat = Cat;

    // èª¿ç”¨é€šç”¨å‡½æ•¸ï¼Œä½¿å‹•ç‰©ç™¼è²
    make_animal_speak(&amp;dog); // è¼¸å‡º: æ±ªæ±ª!
    make_animal_speak(&amp;cat); // è¼¸å‡º: å–µå–µ!

    // å‰µå»ºä¸€å€‹ Engine å¯¦ä¾‹
    let engine = Engine { horsepower: 150 };
    // å‰µå»ºä¸€å€‹ Car å¯¦ä¾‹
    let car = Car {
        engine,
        model: String::from("Toyota"),
    };

    // å•Ÿå‹•è»Šè¼›
    car.start(); // è¼¸å‡º: Toyota çš„å¼•æ“æ“æœ‰ 150 é¦¬åŠ›æ­£åœ¨å•Ÿå‹•!
}</code></pre></pre>
<p>ä»¥ä¸‹æ˜¯å¹¾ç¨®è§£æ±ºæ–¹æ¡ˆï¼š</p>
<ol>
<li>è¿”å›æ‰€æœ‰æ¬Š
è®“å‡½æ•¸è¿”å›å‚³å…¥çš„ Stringï¼Œé€™æ¨£å¯ä»¥å°‡æ‰€æœ‰æ¬Šè¿”é‚„çµ¦å‘¼å«è€…ã€‚</li>
</ol>
<pre><pre class="playground"><code class="language-rust">fn say_hello(name: String) -&gt; String {
    println!("Hello {name}");
    name
}

fn main() {
    let name = String::from("Alice");
    let name = say_hello(name);
    let name = say_hello(name);
}</code></pre></pre>
<ol start="2">
<li>å‚³éå¼•ç”¨
å¦‚æœä½ ä¸éœ€è¦åœ¨å‡½æ•¸å…§éƒ¨ä¿®æ”¹ Stringï¼Œå¯ä»¥å‚³éä¸€å€‹å¼•ç”¨ï¼Œé€™æ¨£æ‰€æœ‰æ¬Šä¸æœƒè½‰ç§»ã€‚</li>
</ol>
<pre><pre class="playground"><code class="language-rust">fn say_hello(name: &amp;String) {
    println!("Hello {name}");
}

fn main() {
    let name = String::from("Alice");
    say_hello(&amp;name);
    say_hello(&amp;name);
}</code></pre></pre>
<ol start="3">
<li>ä½¿ç”¨ clone
ä½ å¯ä»¥ä½¿ç”¨ clone æ–¹æ³•ä¾†å»ºç«‹ä¸€å€‹ String çš„æ·±è¤‡è£½ï¼Œä¸¦å‚³éå®ƒçµ¦å‡½æ•¸ã€‚é€™æ¨£ä½ å¯ä»¥ä¿ç•™åŸä¾†çš„è®Šæ•¸ï¼Œä½†æœƒæœ‰é¡å¤–çš„è¨˜æ†¶é«”é–‹éŠ·ã€‚</li>
</ol>
<pre><pre class="playground"><code class="language-rust">fn say_hello(name: String) {
    println!("Hello {name}");
}

fn main() {
    let name = String::from("Alice");
    say_hello(name.clone());
    say_hello(name.clone());
}</code></pre></pre>
<hr />
<p>äº†è§£é€™äº›æ¦‚å¿µå¾Œï¼Œæˆ‘å¯ä»¥ç‚ºä½ æä¾›ä¸€äº›ç°¡å–®çš„ C++ ç¯„ä¾‹ä¾†èªªæ˜è³‡æ–™è¤‡è£½å’Œè½‰ç§»çš„è¡Œç‚ºã€‚ä»¥ä¸‹æ˜¯ç›¸é—œç¯„ä¾‹åŠå…¶è§£é‡‹ï¼š</p>
<h3 id="1-c-ä¸­çš„è³‡æ–™è¤‡è£½"><a class="header" href="#1-c-ä¸­çš„è³‡æ–™è¤‡è£½">1. <strong>C++ ä¸­çš„è³‡æ–™è¤‡è£½</strong></a></h3>
<p>åœ¨ C++ ä¸­ï¼Œç•¶ä½¿ç”¨ <code>=</code> é€²è¡Œè³¦å€¼æ™‚ï¼Œé€šå¸¸æœƒåŸ·è¡Œè³‡æ–™è¤‡è£½ã€‚å¦‚æœæ¶‰åŠåˆ°å †ç©è¨˜æ†¶é«”åˆ†é…ï¼ˆä¾‹å¦‚å­—ä¸²ã€å‹•æ…‹é™£åˆ—ç­‰ï¼‰ï¼Œé€™æ¨£çš„è¤‡è£½è¡Œç‚ºæœƒå½±éŸ¿è³‡æºç®¡ç†ã€‚</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;string&gt;

int main() {
    std::string s1 = "Hello, World!";
    std::string s2 = s1;  // è¤‡è£½ s1 åˆ° s2

    std::cout &lt;&lt; "s1: " &lt;&lt; s1 &lt;&lt; std::endl;
    std::cout &lt;&lt; "s2: " &lt;&lt; s2 &lt;&lt; std::endl;

    return 0;
}
</code></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>ç•¶ <code>s2 = s1</code> æ™‚ï¼Œs1 çš„è³‡æ–™æœƒè¢«è¤‡è£½åˆ° s2ã€‚æ­¤æ™‚ï¼Œs1 å’Œ s2 å„è‡ªæ“æœ‰ä¸€ä»½ç¨ç«‹çš„å­—ä¸²è³‡æ–™ã€‚å¦‚æœ <code>s1</code> è¢«é‡‹æ”¾ï¼Œs2 ä»ç„¶æœ‰æ•ˆä¸”å¯ç”¨ã€‚</li>
</ul>
<h3 id="2-c-ä¸­çš„è³‡æ–™è½‰ç§»"><a class="header" href="#2-c-ä¸­çš„è³‡æ–™è½‰ç§»">2. <strong>C++ ä¸­çš„è³‡æ–™è½‰ç§»</strong></a></h3>
<p>C++ ä¸­ä½¿ç”¨ <code>std::move</code> ä¾†æ˜ç¢ºè¡¨ç¤ºè³‡æ–™æ‡‰è©²è¢«è½‰ç§»è€Œéè¤‡è£½ã€‚</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;string&gt;

int main() {
    std::string s1 = "Hello, World!";
    std::string s2 = std::move(s1);  // è½‰ç§» s1 åˆ° s2

    std::cout &lt;&lt; "s1: " &lt;&lt; s1 &lt;&lt; std::endl;  // s1 è™•æ–¼æœ‰æ•ˆä½†æœªæŒ‡å®šçš„ç‹€æ…‹
    std::cout &lt;&lt; "s2: " &lt;&lt; s2 &lt;&lt; std::endl;  // s2 æ“æœ‰åŸä¾† s1 çš„è³‡æ–™

    return 0;
}
</code></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>ç•¶ <code>s2 = std::move(s1)</code> æ™‚ï¼Œ<code>s1</code> çš„è³‡æ–™æœƒè¢«è½‰ç§»åˆ° <code>s2</code>ã€‚é€™æ„å‘³è‘— <code>s2</code> ç¾åœ¨æ“æœ‰ <code>s1</code> çš„è³‡æºï¼Œè€Œ <code>s1</code> è™•æ–¼æœ‰æ•ˆä½†æœªæŒ‡å®šçš„ç‹€æ…‹ï¼ˆå…§å®¹å¯èƒ½æ˜¯ç©ºçš„ï¼Œä½†æœªå®šç¾©ï¼‰ã€‚</li>
<li>èˆ‡ Rust ä¸åŒçš„æ˜¯ï¼ŒC++ ä¸­çš„ <code>s1</code> é›–ç„¶å·²ç¶“è¢«è½‰ç§»ï¼Œä½†ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä¸æœƒå°è‡´ç¨‹åºå´©æ½°ã€‚</li>
</ul>
<h3 id="3-è¤‡è£½å’Œè½‰ç§»çš„è¡Œç‚ºå·®ç•°"><a class="header" href="#3-è¤‡è£½å’Œè½‰ç§»çš„è¡Œç‚ºå·®ç•°">3. <strong>è¤‡è£½å’Œè½‰ç§»çš„è¡Œç‚ºå·®ç•°</strong></a></h3>
<p>C++ çš„ <code>=</code> é‹ç®—ç¬¦å¯ä»¥ä¾æ“šå‹åˆ¥ä¾†æ±ºå®šæ˜¯è¤‡è£½é‚„æ˜¯è½‰ç§»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯åŸºæœ¬å‹åˆ¥ï¼Œå‰‡æœƒé€²è¡Œè¤‡è£½ï¼Œè€Œå°æ–¼æ”¯æŒè½‰ç§»èªç¾©çš„å‹åˆ¥ï¼ˆå¦‚ <code>std::string</code>ï¼‰ï¼Œå‰‡æœƒæ ¹æ“šä¸Šä¸‹æ–‡æ±ºå®šæ˜¯å¦é€²è¡Œè½‰ç§»ã€‚</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;

int main() {
    std::vector&lt;int&gt; v1 = {1, 2, 3, 4, 5};
    std::vector&lt;int&gt; v2 = std::move(v1);  // è½‰ç§» v1 åˆ° v2

    std::cout &lt;&lt; "v1 size: " &lt;&lt; v1.size() &lt;&lt; std::endl;  // v1 è™•æ–¼æœ‰æ•ˆä½†æœªæŒ‡å®šçš„ç‹€æ…‹
    std::cout &lt;&lt; "v2 size: " &lt;&lt; v2.size() &lt;&lt; std::endl;  // v2 æ“æœ‰åŸä¾† v1 çš„è³‡æ–™

    return 0;
}
</code></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ<code>v1</code> çš„è³‡æ–™æœƒè¢«è½‰ç§»åˆ° <code>v2</code>ï¼Œä½¿å¾— <code>v1</code> æˆç‚ºä¸€å€‹ç©ºçš„å®¹å™¨ï¼Œè€Œ <code>v2</code> å‰‡æ“æœ‰åŸä¾† <code>v1</code> çš„è³‡æ–™ã€‚</li>
<li><code>std::move</code> å…è¨±ç¨‹å¼è¨­è¨ˆå¸«æ˜ç¢ºè¡¨ç¤ºå¸Œæœ›è½‰ç§»æ‰€æœ‰æ¬Šï¼Œè€Œéé€²è¡Œæ˜‚è²´çš„è³‡æ–™è¤‡è£½æ“ä½œã€‚</li>
</ul>
<p>é€™äº›ç¯„ä¾‹å±•ç¤ºäº† C++ ä¸­è³‡æ–™è¤‡è£½å’Œè½‰ç§»çš„åŸºæœ¬æ¦‚å¿µï¼Œä¸¦ä¸”çªé¡¯äº† C++ èˆ‡ Rust åœ¨è™•ç†æ‰€æœ‰æ¬Šå’Œè³‡æºç®¡ç†æ–¹é¢çš„ä¸€äº›å·®ç•°ã€‚</p>
<p>åœ¨ Rust ä¸­ï¼Œæ‰€æœ‰æ¬Šã€å€Ÿç”¨å’Œç”Ÿå‘½é€±æœŸæ˜¯æ ¸å¿ƒæ¦‚å¿µï¼Œé€™äº›æ©Ÿåˆ¶æœ‰åŠ©æ–¼é¿å…è¨˜æ†¶é«”æ´©æ¼å’Œè³‡æ–™ç«¶çˆ­ã€‚Rust çš„æ‰€æœ‰æ¬Šç³»çµ±ç¢ºä¿åœ¨ç·¨è­¯æ™‚æª¢æŸ¥ä¸¦å¼·åˆ¶åŸ·è¡Œè³‡æºç®¡ç†çš„è¦å‰‡ã€‚</p>
<h3 id="1-rust-ä¸­çš„æ‰€æœ‰æ¬Šè½‰ç§»"><a class="header" href="#1-rust-ä¸­çš„æ‰€æœ‰æ¬Šè½‰ç§»">1. <strong>Rust ä¸­çš„æ‰€æœ‰æ¬Šè½‰ç§»</strong></a></h3>
<p>åœ¨ Rust ä¸­ï¼Œç•¶å°‡ä¸€å€‹è®Šæ•¸è³¦å€¼çµ¦å¦ä¸€å€‹è®Šæ•¸æ™‚ï¼Œæ‰€æœ‰æ¬Šæœƒè¢«è½‰ç§»ï¼ˆç§»å‹•ï¼‰ï¼Œè€Œä¸æ˜¯è¤‡è£½ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Hello, World!");
    let s2 = s1;  // s1 çš„æ‰€æœ‰æ¬Šè¢«è½‰ç§»åˆ° s2

    // println!("{}", s1);  // é€™ä¸€è¡Œæœƒå°è‡´ç·¨è­¯éŒ¯èª¤ï¼Œå› ç‚º s1 çš„æ‰€æœ‰æ¬Šå·²ç¶“è¢«è½‰ç§»
    println!("{}", s2);  // s2 ç¾åœ¨æ“æœ‰åŸä¾† s1 çš„æ‰€æœ‰æ¬Š
}</code></pre></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ<code>s1</code> çš„æ‰€æœ‰æ¬Šè¢«è½‰ç§»çµ¦ <code>s2</code>ï¼Œå› æ­¤ <code>s1</code> åœ¨æ­¤ä¹‹å¾Œä¸å†æœ‰æ•ˆã€‚å¦‚æœä½ è©¦åœ–ä½¿ç”¨ <code>s1</code>ï¼Œç·¨è­¯å™¨æœƒå ±éŒ¯ï¼Œæç¤º <code>s1</code> å·²ç¶“è¢«è½‰ç§»ã€‚</li>
<li>Rust çš„æ‰€æœ‰æ¬Šè½‰ç§»é¿å…äº†é‡è¤‡é‡‹æ”¾è¨˜æ†¶é«”çš„å•é¡Œï¼Œç¢ºä¿è³‡æºåœ¨ä¸€å€‹ç‰¹å®šæ™‚é–“é»åªèƒ½æœ‰ä¸€å€‹æ‰€æœ‰è€…ã€‚</li>
</ul>
<h3 id="2-rust-ä¸­çš„è³‡æ–™è¤‡è£½"><a class="header" href="#2-rust-ä¸­çš„è³‡æ–™è¤‡è£½">2. <strong>Rust ä¸­çš„è³‡æ–™è¤‡è£½</strong></a></h3>
<p>åœ¨ Rust ä¸­ï¼Œåªæœ‰å¯¦ç¾äº† <code>Copy</code> trait çš„é¡å‹ï¼ˆå¦‚æ•´æ•¸ã€æµ®é»æ•¸ã€å¸ƒçˆ¾å€¼ç­‰ï¼‰å¯ä»¥é€²è¡Œæ·ºè¤‡è£½ï¼ˆæŒ‰ä½è¤‡è£½ï¼‰ã€‚é€™äº›é¡å‹ä¸æœƒç™¼ç”Ÿæ‰€æœ‰æ¬Šè½‰ç§»ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let x = 5;
    let y = x;  // x è¢«è¤‡è£½åˆ° y

    println!("x = {}, y = {}", x, y);  // x å’Œ y éƒ½æœ‰æ•ˆï¼Œå› ç‚ºå®ƒå€‘æ˜¯ Copy é¡å‹
}</code></pre></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>ç”±æ–¼æ•´æ•¸æ˜¯ <code>Copy</code> é¡å‹ï¼Œç•¶ <code>x</code> è³¦å€¼çµ¦ <code>y</code> æ™‚ï¼Œ<code>x</code> çš„å€¼æœƒè¢«è¤‡è£½ï¼Œè€Œä¸æ˜¯è½‰ç§»ã€‚å› æ­¤ï¼Œ<code>x</code> å’Œ <code>y</code> éƒ½å¯ä»¥ç¹¼çºŒä½¿ç”¨ã€‚</li>
</ul>
<h3 id="3-rust-ä¸­çš„å€Ÿç”¨èˆ‡å¼•ç”¨"><a class="header" href="#3-rust-ä¸­çš„å€Ÿç”¨èˆ‡å¼•ç”¨">3. <strong>Rust ä¸­çš„å€Ÿç”¨èˆ‡å¼•ç”¨</strong></a></h3>
<p>Rust æä¾›äº†å¼•ç”¨ä¾†å€Ÿç”¨è³‡æ–™è€Œä¸è½‰ç§»æ‰€æœ‰æ¬Šã€‚é€™ä½¿å¾—å¯ä»¥å®‰å…¨åœ°å…±äº«è³‡æ–™ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Hello, World!");
    let s2 = &amp;s1;  // s1 çš„ä¸å¯è®Šå¼•ç”¨è¢«å€Ÿç”¨çµ¦ s2

    println!("s1 = {}, s2 = {}", s1, s2);  // s1 å’Œ s2 éƒ½å¯ä»¥è¢«ä½¿ç”¨
}</code></pre></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œ<code>s2</code> æ˜¯ <code>s1</code> çš„å¼•ç”¨ï¼ˆå€Ÿç”¨ï¼‰ï¼Œé€™æ„å‘³è‘— <code>s2</code> å¯ä»¥è¨ªå• <code>s1</code> çš„è³‡æ–™ï¼Œè€Œä¸æœƒè½‰ç§»æ‰€æœ‰æ¬Šã€‚Rust ç¢ºä¿åœ¨å¼•ç”¨çš„ç”Ÿå‘½é€±æœŸå…§ï¼ŒåŸè®Šæ•¸ï¼ˆ<code>s1</code>ï¼‰ä¸æœƒè¢«ä¿®æ”¹æˆ–è½‰ç§»ã€‚</li>
</ul>
<h3 id="4-rust-ä¸­çš„å¯è®Šå€Ÿç”¨"><a class="header" href="#4-rust-ä¸­çš„å¯è®Šå€Ÿç”¨">4. <strong>Rust ä¸­çš„å¯è®Šå€Ÿç”¨</strong></a></h3>
<p>Rust å…è¨±å¯è®Šå€Ÿç”¨ï¼Œä½†åŒä¸€æ™‚é–“åªèƒ½æœ‰ä¸€å€‹å¯è®Šå€Ÿç”¨ï¼Œé€™é˜²æ­¢äº†è³‡æ–™ç«¶çˆ­ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut s1 = String::from("Hello, World!");
    let s2 = &amp;mut s1;  // s1 çš„å¯è®Šå¼•ç”¨è¢«å€Ÿç”¨çµ¦ s2

    s2.push_str("!!!");  // å¯ä»¥é€šé s2 ä¿®æ”¹ s1 çš„å€¼
    println!("s2 = {}", s2);  // s2 æ“æœ‰å° s1 çš„å¯è®Šå€Ÿç”¨
}</code></pre></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li>åœ¨é€™è£¡ï¼Œ<code>s2</code> æ˜¯ <code>s1</code> çš„å¯è®Šå¼•ç”¨ï¼Œå…è¨±é€šé <code>s2</code> ä¿®æ”¹ <code>s1</code> çš„å€¼ã€‚åœ¨å¯è®Šå€Ÿç”¨æœŸé–“ï¼ŒRust ç¢ºä¿ä¸æœƒæœ‰å…¶ä»–å¼•ç”¨å¯ä»¥è¨ªå• <code>s1</code>ï¼Œé€™æ¨£é¿å…äº†è³‡æ–™ç«¶çˆ­ã€‚</li>
</ul>
<h3 id="5-rust-ä¸­çš„å…‹éš†"><a class="header" href="#5-rust-ä¸­çš„å…‹éš†">5. <strong>Rust ä¸­çš„å…‹éš†</strong></a></h3>
<p>å¦‚æœéœ€è¦åœ¨ Rust ä¸­é¡¯å¼è¤‡è£½é <code>Copy</code> é¡å‹çš„è³‡æ–™ï¼Œå¯ä»¥ä½¿ç”¨ <code>.clone()</code> æ–¹æ³•ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let s1 = String::from("Hello, World!");
    let s2 = s1.clone();  // é¡¯å¼è¤‡è£½ s1 åˆ° s2

    println!("s1 = {}, s2 = {}", s1, s2);  // s1 å’Œ s2 éƒ½å¯ä»¥è¢«ä½¿ç”¨
}</code></pre></pre>
<p><strong>è§£é‡‹</strong>ï¼š</p>
<ul>
<li><code>clone</code> æ–¹æ³•æœƒé€²è¡Œæ·±è¤‡è£½ï¼Œè¤‡è£½å †ä¸Šçš„è³‡æ–™ï¼Œè®“ <code>s1</code> å’Œ <code>s2</code> å„è‡ªæ“æœ‰ä¸€ä»½ç¨ç«‹çš„è³‡æ–™ã€‚é€™é¿å…äº†æ‰€æœ‰æ¬Šè½‰ç§»çš„å•é¡Œï¼Œä½¿å¾—å…©è€…éƒ½å¯ä»¥åœ¨ä¹‹å¾Œä½¿ç”¨ã€‚</li>
</ul>
<p>é€™äº›ç¯„ä¾‹å±•ç¤ºäº† Rust å¦‚ä½•é€šéæ‰€æœ‰æ¬Šå’Œå€Ÿç”¨æ©Ÿåˆ¶ä¾†ç®¡ç†è³‡æºï¼Œé˜²æ­¢è¨˜æ†¶é«”æ´©æ¼å’Œè³‡æ–™ç«¶çˆ­ï¼ŒåŒæ™‚èˆ‡ C++ çš„åšæ³•å½¢æˆäº†é®®æ˜å°æ¯”ã€‚</p>
<h2 id="rust-ç•°æ­¥ç·¨ç¨‹ç¤ºä¾‹"><a class="header" href="#rust-ç•°æ­¥ç·¨ç¨‹ç¤ºä¾‹">Rust ç•°æ­¥ç·¨ç¨‹ç¤ºä¾‹</a></h2>
<pre><pre class="playground"><code class="language-rust">use std::future::Future;
use std::pin::Pin;
use std::task::{Context, Poll, Wake, Waker};
use std::sync::{Arc, Mutex};
use std::thread;
use std::sync::mpsc::{channel, Sender, Receiver};

// å®šç¾©ä¸€å€‹ç°¡å–®çš„ Future
struct CountDown {
    count: u32,
}

impl Future for CountDown {
    type Output = u32;
    
    fn poll(mut self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;Self::Output&gt; {
        println!("æ­£åœ¨åŸ·è¡Œ pollï¼Œç•¶å‰è¨ˆæ•¸: {}", self.count);
        
        if self.count == 0 {
            Poll::Ready(0)
        } else {
            self.count -= 1;
            if self.count == 0 {
                Poll::Ready(0)
            } else {
                // åœ¨çœŸå¯¦æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘æ‡‰è©²åœ¨é€™è£¡å®‰æ’ä¸€å€‹å–šé†’ï¼ˆwakeï¼‰
                let waker = cx.waker().clone();
                thread::spawn(move || {
                    thread::sleep(std::time::Duration::from_millis(500));
                    println!("å–šé†’ Future");
                    waker.wake();
                });
                
                Poll::Pending
            }
        }
    }
}

// å®šç¾©ä¸€å€‹ç•°æ­¥å‡½æ•¸
async fn simple_async_function() -&gt; u32 {
    println!("é€²å…¥ç•°æ­¥å‡½æ•¸");
    let countdown = CountDown { count: 3 };
    let result = countdown.await;
    println!("ç•°æ­¥å‡½æ•¸å®Œæˆï¼Œçµæœ: {}", result);
    result
}

// ä¸€å€‹ç°¡å–®çš„åŸ·è¡Œå™¨å¯¦ç¾
struct SimpleExecutor {
    task_sender: Sender&lt;Arc&lt;SimpleFutureTask&gt;&gt;,
    task_receiver: Receiver&lt;Arc&lt;SimpleFutureTask&gt;&gt;,
}

struct SimpleFutureTask {
    future: Mutex&lt;Option&lt;Pin&lt;Box&lt;dyn Future&lt;Output = ()&gt; + Send&gt;&gt;&gt;&gt;,
    task_sender: Sender&lt;Arc&lt;SimpleFutureTask&gt;&gt;,
}

impl Wake for SimpleFutureTask {
    fn wake(self: Arc&lt;Self&gt;) {
        let _ = self.task_sender.send(self.clone());
    }
}

impl SimpleExecutor {
    fn new() -&gt; Self {
        let (task_sender, task_receiver) = channel();
        SimpleExecutor {
            task_sender,
            task_receiver,
        }
    }

    fn spawn&lt;F&gt;(&amp;self, future: F)
    where
        F: Future&lt;Output = ()&gt; + Send + 'static,
    {
        let task = Arc::new(SimpleFutureTask {
            future: Mutex::new(Some(Box::pin(future))),
            task_sender: self.task_sender.clone(),
        });
        let _ = self.task_sender.send(task);
    }

    fn run(&amp;self) {
        while let Ok(task) = self.task_receiver.recv() {
            let mut future_slot = task.future.lock().unwrap();
            if let Some(mut future) = future_slot.take() {
                let waker = Waker::from(task.clone());
                let mut cx = Context::from_waker(&amp;waker);
                match Future::poll(Pin::new(&amp;mut future), &amp;mut cx) {
                    Poll::Pending =&gt; {
                        *future_slot = Some(future);
                    }
                    Poll::Ready(()) =&gt; {
                        // Future å®Œæˆï¼Œä¸å†æ”¾å›éšŠåˆ—
                    }
                }
            }
        }
    }
}

/**
 * # ç”¨ç”Ÿæ´»ç™½è©±è§£é‡‹ Rust ä¸­çš„ await
 * 
 * æƒ³åƒä½ å»éº¥ç•¶å‹é»é¤ã€‚å‚³çµ±çš„åŒæ­¥ï¼ˆé awaitï¼‰æ–¹å¼å’Œä½¿ç”¨ await çš„ç•°æ­¥æ–¹å¼æœ‰å¾ˆå¤§ä¸åŒï¼š
 * 
 * ## åŒæ­¥æ–¹å¼ï¼ˆæ²’æœ‰ awaitï¼‰
 * 
 * ä½ å»éº¥ç•¶å‹é»äº†ä¸€å€‹æ¼¢å ¡ï¼š
 * 1. ä½ ç«™åœ¨æ«ƒæª¯å‰ï¼Œå‘Šè¨´åº—å“¡ä½ è¦ä¸€å€‹æ¼¢å ¡
 * 2. ç„¶å¾Œä½ å°±ç«™åœ¨é‚£è£¡**ä¸€å‹•ä¸å‹•åœ°ç­‰å¾…**
 * 3. å…¶ä»–äººæƒ³é»é¤éƒ½ä¸è¡Œï¼Œå› ç‚ºä½ æ“‹ä½äº†æ«ƒæª¯
 * 4. åº—å“¡åšå¥½æ¼¢å ¡å¾Œï¼Œçµ‚æ–¼æŠŠæ¼¢å ¡éçµ¦ä½ 
 * 5. ä½ æ‹¿åˆ°æ¼¢å ¡ï¼Œé€™æ™‚å…¶ä»–äººæ‰èƒ½é»é¤
 * 
 * é€™å°±åƒç¨‹å¼ä¸­çš„é˜»å¡èª¿ç”¨ - æ•´å€‹ç³»çµ±ï¼ˆæ«ƒæª¯ï¼‰è¢«ä½ å ç”¨ï¼Œç„¡æ³•è™•ç†å…¶ä»–äº‹æƒ…ã€‚
 * 
 * ## ç•°æ­¥æ–¹å¼ï¼ˆä½¿ç”¨ awaitï¼‰
 * 
 * ä½ å»éº¥ç•¶å‹é»äº†ä¸€å€‹æ¼¢å ¡ï¼Œä½†ä½¿ç”¨äº†"å–é¤è™Ÿç¢¼ç‰Œ"ç³»çµ±ï¼š
 * 1. ä½ å‘Šè¨´åº—å“¡ä½ è¦ä¸€å€‹æ¼¢å ¡
 * 2. åº—å“¡çµ¦ä½ ä¸€å€‹è™Ÿç¢¼ç‰Œï¼Œèªªï¼š"æ¼¢å ¡é‚„æ²’å¥½ï¼Œä½ å…ˆå»æ—é‚Šåè‘—å§ï¼Œå¥½äº†æœƒå«ä½ "
 * 3. ä½ æ‹¿è‘—è™Ÿç¢¼ç‰Œå»æ—é‚Šåä¸‹ï¼ˆé€™å°±æ˜¯ `await` çš„æ™‚åˆ»ï¼‰
 * 4. **æ­¤æ™‚æ«ƒæª¯ç©ºå‡ºä¾†äº†**ï¼Œå…¶ä»–äººå¯ä»¥ä¸Šå‰é»é¤
 * 5. ä½ å¯ä»¥ç©æ‰‹æ©Ÿã€çœ‹æ›¸æˆ–èŠå¤© - åšäº›å…¶ä»–äº‹æƒ…
 * 6. å»£æ’­å«åˆ°ä½ çš„è™Ÿç¢¼æ™‚ï¼ˆç›¸ç•¶æ–¼ `waker.wake()`ï¼‰ï¼Œä½ å›åˆ°æ«ƒæª¯
 * 7. æ‹¿åˆ°ä½ çš„æ¼¢å ¡å¾Œï¼Œä½ æ‰ç¹¼çºŒå¾Œé¢çš„æ´»å‹•ï¼ˆè²·é£²æ–™ã€æ‰¾åº§ä½ç­‰ï¼‰
 * 
 * é€™å°±æ˜¯ `await` çš„ç²¾é«“ï¼š
 * - **è®“å‡ºè³‡æº**ï¼šç•¶ä½ çš„æ¼¢å ¡é‚„æ²’æº–å‚™å¥½æ™‚ï¼Œä½ ä¸æ˜¯å‚»ç«™åœ¨æ«ƒæª¯å‰ï¼Œè€Œæ˜¯å…ˆå»åè‘—ï¼Œè®“æ«ƒæª¯å¯ä»¥æœå‹™å…¶ä»–äºº
 * - **ä¿ç•™ä¸Šä¸‹æ–‡**ï¼šç³»çµ±è¨˜ä½ä½ é»äº†ä»€éº¼ã€ä»˜äº†å¤šå°‘éŒ¢ï¼ˆä½ çš„ç¨‹å¼ç‹€æ…‹ï¼‰
 * - **é€šçŸ¥æ¢å¾©**ï¼šæ¼¢å ¡åšå¥½æ™‚æœƒé€šçŸ¥ä½ ï¼ˆwake æ©Ÿåˆ¶ï¼‰
 * - **ç¹¼çºŒåŸ·è¡Œ**ï¼šæ‹¿åˆ°æ¼¢å ¡å¾Œï¼Œä½ å¯ä»¥ç¹¼çºŒä½ çš„ç”¨é¤è¨ˆåŠƒï¼ˆä»£ç¢¼çš„å¾ŒçºŒéƒ¨åˆ†ï¼‰
 * 
 * ## å†å…·é«”ä¸€é»çš„ä¾‹å­
 * 
 * `let result = simple_async_function().await;` å°±åƒï¼š
 * "æˆ‘è¦é»ä¸€å€‹ç‰¹æ®Šæ¼¢å ¡ï¼ˆèª¿ç”¨ simple_async_functionï¼‰ç„¶å¾Œç­‰å®ƒå¥½äº†ï¼ˆawaitï¼‰æ‰ç¹¼çºŒé»é£²æ–™"
 * 
 * è€Œåœ¨åº•å±¤ï¼Œç³»çµ±ä¸æ˜¯è®“ä½ ç«™åœ¨é‚£å‚»ç­‰ï¼Œè€Œæ˜¯ï¼š
 * 1. è¨˜éŒ„ä¸‹ä½ ç•¶å‰çš„ç‹€æ…‹ï¼ˆ"é€™äººè¦ç‰¹æ®Šæ¼¢å ¡ï¼Œä¹‹å¾Œæƒ³é»é£²æ–™"ï¼‰
 * 2. çµ¦ä½ ä¸€å€‹è™Ÿç¢¼ç‰Œï¼Œè®“ä½ å…ˆåè‘—
 * 3. ç•¶æ¼¢å ¡å¥½äº†ï¼Œå«ä½ çš„è™Ÿç¢¼
 * 4. ä½ å›ä¾†æ‹¿æ¼¢å ¡ï¼Œç„¶å¾Œç¹¼çºŒé»é£²æ–™
 * 
 * é€™å°±æ˜¯ç‚ºä»€éº¼ `await` é€™éº¼ç¥å¥‡ - å®ƒè®“ç¨‹å¼èƒ½é«˜æ•ˆåˆ©ç”¨ç­‰å¾…æ™‚é–“åšå…¶ä»–äº‹æƒ…ï¼Œè€Œä¸æ˜¯å‚»å‚»åœ°é˜»å¡åœ¨é‚£è£¡ã€‚
 */

fn main() {
    println!("ç¨‹åºé–‹å§‹");
    
    let executor = SimpleExecutor::new();
    
    // æŠŠæˆ‘å€‘çš„ç•°æ­¥å‡½æ•¸å°è£ä¸¦ç™¼é€åˆ°åŸ·è¡Œå™¨
    executor.spawn(async {
        let result = simple_async_function().await;
        println!("æœ€çµ‚çµæœ: {}", result);
    });
    
    // é‹è¡ŒåŸ·è¡Œå™¨ï¼Œè™•ç†æ‰€æœ‰ä»»å‹™
    executor.run();
    
    println!("ç¨‹åºçµæŸ");
}</code></pre></pre>
<h2 id="rust-ç”Ÿå‘½é€±æœŸçœç•¥è¦å‰‡ç¸½æ•´ç†--æœ€ç°¡å–®ç¯„ä¾‹"><a class="header" href="#rust-ç”Ÿå‘½é€±æœŸçœç•¥è¦å‰‡ç¸½æ•´ç†--æœ€ç°¡å–®ç¯„ä¾‹">Rust ç”Ÿå‘½é€±æœŸçœç•¥è¦å‰‡ç¸½æ•´ç† &amp; æœ€ç°¡å–®ç¯„ä¾‹</a></h2>
<h3 id="ä»€éº¼æ˜¯ç”Ÿå‘½é€±æœŸçœç•¥è¦å‰‡"><a class="header" href="#ä»€éº¼æ˜¯ç”Ÿå‘½é€±æœŸçœç•¥è¦å‰‡">ä»€éº¼æ˜¯ç”Ÿå‘½é€±æœŸçœç•¥è¦å‰‡ï¼Ÿ</a></h3>
<p>Rust ç·¨è­¯å™¨æœƒæ ¹æ“šã€Œçœç•¥è¦å‰‡ã€è‡ªå‹•æ¨æ–·å¼•ç”¨çš„ç”Ÿå‘½é€±æœŸï¼Œè®“ä½ å¤§éƒ¨åˆ†æƒ…æ³ä¸ç”¨æ‰‹å‹•æ¨™è¨» <code>'a</code>ã€‚ä½†é‡åˆ°è¤‡é›œæˆ–ä¸æ˜ç¢ºçš„æƒ…å¢ƒï¼Œé‚„æ˜¯éœ€è¦ä½ æ˜ç¢ºæ¨™è¨»ã€‚</p>
<hr />
<h3 id="çœç•¥è¦å‰‡å¯çœç•¥çš„æƒ…æ³"><a class="header" href="#çœç•¥è¦å‰‡å¯çœç•¥çš„æƒ…æ³">çœç•¥è¦å‰‡å¯çœç•¥çš„æƒ…æ³</a></h3>
<ol>
<li>
<p><strong>åªæœ‰ä¸€å€‹è¼¸å…¥å¼•ç”¨åƒæ•¸ï¼Œå›å‚³å¼•ç”¨</strong><br />
ç·¨è­¯å™¨è‡ªå‹•æŠŠå›å‚³å€¼ç”Ÿå‘½é€±æœŸç¶åˆ°è¼¸å…¥åƒæ•¸ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn get_first(s: &amp;str) -&gt; &amp;str {
    &amp;s[0..1]
}
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>æ–¹æ³•åªæœ‰ &amp;self æˆ– &amp;mut selfï¼Œå›å‚³å¼•ç”¨</strong><br />
ç·¨è­¯å™¨è‡ªå‹•ç¶å®šåˆ° selfã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct User { name: String }
impl User {
    fn get_name(&amp;self) -&gt; &amp;str {
        &amp;self.name
    }
}
<span class="boring">}</span></code></pre></pre>
</li>
</ol>
<hr />
<h3 id="éœ€è¦æ‰‹å‹•æ¨™è¨»çš„æƒ…æ³"><a class="header" href="#éœ€è¦æ‰‹å‹•æ¨™è¨»çš„æƒ…æ³">éœ€è¦æ‰‹å‹•æ¨™è¨»çš„æƒ…æ³</a></h3>
<ol>
<li>
<p><strong>å¤šå€‹è¼¸å…¥å¼•ç”¨åƒæ•¸ï¼Œå›å‚³å¼•ç”¨</strong><br />
ç·¨è­¯å™¨ç„¡æ³•åˆ¤æ–·å›å‚³å¼•ç”¨å±¬æ–¼å“ªå€‹åƒæ•¸ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// éŒ¯èª¤ç¯„ä¾‹
// fn longest(a: &amp;str, b: &amp;str) -&gt; &amp;str { ... }

// æ­£ç¢ºç¯„ä¾‹
fn longest(a: &amp;'a str, b: &amp;'a str) -&gt; &amp;'a str {
    if a.len() &gt; b.len() { a } else { b }
}
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>çµæ§‹é«”/æšèˆ‰å«æœ‰å¼•ç”¨æˆå“¡</strong><br />
å¿…é ˆæ¨™è¨»ç”Ÿå‘½é€±æœŸåƒæ•¸ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// éŒ¯èª¤ç¯„ä¾‹
// struct Book { title: &amp;str }

// æ­£ç¢ºç¯„ä¾‹
struct Book {
    title: &amp;'a str,
}
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>ç„¡è¼¸å…¥å¼•ç”¨ä½†å›å‚³å¼•ç”¨</strong><br />
ç·¨è­¯å™¨ç„¡æ³•æ¨æ–·ï¼Œéœ€æ˜ç¢ºæ¨™è¨»ï¼ˆé€šå¸¸æ˜¯ 'staticï¼‰ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// éŒ¯èª¤ç¯„ä¾‹
// fn get_str() -&gt; &amp;str { "hello" }

// æ­£ç¢ºç¯„ä¾‹
fn get_str() -&gt; &amp;'static str {
    "hello"
}
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p><strong>é–‰åŒ…æˆ–å‡½æ•¸æŒ‡é‡æ¶‰åŠå¼•ç”¨</strong><br />
é€šå¸¸è¦ç”¨ for æ˜ç¢ºæ¨™è¨»ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// æ­£ç¢ºç¯„ä¾‹
let closure: Box Fn(&amp;'a str) -&gt; &amp;'a str&gt; = Box::new(|s| s);
<span class="boring">}</span></code></pre></pre>
</li>
</ol>
<hr />
<h2 id="æœ€ç°¡å–®çš„ç”Ÿå‘½é€±æœŸæ¨™è¨»ç¯„ä¾‹"><a class="header" href="#æœ€ç°¡å–®çš„ç”Ÿå‘½é€±æœŸæ¨™è¨»ç¯„ä¾‹">æœ€ç°¡å–®çš„ç”Ÿå‘½é€±æœŸæ¨™è¨»ç¯„ä¾‹</a></h2>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// å…©å€‹è¼¸å…¥å¼•ç”¨ï¼Œå›å‚³å…¶ä¸­ä¸€å€‹ï¼Œéœ€è¦æ¨™è¨»
fn pick_first(a: &amp;'a str, b: &amp;'a str) -&gt; &amp;'a str {
    a
}
<span class="boring">}</span></code></pre></pre>
<hr />
<h2 id="å°çµ"><a class="header" href="#å°çµ">å°çµ</a></h2>
<ul>
<li><strong>ç°¡å–®æƒ…æ³</strong>ï¼ˆå–®ä¸€å¼•ç”¨ã€self æ–¹æ³•ï¼‰ï¼šç·¨è­¯å™¨è‡ªå‹•æ¨æ–·ã€‚</li>
<li><strong>è¤‡é›œæƒ…æ³</strong>ï¼ˆå¤šå¼•ç”¨ã€çµæ§‹é«”å«å¼•ç”¨ã€ç„¡è¼¸å…¥å›å‚³å¼•ç”¨ã€é–‰åŒ…ï¼‰ï¼šå¿…é ˆæ‰‹å‹•æ¨™è¨»ã€‚</li>
<li><strong>åŸå‰‡</strong>ï¼šåªè¦å›å‚³å€¼çš„ç”Ÿå‘½é€±æœŸç„¡æ³•è‡ªå‹•æ¨æ–·ï¼Œå°±è¦æ‰‹å‹•æ¨™è¨»ã€‚</li>
</ul>
<p>é€™æ¨£æ•´ç†å¾Œï¼Œé‡åˆ°éŒ¯èª¤è¨Šæ¯æ™‚å°±èƒ½å¿«é€Ÿåˆ¤æ–·æ˜¯å¦éœ€è¦åŠ ä¸Š <code>'a</code>ï¼</p>

                        <script src="https://utteranc.es/client.js"
                            repo="imxood/imxood.github.io"
                            issue-term="pathname"
                            theme="boxy-light"
                            crossorigin="anonymous"
                            async>
                        </script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../rust/rust.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../rust/basic.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../rust/rust.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../rust/basic.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../theme/custom/mermaid.min.js"></script>
        <script type="text/javascript" src="../theme/custom/mermaid-init.js"></script>


    </body>
</html>
