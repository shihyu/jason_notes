<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>å¤§å±€è§€ - Jason Notes</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html">Jason Notes</a></li><li class="chapter-item expanded "><a href="../ubuntu/ubuntu_setup.html">Ubuntu</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ubuntu/command.html">Command</a></li><li class="chapter-item "><a href="../ubuntu/gcp.html">GCP ssh</a></li><li class="chapter-item "><a href="../ubuntu/wine.html">Wine</a></li></ol></li><li class="chapter-item expanded "><a href="../android/android.html">Android</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../android/install_sdk.html">SDK install</a></li><li class="chapter-item "><a href="../android/flutter.html">Flutter</a></li></ol></li><li class="chapter-item expanded "><a href="../tools/tools.html">Tools</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../tools/asciinema.html">asciinema æŠŠçµ‚ç«¯æ“ä½œéŒ„è£½æˆ gif å‹•ç•«</a></li><li class="chapter-item "><a href="../tools/finmind.html">Finmind</a></li><li class="chapter-item "><a href="../tools/add-enter-and-exit-trace-for-your-function.html">addr2line</a></li><li class="chapter-item "><a href="../tools/cmake.html">cmake</a></li><li class="chapter-item "><a href="../tools/network.html">Network</a></li><li class="chapter-item "><a href="../tools/python-pycryptodome-aes-symmetric-encryption-tutorial-examples.html">å¯¦ä½œ AES å°ç¨±å¼åŠ å¯†</a></li></ol></li><li class="chapter-item expanded "><a href="../html/html.html">HTML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../html/vue.html">Vue</a></li></ol></li><li class="chapter-item expanded "><a href="../vim/vim.html">Vim</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../vim/copilot.html">copilot</a></li><li class="chapter-item "><a href="../vim/tabnine.html">tabnine</a></li></ol></li><li class="chapter-item expanded "><a href="../gdb/gdb.html">Gdb</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../gdb/å¸¸ç”¨æŒ‡ä»¤.html">å¸¸ç”¨æŒ‡ä»¤</a></li><li class="chapter-item "><a href="../gdb/jemalloc.html">jemalloc</a></li><li class="chapter-item "><a href="../gdb/graphs.html">graphs</a></li><li class="chapter-item "><a href="../gdb/rust-gdb.html">rust gdb</a></li><li class="chapter-item "><a href="../gdb/qemu-gdb-risc-v64.html">qemu-gdb-risc-v64-kernel</a></li><li class="chapter-item "><a href="../gdb/go-rust-gdb-debug.html">ä½¿ç”¨gdb è¿½è¹¤go/rustç¨‹å¼ç¢¼</a></li><li class="chapter-item "><a href="../gdb/gdb-function-trace-to-flowchart-guide.html">GDBå‡½æ•¸èª¿ç”¨è»Œè·¡åˆ†æèˆ‡æµç¨‹åœ–ç”Ÿæˆå®Œæ•´æŒ‡å—</a></li></ol></li><li class="chapter-item expanded "><a href="../c++/cpp.html">C++</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../c++/benchmark.html">benchmark</a></li><li class="chapter-item "><a href="../c++/ä¹˜ä»¥0.01å’Œé™¤ä»¥100å“ªå€‹å¿«.html">ä¹˜ä»¥ 0.01 å’Œé™¤ä»¥ 100 å“ªå€‹å¿«</a></li><li class="chapter-item "><a href="../c++/smart_pointer.html">Smart pointer</a></li><li class="chapter-item "><a href="../c++/l&rvalue.html">L&R value</a></li><li class="chapter-item "><a href="../c++/move.html">Move</a></li><li class="chapter-item "><a href="../c++/CAS.html">CAS</a></li><li class="chapter-item "><a href="../c++/HFT.html">HFT</a></li><li class="chapter-item "><a href="../c++/cpp_note.html">Note</a></li><li class="chapter-item "><a href="../c++/é«˜æ€§èƒ½ç¨‹å¼è¨­è¨ˆå¯¦æˆ°.html">é«˜æ€§èƒ½ç¨‹å¼è¨­è¨ˆå¯¦æˆ°</a></li><li class="chapter-item "><a href="../c++/å¦‚ä½•é«˜æ•ˆåœ°å„²å­˜ä¸¦æ“ä½œè¶…å¤§è¦æ¨¡.html">å¦‚ä½•é«˜æ•ˆåœ°å„²å­˜ä¸¦æ“ä½œè¶…å¤§è¦æ¨¡</a></li><li class="chapter-item "><a href="../c++/UC_CAPITAL.html">UC_CAPITAL</a></li><li class="chapter-item "><a href="../c++/cpp-smart-pointers-guide.html">unique_ptr vs shared_ptr</a></li><li class="chapter-item "><a href="../c++/cpp-move-semantics-guide.html">C++ Move èªæ„å®Œæ•´æŒ‡å—</a></li><li class="chapter-item "><a href="../c++/interview.html">interview</a></li></ol></li><li class="chapter-item expanded "><a href="../mojo/mojo.html">Mojo</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../mojo/mojo_crawler_guide.html">Mojo çˆ¬èŸ²å®Œæ•´æŒ‡å—</a></li></ol></li><li class="chapter-item expanded "><a href="../riscv/riscv.html">RISC-V</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../riscv/qemu_riscv_linux.html">QEMUä¸Šé‹è¡ŒRISV-V Linux</a></li><li class="chapter-item "><a href="../riscv/qemi_gdb.html">QEMU GDB</a></li><li class="chapter-item "><a href="../riscv/qemu_gdb_lab.html">Qemu Gdb Lab</a></li></ol></li><li class="chapter-item expanded "><a href="../centos/centos.html">CentOS</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../centos/tqdb_setup.html">TQDB å®‰è£ç´€éŒ„</a></li></ol></li><li class="chapter-item expanded "><a href="../ssh/ssh.html">SSH</a></li><li class="chapter-item expanded "><a href="../network/socket.html">Network</a></li><li class="chapter-item expanded "><a href="../docker/docker_helloworld.html">Docker</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../docker/docker.html">Docker åŸºæœ¬æ•™å­¸</a></li><li class="chapter-item "><a href="../docker/example.html">ç°¡å–®ç¯„ä¾‹</a></li><li class="chapter-item "><a href="../docker/creating-the-perfect-python-dockerfile.html">Perfect python dockerfile</a></li><li class="chapter-item "><a href="../docker/dockerfile-from-docker-image.html">ç”± Docker image åæ¨å…¶ Dockerfile</a></li><li class="chapter-item "><a href="../docker/python_connect_redis.html">Pythoné€£æ¥Redis</a></li><li class="chapter-item "><a href="../docker/command.html">Command</a></li><li class="chapter-item "><a href="../docker/docker_compose.html">Docker compose</a></li><li class="chapter-item "><a href="../docker/docker_compse_example.html">Docker compose example</a></li><li class="chapter-item "><a href="../docker/python_redis.html">Python-Redis</a></li><li class="chapter-item "><a href="../docker/redash.html">Redash</a></li><li class="chapter-item "><a href="../docker/clickhouse.html">ClickHouse</a></li><li class="chapter-item "><a href="../docker/clickhouse-setup.html">clickhouse-setup</a></li><li class="chapter-item "><a href="../docker/python_run_from_local.html">Docker run local</a></li><li class="chapter-item "><a href="../docker/redpanda.html">Redpanda</a></li><li class="chapter-item "><a href="../docker/gcc.html">é‹è¡Œæœ€æ–°ç‰ˆGCC</a></li></ol></li><li class="chapter-item expanded "><a href="../rust/rust.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../rust/note.html">Rustç­†è¨˜</a></li><li class="chapter-item "><a href="../rust/basic.html">Rust åŸºæœ¬æ•™å­¸</a></li><li class="chapter-item "><a href="../rust/ownership.html">Rust æ‰€æœ‰æ¬Šç³»çµ±</a></li><li class="chapter-item "><a href="../rust/lifetime.html">Rust ç”Ÿå‘½é€±æœŸ (Lifetime)</a></li><li class="chapter-item "><a href="../rust/type.html">Rust å‹åˆ¥ç³»çµ±</a></li><li class="chapter-item "><a href="../rust/rust_setup.html">Rust Tools</a></li><li class="chapter-item "><a href="../rust/polars.html">Polars</a></li><li class="chapter-item "><a href="../rust/rust_call_c.html">Rust call C</a></li><li class="chapter-item "><a href="../rust/pyo3.html">PyO3</a></li><li class="chapter-item "><a href="../rust/10-rust-an-introduction.html">çµ¦ C++ ä½¿ç”¨è€…çš„ Rust ç°¡ä»‹</a></li><li class="chapter-item "><a href="../rust/å¯è¦–åŒ–Rustå„è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€.html">å¯è¦–åŒ–Rustå„è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€</a></li><li class="chapter-item "><a href="../rust/rust_note.html">å­¸ç¿’é †åº</a></li><li class="chapter-item expanded "><a href="../rust/overview.html" class="active">å¤§å±€è§€</a></li><li class="chapter-item "><a href="../rust/String.html">ç†è§£å­—ä¸²</a></li><li class="chapter-item "><a href="../rust/easy_rust.html">Easy Rust</a></li><li class="chapter-item "><a href="../rust/rust_easy.html">Rust æ–°æ‰‹</a></li><li class="chapter-item "><a href="../rust/module.html">Rust æ¨¡çµ„çµæ§‹</a></li><li class="chapter-item "><a href="../rust/rust_memory.html">Rustèˆ‡è¨˜æ†¶é«”</a></li><li class="chapter-item "><a href="../rust/rust_vs_cpp.html">Rust vs C++èªæ³•</a></li><li class="chapter-item "><a href="../rust/rust_file_format.html">Rust æª”æ¡ˆæ ¼å¼</a></li><li class="chapter-item "><a href="../rust/rust-an-introduction-in-oop.html">Rust OO</a></li><li class="chapter-item "><a href="../rust/rust-an-introduction-smart-pointer.html">Rust Pointer</a></li><li class="chapter-item "><a href="../rust/pointer.html">Pointer</a></li><li class="chapter-item "><a href="../rust/copy_trait.html">Copy Trait</a></li><li class="chapter-item "><a href="../rust/binary_lib.html">Rust å‡½æ•¸åº«/åŸ·è¡Œæª”</a></li><li class="chapter-item "><a href="../rust/reqwest.html">Reqwest</a></li><li class="chapter-item "><a href="../rust/print-function-name-dump-stack.html">å°å‡ºå‡½æ•¸åç¨±</a></li><li class="chapter-item "><a href="../rust/criterion.html">criterion</a></li><li class="chapter-item "><a href="../rust/Rustçš„ç²¾é«“.html">Rustçš„ç²¾é«“</a></li><li class="chapter-item "><a href="../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—.html">30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/rust_30_day.html">Rust 30 Day</a></li><li class="chapter-item "><a href="../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/Move_Borrow_Ownership.html">è®Šæ•¸çš„æ‰€æœ‰æ¬Šèˆ‡å€Ÿå‡ºè®Šæ•¸</a></li><li class="chapter-item "><a href="../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/Lifetime.html">Lifetimeï¼š Borrow çš„å­˜æ´»æ™‚é–“</a></li></ol></li><li class="chapter-item "><a href="../rust/cpp_vs_rust_comparison.html">C++ vs. Rust: å…¨é¢ç‰¹æ€§æ¯”è¼ƒ</a></li><li class="chapter-item "><a href="../rust/cpp-move-vs-rust-ownership.html">C++ Move èªç¾© vs Rust æ‰€æœ‰æ¬Šç³»çµ±çš„æ ¸å¿ƒå·®ç•°</a></li><li class="chapter-item "><a href="../rust/Rust-RESTful-API-å®Œæ•´é–‹ç™¼æŒ‡å—.html">Rust-RESTful-API-å®Œæ•´é–‹ç™¼æŒ‡å—</a></li><li class="chapter-item "><a href="../rust/Rust-self-Self-èˆ‡-C++-this-å°æ¯”æŒ‡å—.html">Rust-self-Self-èˆ‡-C++-this-å°æ¯”æŒ‡å—</a></li><li class="chapter-item "><a href="../rust/rust-derive-traits-comparison.html">Rust Derive Traits æ¯”è¼ƒï¼šè‡ªå‹•ç”Ÿæˆ vs æ‰‹å‹•å¯¦ä½œ</a></li><li class="chapter-item "><a href="../rust/rust_traits_explained.html">Rust Traits ç™½è©±è§£é‡‹ï¼šèˆ‡ C++ çš„æ¯”è¼ƒ</a></li><li class="chapter-item "><a href="../rust/rust_trait_impl_markdown.html">Rust ä¸­ trait å’Œ impl çš„å·®ç•°</a></li><li class="chapter-item "><a href="../rust/rust_cpp_comparison_md.html">Rust vs C++ è©³ç´°å°æ¯”æŒ‡å—</a></li><li class="chapter-item "><a href="../rust/rust_module_system_markdown.html">Rust æ¨¡çµ„ç³»çµ±å®Œæ•´æŒ‡å—</a></li><li class="chapter-item "><a href="../rust/ownership_vs_borrowing_guide.html">Rust æ“æœ‰æ¬Š vs å€Ÿç”¨ï¼šç”Ÿå‘½é€±æœŸå•é¡ŒæŒ‡å—ğŸ¦€</a></li><li class="chapter-item "><a href="../rust/rust_ownership_guide.html">Rust æ‰€æœ‰æ¬Šç³»çµ± - ç”Ÿæ´»åŒ–è©³è§£</a></li><li class="chapter-item "><a href="../rust/rust_ownership_complete_guide.html">Rust æ‰€æœ‰æ¬Šå®Œæ•´æŒ‡å— - å¾åŸºç¤åˆ°ç²¾é€š</a></li><li class="chapter-item "><a href="../rust/rust_memory_guide.html">Rust è¨˜æ†¶é«”é…ç½®æŒ‡å—ï¼šStack vs Heap</a></li><li class="chapter-item "><a href="../rust/rust_wrappers_guide.html">Rust åŒ…è£é¡å‹ç™½è©±æŒ‡å—ğŸ“¦</a></li></ol></li><li class="chapter-item expanded "><a href="../go/go.html">Go</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../go/note.html">Golang  Note</a></li><li class="chapter-item "><a href="../go/pytago.html">pytago</a></li><li class="chapter-item "><a href="../go/Goç·¨ç¨‹å¯¦æˆ°æ´¾åŸºç¤å…¥é–€.html">Goç·¨ç¨‹å¯¦æˆ°æ´¾åŸºç¤å…¥é–€</a></li><li class="chapter-item "><a href="../go/Goç·¨ç¨‹å¯¦æˆ°æ´¾Webé–‹ç™¼åŸºç¤.html">Goç·¨ç¨‹å¯¦æˆ°æ´¾Webé–‹ç™¼åŸºç¤</a></li><li class="chapter-item "><a href="../go/golang_debugger.html">Golang Deubgger</a></li><li class="chapter-item "><a href="../go/golang-go-module-tutorial.html">å¾ä¸€çŸ¥åŠè§£åˆ°ç•¥æ‡‚ Go modules</a></li><li class="chapter-item "><a href="../go/go_mod.html">Go modules</a></li><li class="chapter-item "><a href="../go/trace.html">Golangå¤§æ®ºå™¨ä¹‹è·Ÿè¹¤å‰–ætrace</a></li><li class="chapter-item "><a href="../go/Coroutine.html">è¡Œç¨‹ã€åŸ·è¡Œç·’ã€å”ç¨‹ï¼Œå‚»å‚»åˆ†å¾—æ¸…æ¥šï¼</a></li><li class="chapter-item "><a href="../go/goroutine-and-channel.html">Goä½µç™¼</a></li><li class="chapter-item "><a href="../go/websocket.html">Websocket</a></li><li class="chapter-item "><a href="../go/returning-pointer-from-a-function-in-go.html">Returning Pointer from a Function in Go</a></li><li class="chapter-item "><a href="../go/golang-memory-management.html">GC å…¨é¢è§£æ</a></li><li class="chapter-item "><a href="../go/golang-goroutine.html">Goroutine èˆ‡ GMP åŸç†å…¨é¢åˆ†æ</a></li><li class="chapter-item "><a href="../go/oo.html">OO</a></li><li class="chapter-item "><a href="../go/mutex-rwmutex.html">sync.Mutex å’Œ sync.RWMutex</a></li><li class="chapter-item "><a href="../go/interface.html">interface</a></li><li class="chapter-item "><a href="../go/example.html">Example</a></li><li class="chapter-item "><a href="../go/LiveKit.html">LiveKit</a></li></ol></li><li class="chapter-item expanded "><a href="../ml/ml.html">ML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ml/pytorch.html">Pytorch</a></li><li class="chapter-item "><a href="../ml/pytorch_setup.html">Pytorch å®‰è£</a></li><li class="chapter-item "><a href="../ml/deap.html">Deap</a></li><li class="chapter-item "><a href="../ml/cudf.html">CUDF</a></li><li class="chapter-item "><a href="../ml/åˆæ¢åŸºå› æ¼”ç®—æ³•.html">åˆæ¢åŸºå› æ¼”ç®—æ³•-ç”¨ OneMax å•é¡Œç¤ºç¯„</a></li><li class="chapter-item "><a href="../ml/ç°¡å–®è§£é‡‹æ¢¯åº¦ä¸‹é™æ³•.html">ç°¡å–®è§£é‡‹æ¢¯åº¦ä¸‹é™æ³•</a></li><li class="chapter-item "><a href="../ml/æ¢¯åº¦ä¸‹é™æ³•_gradient_descent.html">æ¢¯åº¦ä¸‹é™æ³• gradient descent</a></li><li class="chapter-item "><a href="../ml/æ¢¯åº¦æœ€ä½³è§£ç›¸é—œç®—æ³•.html">æ¢¯åº¦æœ€ä½³è§£ç›¸é—œç®—æ³•</a></li><li class="chapter-item "><a href="../ml/åŸºæ–¼DEAPåº«çš„Pythoné€²åŒ–æ¼”ç®—æ³•å¾å…¥é–€åˆ°å…¥åœŸ.html">åŸºæ–¼DEAPåº«çš„Pythoné€²åŒ–æ¼”ç®—æ³•å¾å…¥é–€åˆ°å…¥åœŸ</a></li><li class="chapter-item "><a href="../ml/GA.html">GA</a></li><li class="chapter-item "><a href="../ml/XGBoost.html">XGBoost</a></li><li class="chapter-item "><a href="../ml/YOLO.html">YOLO</a></li><li class="chapter-item "><a href="../ml/yolov8æ‰‹å‹¢è­˜åˆ¥.html">YOLOv8æ‰‹å‹¢è­˜åˆ¥</a></li><li class="chapter-item "><a href="../ml/Roboflow.html">Roboflow</a></li></ol></li><li class="chapter-item expanded "><a href="../python/python.html">Python</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../python/Poetryå®Œå…¨å…¥é–€æŒ‡å—.html">Poetryå®Œå…¨å…¥é–€æŒ‡å—</a></li><li class="chapter-item "><a href="../python/æ­å»ºgRPCæœå‹™.html">æ­å»ºgRPCæœå‹™</a></li><li class="chapter-item "><a href="../python/python_debugger.html">Python Debugger</a></li><li class="chapter-item "><a href="../python/decorator.html">Python decorator</a></li><li class="chapter-item "><a href="../python/python-decorator.html">è£é£¾å™¨çœ‹é€™ä¸€ç¯‡å°±å¤ äº†</a></li><li class="chapter-item "><a href="../python/import-concept.html">import-concept</a></li><li class="chapter-item "><a href="../python/process_thread.html">Process/Threadå„ªç¼ºé»</a></li><li class="chapter-item "><a href="../python/processing_communcation.html">Processing é€šè¨Š</a></li><li class="chapter-item "><a href="../python/condition.html">Pythonä¸­çš„waitå’Œnotify</a></li><li class="chapter-item "><a href="../python/ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å¼.html">ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å¼</a></li><li class="chapter-item "><a href="../python/Loguru.html">Loguru</a></li><li class="chapter-item "><a href="../python/cython.html">Cython</a></li><li class="chapter-item "><a href="../python/WebSocket_reconnect.html">Python WebSocketé•·é€£æ¥å¿ƒè·³èˆ‡çŸ­é€£æ¥</a></li><li class="chapter-item "><a href="../python/bloomrpc.html">bloomrpc</a></li><li class="chapter-item "><a href="../python/concurrent.futures.html">Concurrent futures</a></li><li class="chapter-item "><a href="../python/schedule.html">ä»»å‹™èª¿åº¦</a></li><li class="chapter-item "><a href="../python/plot/plot.html">Plot</a></li><li class="chapter-item "><a href="../python/plot/dash.html">Dash</a></li><li class="chapter-item "><a href="../python/Rust_bindings_for_Python.html">Rust bindings for Python</a></li><li class="chapter-item "><a href="../python/pandas.html">Pandas</a></li><li class="chapter-item "><a href="../python/coroutine.html">Coroutine</a></li><li class="chapter-item "><a href="../python/finmind.html">FinMind</a></li><li class="chapter-item "><a href="../python/telegram_bot.html">Telegram Bot</a></li><li class="chapter-item "><a href="../python/python-different-ways-to-kill-a-thread.html">Different ways kill thread</a></li><li class="chapter-item "><a href="../python/websocket_client_server.html">Websocket client/server</a></li><li class="chapter-item "><a href="../python/poetry.html">å¾é›¶é–‹å§‹ä½¿ç”¨ Poetry</a></li><li class="chapter-item "><a href="../python/fil-memory-usage-profiler.html">Fil-memory-usage-profiler</a></li><li class="chapter-item "><a href="../python/plot.html">ç¹ªåœ–</a></li><li class="chapter-item "><a href="../python/shioaji.html">æ°¸è±shioaji</a></li><li class="chapter-item "><a href="../python/other.html">Other</a></li></ol></li><li class="chapter-item expanded "><a href="../mermaid/mermaid.html">Mermaid</a></li><li class="chapter-item expanded "><a href="../linux_system/linux_system.html">Linux System</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../linux_system/1_day_socket.html">Socket</a></li><li class="chapter-item "><a href="../linux_system/cgroup.html">Cgroup</a></li><li class="chapter-item "><a href="../linux_system/perf.html">Perf</a></li><li class="chapter-item "><a href="../linux_system/è‡ªè£½Lib.html">build Lib</a></li><li class="chapter-item "><a href="../linux_system/performance.html">performance</a></li></ol></li><li class="chapter-item expanded "><a href="../strategy/bollmaker.html">Strategy</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../strategy/é€ å¸‚/market_market.html">é€ å¸‚</a></li><li class="chapter-item "><a href="../strategy/tw_futures.html">è‡ºæŒ‡</a></li><li class="chapter-item "><a href="../strategy/arbitrage.html">å¥—åˆ©</a></li><li class="chapter-item "><a href="../strategy/é…å°äº¤æ˜“.html">é…å°äº¤æ˜“</a></li><li class="chapter-item "><a href="../strategy/æµ·é¾œäº¤æ˜“.html">æµ·é¾œäº¤æ˜“</a></li><li class="chapter-item "><a href="../strategy/è‚¡æµ·ç­‹è‚‰äºº.html">è‚¡æµ·ç­‹è‚‰äºº</a></li><li class="chapter-item "><a href="../strategy/å¦‚ä½•é¿å…éæ“¬åˆ.html">å¦‚ä½•é¿å…éæ“¬åˆ</a></li><li class="chapter-item "><a href="../strategy/å¤šç©ºæ“ä½œè¡“.html">å¤šç©ºæ“ä½œè¡“</a></li><li class="chapter-item "><a href="../strategy/è³‡é‡‘æ§ç®¡æ‰æ˜¯ç‹é“.html">è³‡é‡‘æ§ç®¡æ‰æ˜¯ç‹é“</a></li><li class="chapter-item "><a href="../strategy/00713_00675Læ­£äºŒèœˆèš£ç­–ç•¥.html">æ­£äºŒèœˆèš£ç­–ç•¥</a></li><li class="chapter-item "><a href="../strategy/è³ªæŠ¼00713+æ­£äºŒ.html">è³ªæŠ¼00713+æ­£äºŒ</a></li><li class="chapter-item "><a href="../strategy/phcebus/phcebus.html">phcebus</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../strategy/phcebus/è²å¼æ€è€ƒ.html">è²å¼æ€è€ƒ</a></li><li class="chapter-item "><a href="../strategy/phcebus/è²·è‚¡3å¿ƒæ³•.html">è²·è‚¡3å¿ƒæ³•</a></li></ol></li><li class="chapter-item "><a href="../strategy/Option/option.html">é¸æ“‡æ¬Š</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../strategy/Option/option_note.html">Option note</a></li></ol></li><li class="chapter-item "><a href="../strategy/vectorbt.html">VectorBT</a></li><li class="chapter-item "><a href="../strategy/orderbook.html">Orderbook</a></li><li class="chapter-item "><a href="../strategy/é¸è‚¡æ¢ä»¶.html">é¸è‚¡æ¢ä»¶</a></li><li class="chapter-item "><a href="../strategy/å¦‚ä½•é€²å ´.html">å¦‚ä½•é€²å ´</a></li><li class="chapter-item "><a href="../strategy/å¦‚ä½•å‡ºå ´.html">å¦‚ä½•å‡ºå ´</a></li><li class="chapter-item "><a href="../strategy/å»ºå€‰åŠ ç¢¼.html">å»ºå€‰åŠ ç¢¼</a></li><li class="chapter-item "><a href="../strategy/DT.html">ç•¶æ²–</a></li><li class="chapter-item "><a href="../strategy/ç•¶æ²–åšç©º.html">ç•¶æ²–åšç©º</a></li><li class="chapter-item "><a href="../strategy/æŠ„åº•.html">æŠ„åº•</a></li><li class="chapter-item "><a href="../strategy/éº»é“æ˜/éº»é“æ˜.html">éº»é“æ˜</a></li><li class="chapter-item "><a href="../strategy/è³ºè´å¤§ç›¤çš„å‹•èƒ½æŠ•è³‡æ³•.html">è³ºè´å¤§ç›¤çš„å‹•èƒ½æŠ•è³‡æ³•</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../strategy/éº»é“æ˜/å‡çªç ´.html">å‡çªç ´</a></li></ol></li><li class="chapter-item "><a href="../strategy/å¥‡æ­£/å¥‡æ­£.html">å¥‡æ­£</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../strategy/å¥‡æ­£/è³‡é‡‘æ§ç®¡èˆ‡è©¦å–®ç­–ç•¥.html">è³‡é‡‘æ§ç®¡èˆ‡è©¦å–®ç­–ç•¥</a></li><li class="chapter-item "><a href="../strategy/å¥‡æ­£/å¦‚ä½•å‡ºå ´.html">å¦‚ä½•å‡ºå ´</a></li></ol></li><li class="chapter-item "><a href="../strategy/ptt_stock/a0808996.html">PTT Stock</a></li><li class="chapter-item "><a href="../strategy/Book/JG.html">JG</a></li><li class="chapter-item "><a href="../strategy/bnf.html">BNF</a></li><li class="chapter-item "><a href="../strategy/cis.html">CIS</a></li><li class="chapter-item "><a href="../strategy/GA.html">GA</a></li><li class="chapter-item "><a href="../strategy/stock.html">Stock</a></li><li class="chapter-item "><a href="../strategy/note.html">Resource</a></li><li class="chapter-item "><a href="../strategy/nansen.html">Nansen</a></li><li class="chapter-item "><a href="../strategy/example.html">Example</a></li><li class="chapter-item "><a href="../strategy/other.html">Other</a></li><li class="chapter-item "><a href="../strategy/sample.html">Sample</a></li><li class="chapter-item "><a href="../strategy/shioaji.html">shioaji æ¨¡æ“¬</a></li><li class="chapter-item "><a href="../strategy/grid.html">Grid</a></li><li class="chapter-item "><a href="../strategy/pine-script.html">pine-script</a></li><li class="chapter-item "><a href="../strategy/æ‹¾äººç‰™æ…§.html">æ‹¾äººç‰™æ…§</a></li><li class="chapter-item "><a href="../strategy/sharpe_ratio.html">å¤æ™®å€¼</a></li><li class="chapter-item "><a href="../strategy/display_mae_mfe_analysis.html">MAE&MFEåˆ†æ</a></li><li class="chapter-item "><a href="../strategy/æµ·é¾œæŠ•è³‡æ³•å‰‡.html">æµ·é¾œæŠ•è³‡æ³•å‰‡</a></li><li class="chapter-item "><a href="../strategy/edge-ratio-follow-application.html">å½ˆæ€§é€²å‡ºå ´çš„åˆ¤æ–·</a></li><li class="chapter-item "><a href="../strategy/ä¸‰å¿ƒæ³•é †å‹¢æ“ä½œé™³æ—å…ƒ10å¹´è³‡ç”¢ç¿»10å€.html">ä¸‰å¿ƒæ³•é †å‹¢æ“ä½œé™³æ—å…ƒ10å¹´è³‡ç”¢ç¿»10å€</a></li><li class="chapter-item "><a href="../strategy/Jump.html">JUMP</a></li><li class="chapter-item "><a href="../strategy/å¼µæ¾å…æŠ•è³‡å¿ƒæ³•.html">å¼µå…æŠ•è³‡å¿ƒæ³•</a></li><li class="chapter-item "><a href="../strategy/vectorbt_é…å°.html">vectorbt é…å°</a></li><li class="chapter-item "><a href="../strategy/äº¤æ˜“çš„è¡Œç‚ºèˆ‡æ€ç¶­åˆ†äº«.html">äº¤æ˜“çš„è¡Œç‚ºèˆ‡æ€ç¶­åˆ†äº«</a></li><li class="chapter-item "><a href="../strategy/æŠ•è³‡æŠ•æ©Ÿçš„è§€å¿µèˆ‡å¿ƒå¾—åˆ†äº«.html">æŠ•è³‡æŠ•æ©Ÿçš„è§€å¿µèˆ‡å¿ƒå¾—åˆ†äº«</a></li><li class="chapter-item "><a href="../strategy/finlab.html">Finlab</a></li><li class="chapter-item "><a href="../strategy/backtrader/basis.html">Backtrader</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹.html">Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹</a></li><li class="chapter-item "><a href="../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶äºŒå®šæœŸå®šé¡æŠ•è³‡.html">Python å›æ¸¬æ¡†æ¶ï¼ˆäºŒï¼‰å®šæœŸå®šé¡æŠ•è³‡</a></li><li class="chapter-item "><a href="../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸‰æŠ€è¡“æŒ‡æ¨™.html">Python å›æ¸¬æ¡†æ¶ï¼ˆä¸‰ï¼‰æŠ€è¡“æŒ‡æ¨™</a></li><li class="chapter-item "><a href="../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶å››CrossOverå’ŒSignal.html">Python å›æ¸¬æ¡†æ¶ï¼ˆå››ï¼‰CrossOver å’Œ Signal</a></li><li class="chapter-item "><a href="../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶äº”Sizer.html">Python å›æ¸¬æ¡†æ¶ï¼ˆäº”ï¼‰Sizer</a></li><li class="chapter-item "><a href="../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶å…­Analyzers.html">Python å›æ¸¬æ¡†æ¶ï¼ˆå…­ï¼‰Analyzers</a></li><li class="chapter-item "><a href="../strategy/backtrader/å¤šè‚¡çµ„åˆæ“ä½œç­–ç•¥.html">å¤šè‚¡çµ„åˆæ“ä½œ</a></li><li class="chapter-item "><a href="../strategy/backtrader/å‡ç·šäº¤å‰ç­–ç•¥.html">å‡ç·šäº¤å‰ç­–ç•¥</a></li><li class="chapter-item "><a href="../strategy/backtrader/å”å¥‡å®‰é€šé“ç­–ç•¥.html">å”å¥‡å®‰é€šé“ç­–ç•¥</a></li><li class="chapter-item "><a href="../strategy/backtrader/Sizersæ¨¡çµ„.html">Sizersæ¨¡çµ„</a></li><li class="chapter-item "><a href="../strategy/backtrader/Observersæ¨¡çµ„.html">Observersæ¨¡çµ„</a></li><li class="chapter-item "><a href="../strategy/backtrader/Pyfolio.html">Pyfolio</a></li><li class="chapter-item "><a href="../strategy/backtrader/Sample.html">Sample</a></li><li class="chapter-item "><a href="../strategy/backtrader/performance.html">Performance</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../mq/kafka.html">MQ</a></li><li class="chapter-item expanded "><a href="../mq/kafka-python.html">Kafkaçš„é€šä¿—ç¸½çµ</a></li><li class="chapter-item expanded "><a href="../database/database.html">Database</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../database/redis.html">Redis</a></li><li class="chapter-item "><a href="../database/hash.html">Redis Hash</a></li><li class="chapter-item "><a href="../database/clickhouse.html">ClickHouse</a></li><li class="chapter-item "><a href="../database/dolphin.html">Dolphin</a></li><li class="chapter-item "><a href="../database/sqlite.html">Sqlite</a></li></ol></li><li class="chapter-item expanded "><a href="../cryptotrade/cryptotrade.html">CryptoTrade</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cryptotrade/binance/binance.html">Binance</a></li><li class="chapter-item "><a href="../cryptotrade/binance/oco.html">å¦‚ä½•å°‡OCOè¨‚å–®ç™¼é€åˆ°Binance</a></li></ol></li><li class="chapter-item expanded "><a href="../git/git.html">Git</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../git/git-remove-commited-files.html">git-remove-commited-files</a></li><li class="chapter-item "><a href="../git/cheat-sheet.html">Git å¸¸ç”¨</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="å­¸-rust-è¦æœ‰å¤§å±€è§€"><a class="header" href="#å­¸-rust-è¦æœ‰å¤§å±€è§€">å­¸ Rust è¦æœ‰å¤§å±€è§€</a></h1>
<h1 id="crash-rust"><a class="header" href="#crash-rust">Crash Rust</a></h1>
<p>å­¸ç¿’ä¸€ç¨®æ–°çš„èªè¨€ï¼Œé¦–å…ˆéœ€è¦äº†è§£çš„å°±æ˜¯è©²èªè¨€çš„åŸºæœ¬è¨­è¨ˆæ€è·¯ï¼Œå·¥ç¨‹æ¶æ§‹ç‰¹é»ï¼Œæœ¬æ–‡å¸Œæœ›å¯ä»¥å¹«ä½å¤§å¤šæ•¸å° Rust æ„Ÿèˆˆè¶£çš„åŒå­¸å¿«é€Ÿé€²å…¥å…·é«”å·¥ç¨‹é–‹ç™¼ï¼Œä¸¦æƒæ¸…å¤§éƒ¨åˆ†é™¤åŸºæœ¬èªæ³•ä¹‹å¤–çš„éšœç¤™; å…·é«”æ¶‰åŠåˆ°çš„ä¸»é¡ŒåŒ…æ‹¬å®‰è£ï¼Œé‹è¡Œï¼Œç™¼ä½ˆï¼Œä¸‰æ–¹åŒ…å¼•å…¥ç­‰ç­‰;</p>
<h2 id="rust-å®‰è£"><a class="header" href="#rust-å®‰è£">Rust å®‰è£</a></h2>
<h3 id="install"><a class="header" href="#install">install</a></h3>
<p>å®‰è£ Rust éå¸¸ç°¡å–®ï¼Œåªéœ€è¦ä¸€æ¢å‘½ä»¤ï¼Œä½†æ˜¯æ³¨æ„éƒ¨åˆ†æ©Ÿå™¨ curl ç‰ˆæœ¬å¯èƒ½å°è‡´å‘½ä»¤åŸ·è¡Œå¤±æ•—ï¼Œæ¯”å¦‚æ¨‘å°å­©è‡ªå·±çš„é–‹ç™¼æ©Ÿ ubuntu20.04 è‡ªå¸¶çš„ curl æç¤º ssl 443 éŒ¯èª¤ï¼Œå¦‚æœé‡åˆ°çš„è©±ï¼Œå˜—è©¦é‡æ–°å®‰è£ curl</p>
<pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<h3 id="check"><a class="header" href="#check">check</a></h3>
<p>åŸ·è¡Œ Rustup å‘½ä»¤, æ³¨æ„å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å…¨æ–°å®‰è£, å…ˆåŸ·è¡Œ <code>source $HOME/.cargo/env</code></p>
<pre><code>root@ecs-x86 :~/docs/Rust/CrashRustIn2Hours# source $HOME/.cargo/env
root@ecs-x86 :~/docs/Rust/CrashRustIn2Hours# rustup
Rustup 1.24.2 (755e2b07e 2021-05-12)
...
</code></pre>
<h2 id="hello-rust"><a class="header" href="#hello-rust">Hello Rust!</a></h2>
<p>æ¥ä¸‹ä¾†æˆ‘å€‘å®Œæˆç¬¬ä¸€å€‹ Rust é …ç›®ï¼ŒåŠŸèƒ½åªæœ‰ä¸€å¥æ‰“å°è¼¸å‡ºï¼Œä½†æ˜¯å¤§å®¶åœ¨æ­¤ç« ç¯€æ‡‰è©²å­¸åˆ°çš„æ˜¯å¦‚ä½•ç·¨è­¯ä¸¦é‹è¡Œ Rust ä»£ç¢¼ç¨‹åº;</p>
<h3 id="ç·¨ç¢¼"><a class="header" href="#ç·¨ç¢¼">ç·¨ç¢¼</a></h3>
<p>å‰µå»ºç¬¬ä¸€å€‹<code>rs</code>æ–‡ä»¶ (<code>hello.rs</code>)ï¼Œæ–‡ä»¶å…§å®¹å¦‚ä¸‹:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!("hello Rust!");
}</code></pre></pre>
<p>æ–‡ä»¶ç›®éŒ„çµæ§‹ç°¡å–®ï¼Œä»£ç¢¼ç›®éŒ„ä¸‹åªæœ‰ä¸€å€‹å–®ç¨çš„<code>hello.rs</code>æ–‡ä»¶å¦‚ä¸‹:</p>
<pre><code>root@ecs-x86 CrashRustIn2Hours# tree code/
code/
â””â”€â”€ hello.rs
0 directories, 1 file
</code></pre>
<h3 id="ç·¨è­¯--åŸ·è¡Œ"><a class="header" href="#ç·¨è­¯--åŸ·è¡Œ">ç·¨è­¯ &amp; åŸ·è¡Œ</a></h3>
<p>Rust çš„ç·¨è­¯å™¨å«åš<code>rustc</code>ï¼Œç·¨è­¯æ™‚ç›´æ¥å¾Œè·Ÿå¾…ç·¨è­¯çš„<code>rs</code>æ–‡ä»¶å³å¯, ä¸åŸ·è¡Œè¼¸å‡ºæ–‡ä»¶åå‰‡ç”ŸæˆåŒåçš„å¯åŸ·è¡Œæ–‡ä»¶, å¯ä»¥ç›´æ¥åŸ·è¡Œè¼¸å‡ºæ–‡ä»¶å¾—åˆ°ç¨‹åºçµæœ</p>
<pre><code>root@ecs-x86 code# rustc hello.rs 
root@ecs-x86 code# tree 
.
â”œâ”€â”€ hello
â””â”€â”€ hello.rs
0 directories, 2 files
root@ecs-x86 code# ls -lhF
total 3.3M
-rwxr-xr-x 1 root root 3.3M Jun  2 13:32 hello*
-rw-rw-rw- 1 root root   42 Jun  2 13:29 hello.rs
root@ecs-x86 code# ./hello 
hello Rust!
</code></pre>
<p>åˆ°æ­¤ä½ çœ‹åˆ°çš„æ˜¯ç´”æ‰‹å·¥é–‹ç™¼æµç¨‹ï¼ŒåŒ…æ‹¬ç·¨è­¯ï¼Œæ–‡ä»¶å‰µå»ºï¼Œç›®éŒ„çµ„ç¹”ç­‰ç­‰éƒ½éœ€è¦è‡ªè¡Œç¶­è­·ï¼Œç‚ºäº†æ–¹ä¾¿å·¥ç¨‹åŒ–ï¼Œä¸¦ä¸”å¿«é€Ÿå‰µå»ºå·¥ç¨‹ï¼ŒRust æä¾›äº†è‡ªå·±çš„è‡ªå‹•åŒ–å·¥å…·éˆ<code>cargo</code>;</p>
<h4 id="hello-cargo"><a class="header" href="#hello-cargo">Hello Cargo!</a></h4>
<p><code>cargoä¹‹æ–¼Rust</code>çŒ¶å¦‚<code>npmä¹‹æ–¼node</code>, <code>cargo</code>å¯ä»¥å¹«åŠ©ä½ ç¶­è­·åŒ…ä¾è³´é—œä¿‚ï¼Œå®‰è£ä¸‰æ–¹åŒ…ï¼Œè‡ªå‹•ç·¨è­¯ä»£ç¢¼ï¼ŒåŸ·è¡Œçµæœï¼Œå®Œå–„<code>debug</code>å’Œ<code>release</code>çš„å„ç¨®éƒ¨ç½²éœ€æ±‚;</p>
<p><code>cargo</code>ä¸‰æ¿æ–§:</p>
<p>â€¢<code>cargo init</code> è‡ªå‹•å‰µå»ºå·¥ç¨‹ï¼ŒåŒ…æ‹¬åŸºæœ¬çš„é…ç½®æ–‡ä»¶ï¼Œ<code>main.rs</code>ç”Ÿæˆç­‰ç­‰</p>
<pre><code>root@ecs-x86 code# cargo init
     Created binary (application) package
root@ecs-x86 code# tree
.
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src
    â””â”€â”€ main.rs
1 directory, 2 filese
</code></pre>
<p>â€¢<code>cargo run</code> è‡ªå‹•ç·¨è­¯ä¸¦åŸ·è¡Œ; æ³¨æ„ï¼Œæ­¤æ™‚ç·¨è­¯é¸é …å‡ç‚º debug æ¨¡å¼ï¼Œæ‰€ä»¥ target ç›®éŒ„ä¸‹åªæœ‰ä¸€å€‹ debug ç›®éŒ„è‡ªå‹•ç”Ÿæˆ (å¯åŸ·è¡Œæ–‡ä»¶äº¦åœ¨å…¶ä¸­)</p>
<pre><code>root@ecs-x86 code# cargo run
   Compiling code v0.1.0 (/root/docs/Rust/CrashRustIn2Hours/code)
    Finished dev [unoptimized + debuginfo] target(s) in 1.34s
     Running `target/debug/code`
Hello, world!
root@ecs-x86 code# tree -L 2
.
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src
â”‚   â””â”€â”€ main.rs
â””â”€â”€ target
    â”œâ”€â”€ CACHEDIR.TAG
    â””â”€â”€ debug
</code></pre>
<p>â€¢<code>cargo build</code> å–®ç¨ç·¨è­¯ï¼Œå¦‚æœéœ€è¦å–®ç¨ build å¯èƒ½æ˜¯æœ€çµ‚ç™¼ä½ˆäºŒé€²è£½ç¨‹åºï¼Œæ­¤æ™‚ä¸€èˆ¬é™„å¸¶åƒæ•¸<code>--release</code></p>
<pre><code>root@ecs-x86 code# cargo build --release
   Compiling code v0.1.0 (/root/docs/Rust/CrashRustIn2Hours/code)
    Finished release [optimized] target(s) in 0.35s
root@ecs-x86 code# tree -L 2
.
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src
â”‚   â””â”€â”€ main.rs
â””â”€â”€ target
    â”œâ”€â”€ CACHEDIR.TAG
    â”œâ”€â”€ debug
    â””â”€â”€ release
4 directories, 4 files
</code></pre>
<h2 id="crate-å’Œ-module"><a class="header" href="#crate-å’Œ-module">crate å’Œ module</a></h2>
<p>â€¢<code>crate</code>æ˜¯ rust å°å¤–åˆ†ç™¼å’Œä»£ç¢¼å…±äº«çš„å–®ä½ï¼Œé¡ä¼¼ jar åŒ…ï¼Œé¡ä¼¼ so åº«ï¼Œæ˜¯ä¸‰æ–¹åº«çš„æ¦‚å¿µ â€¢<code>crate</code>æ˜¯ç·¨è­¯æ‰“åŒ…çš„æ¦‚å¿µ â€¢<code>crate</code>çš„æ ¸å¿ƒæ¨™èªŒå°±æ˜¯ä¸€å€‹å–®ç¨çš„<code>Cargo.toml</code>æ–‡ä»¶ï¼Œæ˜¯ä¸€å€‹é‚è¼¯å¯ç·¨è­¯çš„åŠŸèƒ½åº« â€¢<code>cargo package</code>å¯ä»¥åœ¨<code>target/package/</code>ç›®éŒ„ä¸‹ç”Ÿæˆå°æ‡‰çš„<code>*.crate</code>æ‰“åŒ…æ–‡ä»¶ â€¢<code>module</code>æ˜¯æ¨¡å¡Šçš„æ¦‚å¿µï¼Œæ˜¯ä»£ç¢¼çµ„ç¹”æ–¹å¼ï¼Œé¡ä¼¼æ–¼ c++ çš„<code>namespace</code>, é¡ä¼¼æ–¼ golang çš„<code>package</code>çš„æ¦‚å¿µ â€¢<code>module</code>çš„æ ¸å¿ƒæ¨™èªŒæ˜¯èªæ³•å±¤é¢çš„<code>use &lt;module_name&gt;</code>çš„å°å…¥å’Œè²æ˜ â€¢<code>module</code>æœ‰ä¸‰ç¨®æ–‡ä»¶çµ„ç¹”æ–¹å¼ (å‡è¨­å»ºç«‹ä¸€å€‹å«åš<code>string_util</code>çš„ module)1. å…§åµŒæ–‡ä»¶ä¸­ä½¿ç”¨<code>mod string_util { ... }</code>çš„æ–¹å¼é€²è¡Œå®šç¾©, å…§éƒ¨å¯ä»¥åŒ…å«ä»»æ„å¤šå‡½æ•¸ï¼Œçµæ§‹é«”ç­‰ç­‰ 2. å»ºç«‹ä¸€å€‹ç¨ç«‹æ–‡ä»¶å<code>string_util.rs</code>ï¼Œå…§éƒ¨ç„¡ä¸Šé¢çš„é¡¯å¼<code>mod &lt;module_name&gt;</code>è²æ˜ 3. å»ºç«‹ä¸€å€‹æ–‡ä»¶å¤¾<code>string_util</code>å…§éƒ¨åŒ…å«ä¸€å€‹<code>mod.rs</code>æ–‡ä»¶ï¼Œé‚„æœ‰å…¶ä»–<code>submodule</code>çš„è©±æ–‡ä»¶å¤¾ä¸­ä¸€èˆ¬ä½¿ç”¨ç¬¬äºŒç¨®å‰µå»ºæ–°æ–‡ä»¶ â€¢ ä¸‰è€…å–å…¶ä¸€ï¼Œå¦‚æœç™¼ç¾éƒ½æ²’æœ‰æˆ–è€…æœ‰å¤šé‡æƒ…æ³å®šç¾©åŒä¸€å€‹<code>mod</code>çš„æ™‚å€™ rustc ä¾¿æœƒå ±éŒ¯.</p>
<p>é—œæ–¼<code>crate</code>çš„å…¶ä»–ç†è§£å¯ä»¥åƒè€ƒå®˜æ–¹ doc çš„éƒ¨åˆ†æè¿°:</p>
<blockquote>
<p>A crate is a compilation unit in Rust. Whenever <code>rustc some_file.rs</code> is called, <code>some_file.rs is treated as the crate file.</code> If some_file.rs has mod declarations in it, then the contents of the module files would be inserted in places where mod declarations in the crate file are found, before running the compiler over it. In other words, modules do not get compiled individually, <code>only crates get compiled.</code></p>
</blockquote>
<blockquote>
<p>Rust thinks in modules, not files. There is no such thing as file imports, Important concepts in the Rust Module System are <code>packages</code>, <code>crates</code>, <code>modules</code>, and <code>paths</code></p>
</blockquote>
<p>å­¸ç¿’<code>module</code>å’Œ<code>crate</code>çš„æ™‚å€™éœ€è¦äº†è§£çš„åŸºæœ¬å‰æçŸ¥è­˜å¦‚ä¸‹:</p>
<blockquote>
<p>rust çš„<code>pubilc</code>å’Œ<code>private</code>çš„ä½œç”¨åŸŸæ§åˆ¶çµæ§‹é«”å±¤é¢æå‡åˆ°äº†<code>mod</code>ç¯„åœï¼Œçµæ§‹é«”æœ¬èº«æ²’æœ‰é¡ä¼¼çš„æ¦‚å¿µï¼Œé€™ä¸€é»ç›¸æ¯” c++,javaï¼Œgolang å‡ä¸åŒï¼Œæ­¤è™•çš„ä¿®æ”¹çœå»äº†<code>friend å‹å…ƒ</code>, <code>gettter</code>, <code>setter</code>ç­‰ç­‰ä¸€äº›åˆ—ä¸å¿…è¦çš„éº»ç…©, åŒä¸€å€‹<code>module</code>å…§éƒ¨çš„æ‰€æœ‰çµæ§‹é«”å‡½æ•¸ç­‰ç­‰å¯ä»¥ç·Šå¯†åˆä½œï¼Œç°¡å–®ç›´æ¥ï¼Œå°å¤–æš´éœ²çš„å‡½æ•¸å’Œé¡å‹å–®ç¨å¢åŠ <code>pub</code>é—œéµå­—å°å‡º, å„ªé›…è€Œä¸”ç·¨ç¢¼å‹å¥½</p>
</blockquote>
<h3 id="crate-çš„ç›´è§€ç†è§£"><a class="header" href="#crate-çš„ç›´è§€ç†è§£">crate çš„ç›´è§€ç†è§£</a></h3>
<p>rust å…±äº«ä»£ç¢¼æ¨¡å¡Šçš„å…¬ç¶²åœ°å€ç‚º<code>crates.io</code>, å¦‚æœä½¿ç”¨é<code>maven</code>ï¼Œ<code>rpm</code>ç­‰é¡ä¼¼å·¥å…·æ‡‰è©²å°æ­¤é¡åœ°å€ä¸¦ä¸é™Œç”Ÿï¼›</p>
<p>ç¾åœ¨æˆ‘å€‘æ‹†è§£ä¸€å€‹<code>crates.io</code>ä¸Šä¸‹è¼‰æœ€å¤šçš„<code>rand</code>æ¨¡å¡Šçœ‹ä¸€ä¸‹å…¶ä¸­çš„ç›®éŒ„çµæ§‹ï¼Œç­è§£ä¸€ä¸‹ä¸€å€‹ rust crate å¤§è‡´æœ‰ä»€éº¼æ¨£çš„ç›®éŒ„å’Œæ–‡ä»¶çµæ§‹</p>
<pre><code>âœ  rand git:(master) tree -L 1
.
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ COPYRIGHT
â”œâ”€â”€ Cargo.toml       # æ ¸å¿ƒçš„Cargo.tomlæ–‡ä»¶
â”œâ”€â”€ LICENSE-APACHE
â”œâ”€â”€ LICENSE-MIT
â”œâ”€â”€ README.md
â”œâ”€â”€ SECURITY.md
â”œâ”€â”€ benches
â”œâ”€â”€ examples
â”œâ”€â”€ rand_chacha
â”œâ”€â”€ rand_core       # ä¸€å€‹å–®ç¨çš„å­crate
â”œâ”€â”€ rand_distr
â”œâ”€â”€ rand_hc
â”œâ”€â”€ rand_pcg
â”œâ”€â”€ rustfmt.toml
â”œâ”€â”€ src              # `rand`çš„srcç›®éŒ„ 
â””â”€â”€ utils
9 directories, 8 files


## lib.rs æ˜¯æ¯”è¼ƒç‰¹æ®Šçš„ä¸€å€‹æ–‡ä»¶åï¼Œä¸€å€‹crateä¸€èˆ¬åªæœ‰ä¸€å€‹ï¼Œæ˜¯é»˜èªçš„crateçš„å°å‡ºé»å’Œå…¥å£æ–‡ä»¶.
âœ  rand git:(master) tree -L 1 src
src
â”œâ”€â”€ distributions
â”œâ”€â”€ lib.rs
â”œâ”€â”€ prelude.rs
â”œâ”€â”€ rng.rs
â”œâ”€â”€ rngs
â””â”€â”€ seq
3 directories, 3 files
## ä»”ç´°ç ”ç©¶`rand_core`ä½ æœƒç™¼ç¾å®ƒå’Œå¤–éƒ¨çš„`rand`æ˜¯åŒæ§‹çš„
âœ  rand git:(master) tree -L 2 rand_core
rand_core
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ COPYRIGHT
â”œâ”€â”€ Cargo.toml        # `rand_core`çš„`Cargo.toml` crateæè¿°æ–‡ä»¶
â”œâ”€â”€ LICENSE-APACHE
â”œâ”€â”€ LICENSE-MIT
â”œâ”€â”€ README.md
â””â”€â”€ src
    â”œâ”€â”€ block.rs
    â”œâ”€â”€ error.rs
    â”œâ”€â”€ impls.rs
    â”œâ”€â”€ le.rs
    â”œâ”€â”€ lib.rs      # `rand_core`çš„`src/lib.rs`æ–‡ä»¶
    â””â”€â”€ os.rs
1 directory, 12 files
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>rand crate</code>æœ¬èº«æ˜¯ä»¥<code>å¤–éƒ¨ä¾è³´</code>å…¶ä»–<code>crate</code>(æ¯”å¦‚<code>rand_core</code>), æˆ‘å€‘è‡ªå·±å¯«ä»£ç¢¼çš„æ™‚å€™ä¹Ÿå¯ä»¥æŒ‰ç…§é€™ç¨®æ–¹å¼çµ„ç¹”ä»£ç¢¼ï¼Œé›–ç„¶å·¥ç¨‹ä¸Šçœ‹ä»£ç¢¼å±¬æ–¼åŒä¸€å€‹ç›®éŒ„çµæ§‹å’Œå·¥ç¨‹å…§ï¼Œä½†æ˜¯å¯¦éš›ä¸Šå…¶ä¸­çš„ä»£ç¢¼ç·¨è­¯é—œä¿‚æ˜¯æœ‰æ˜ç¢ºçš„åˆ†å‰²é—œä¿‚çš„. å› ç‚º<code>crate</code>æœ¬è³ªä¸Šæ˜¯é¡åº«çš„åŒç­‰åœ°ä½ï¼Œæ‰€ä»¥ä¸€å€‹<code>crate</code>åªå…è¨±ä¸€å€‹<code>lib</code> (lib.rs) ç·¨è­¯å…¥å£æ–‡ä»¶ï¼Œä½†æ˜¯å¯ä»¥å…è¨±æœ‰å¤šå€‹<code>main</code>å‡½æ•¸ï¼ˆä¾è³´æ ¸å¿ƒçš„ lib.rsï¼‰å–®ç¨ç·¨è­¯å¯åŸ·è¡Œæ–‡ä»¶ (<code>binary crate</code>);</p>
<h2 id="è¨»é‡‹å’Œæ–‡æª”"><a class="header" href="#è¨»é‡‹å’Œæ–‡æª”">è¨»é‡‹å’Œæ–‡æª”</a></h2>
<p>ç›¸æ¯”æ–¼ C++ ç­‰å¤è€çš„èªè¨€ç”Ÿæ…‹ï¼Œrust çš„ç”Ÿæ…‹æ”¯æŒè§£æ±ºäº†å¤ªå¤šç—›é»ï¼Œæ¯”å¦‚<code>crates.io</code>çš„å­˜åœ¨ä¿è­‰äº†ä»£ç¢¼çš„ç·¨å¯«ï¼Œç™¼ä½ˆï¼Œæ–‡æª”çš„ä¸€é«”åŒ–ï¼Œä¸€åˆ‡éƒ½æ˜¯ç°¡å–®çš„ cargo å‘½ä»¤å³å¯å®Œæˆï¼›æ—¢ç„¶èªªåˆ°äº†æ–‡æª”ï¼Œå°±è¦çŸ¥é“ cargo é‚„æœ‰<code>cargo doc</code>å‘½ä»¤ï¼Œåªè¦ä½¿ç”¨<code>markdownç·¨å¯«çš„è¨»é‡‹ä¾¿å¯ç›´æ¥ç”Ÿæˆå°æ‡‰çš„htmlæ–‡æª”</code>ï¼Œå…¶é–‹ç™¼å‹å¥½ç¨‹åº¦è®“äººå¤§å‘¼éç™®.</p>
<p>rust çš„è¨»é‡‹å¯«æ³•ç°¡å–®èªªæœ‰å¦‚ä¸‹å¹¾ç¨®:</p>
<p>â€¢<code>// æ™®é€šè¨»é‡‹</code>ï¼Œæ­¤é¡è¨»é‡‹<code>cargo doc</code>æœƒå¿½ç•¥ â€¢<code>/// æ–‡æª”è¨»é‡‹</code> ï¼Œä¸€èˆ¬å‡½æ•¸çµæ§‹æå…ƒç´ çš„è¨»é‡‹å¯«æ³•ï¼Œå…§å®¹å¯ä»¥æ˜¯ markdown èªæ³•ï¼Œå¦‚æœåŒ…å«ä»£ç¢¼æ®µï¼Œä»£ç¢¼æœƒè¢«è‡ªå‹•ç”Ÿæˆæ¸¬è©¦ä»£ç¢¼ â€¢<code>//! é«˜å±¤çš„æ–‡æª”è¨»é‡‹</code>ï¼Œæ­¤é¡è¨»é‡‹ç”Ÿæˆçš„æ˜¯é«˜å±¤æ¨¡å¡Šæè¿°å’Œç°¡ä»‹</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>cargo new --lib myutil
<span class="boring">ä¿®æ”¹src/lib.rsç‚ºå¦‚ä¸‹å…§å®¹
</span>//! # The first line
//! The second line
/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let five = 5;
///
/// assert_eq!(6, add_one(5));
/// # fn add_one(x: i32) -&gt; i32 {
/// #     x + 1
/// # }
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}
<span class="boring">}</span></code></pre></pre>
<p>ä»¥ä¸Šé¢ä»£ç¢¼ç‚ºä¾‹ï¼Œç”Ÿæˆæ–‡æª”çš„éç¨‹å¦‚ä¸‹:</p>
<pre><code>cargo doc --no-deps
cargo doc --open
</code></pre>
<p>å¾—åˆ°çš„è‡ªå‹•åŒ–æ–‡æª”å¦‚ä¸‹:</p>
<p><img src="images/de23b998195be9dd171682a027da.png" alt="img" /></p>
<h1 id="å­¸-rust-è¦æœ‰å¤§å±€è§€--äºŒ--rust-çš„ç²¾é«“"><a class="header" href="#å­¸-rust-è¦æœ‰å¤§å±€è§€--äºŒ--rust-çš„ç²¾é«“">å­¸ Rust è¦æœ‰å¤§å±€è§€ -äºŒ- Rust çš„ç²¾é«“</a></h1>
<p>ä¸Šä¸€ç¯‡ (<a href="https://mp.weixin.qq.com/s?__biz=Mzg4MTYyNDU4Nw==&amp;mid=2247483663&amp;idx=1&amp;sn=a3bbd0c90e01328529ac673b43e35254&amp;scene=21#wechat_redirect">å­¸ Rust è¦æœ‰å¤§å±€è§€</a>) æˆ‘å€‘å¾ rust çš„å®‰è£éƒ¨ç½²ï¼Œåˆ° cargo çš„åŸºæœ¬ä½¿ç”¨ï¼Œçµ¦å¤§å®¶åšäº†ç§‘æ™®ï¼Œç‚ºäº†ä¿è­‰å¯ä»¥é™ä½ Rust çš„å­¸ç¿’é›£åº¦ï¼Œä¸€é–‹å§‹æˆ‘å€‘å¿…é ˆæƒé™¤æ‰é™¤äº†åŸºæœ¬èªæ³•ä¹‹å¤–çš„æ ¸å¿ƒé›£é»ï¼Œé€™ä¸€ç¯‡æˆ‘å€‘é—œæ³¨æ–¼<code>æ‰€æœ‰æ¬Š</code>ï¼ˆ+ ç”Ÿå‘½é€±æœŸ) é€™å€‹ Rust æœ€é›£å­¸çš„éƒ¨åˆ†, ä½†æ˜¯æ¨‘å°å­©ä»Šå¤©ååˆ†é˜ä¹‹å…§çˆ­å–è®“ä½ æœ‰å­¸ç¿’ Rust çš„æˆ°ç•¥æ€ç¶­ï¼ŒçŸ¥é“ rust æ‡‰è©²æ€éº¼å­¸ï½</p>
<h2 id="rust-ç²¾é«“"><a class="header" href="#rust-ç²¾é«“">Rust ç²¾é«“</a></h2>
<p>æˆ‘å˜—è©¦ç”¨å¹¾å€‹ç°¡å–®çš„è©å½™èªªæ˜ Rust çš„è¨­è¨ˆç²¾é«“å’Œåº•å±¤åŸç†ï¼Œæ–¹ä¾¿å°æ¯”å…¶ä»–èªè¨€å’Œ Rust çš„ä¸åŒä¹‹è™•</p>
<p>â€¢Rust è®Šé‡å…·æœ‰<code>é–±å¾Œå³ç„š</code>çš„ç‰¹æ€§, ç›¸æ¯”ä¹‹ä¸‹å…¶ä»–èªè¨€çš„è®Šé‡éƒ½æ˜¯<code>è€ç”¨å“</code>, è€Œ Rust çš„è®Šé‡å±¬æ–¼<code>ä¸€æ¬¡æ€§ç”¨å“</code>â€¢Rust èªè¨€ä¸­<code>è®Šé‡ä½¿ç”¨</code>å’Œ<code>å€¼æ“æœ‰</code>æ˜¯æ˜ç¢ºå€åˆ†çš„ï¼Œè€Œä¸”å…¶ä»–èªè¨€çš„è®Šé‡ç­‰è™ŸåŸºæœ¬éƒ½æ˜¯è³¦å€¼ï¼Œä½†æ˜¯ Rust æ˜¯<code>æ‰€æœ‰æ¬Šè®“æ¸¡</code></p>
<h3 id="ä¸‰ç¨®å¸¸è¦‹çš„å…§å­˜æ¨¡å¼"><a class="header" href="#ä¸‰ç¨®å¸¸è¦‹çš„å…§å­˜æ¨¡å¼">ä¸‰ç¨®å¸¸è¦‹çš„å…§å­˜æ¨¡å¼</a></h3>
<p>å¾ä¸‹é¢ä¸‰è¡Œç°¡å–®çš„è³¦å€¼èªå¥, æˆ‘å€‘ç›´è§€æ„Ÿå—ä¸€ä¸‹ c++ï¼Œpython, é‚„æœ‰ Rust çš„ä¸åŒè™•ç†æ–¹å¼</p>
<pre><code class="language-cpp"># c++ä»£ç¢¼ï¼Œåƒ…åƒ…ç”¨ä¾†èªªæ˜ç°¡å–®é‚è¼¯
auto s = std::vector&lt;std::string&gt;{ "udon", "ramen", "soba" }; 
auto t = s;    // ç¬¬ä¸€æ¬¡ä½¿ç”¨s
auto u = s;    // ç¬¬äºŒæ¬¡ä½¿ç”¨s
</code></pre>
<h4 id="c-will-copy"><a class="header" href="#c-will-copy">c++ will copy</a></h4>
<p><img src="images/3b21efe1f4060755c36e7301edc8.png" alt="img" /></p>
<p>c++-copy</p>
<p>æ£§å…§çš„è®Šé‡ä¸€ç›´å¢é•· (å¾å·¦å¾€å³)ï¼Œè®Šé‡ä¹Ÿä¸€ç›´å¯ä»¥è¢«è¨ªå•ä½¿ç”¨. è€Œä¸”<code>æ£§åˆ°å †çš„æŒ‡å‘é—œä¿‚äº’ç›¸äº¤ç¹”</code>(ç¶²ç‹€); ç”±æ–¼ C++ é»˜èªæ¡ç”¨ copy çš„æ–¹å¼é€²è¡Œ<code>operator=</code>çš„æ“ä½œï¼Œå³ä½¿æ˜¯<code>std::vector</code>è¤‡é›œçš„ STL çµæ§‹ï¼Œéƒ½æ˜¯ç›´æ¥è¤‡è£½, é‘‘æ–¼é€™ç¨®é»˜èªå‹•ä½œé–‹éŠ·æ¯”è¼ƒå¤§ï¼Œä¸€èˆ¬ç¨‹åºå“¡æœƒæ‰‹å·¥å¼•å…¥<code>å¼•ç”¨</code>æˆ–è€…<code>æŒ‡é‡</code>ä¾†å„ªåŒ– (å•é¡Œéš¨ä¹‹è€Œä¾†ï¼Œæ£§åˆ°å †çš„æŒ‡é‡é²æ—©è®Šæˆç¶²)</p>
<h4 id="python-will-count"><a class="header" href="#python-will-count">Python will count</a></h4>
<p><img src="images/f0086ccdce0ba6810f77546911d4.png" alt="img" /></p>
<p>python3-count</p>
<p>å°æ–¼ python è€Œè¨€ï¼Œç”±æ–¼æœ‰ gc çš„å­˜åœ¨ï¼Œgc æ¡ç”¨äº†<code>reference count</code>æŠ€è¡“ï¼Œæ‰€ä»¥é‚è¼¯å±¤æ¬¡ä¸Šå¤šäº†ä¸€å€‹ PyObject çš„ä¸­é–“å±¤ï¼Œä¿å­˜äº†è¨ˆæ•¸ä¿¡æ¯, ç”±æ–¼æ¡ç”¨çš„æ˜¯è¨ˆæ•¸æ©Ÿåˆ¶ï¼Œè€Œ python æ£§ä¸Šçš„è®Šé‡éƒ½æ˜¯å°åŒä¸€å€‹å€¼çš„å¤šå€‹å¼•ç”¨ï¼Œä¿®æ”¹å…¶ä¸­ä¸€å€‹ç¸½æ˜¯æœƒè®“å…¶ä»–è®Šé‡çš„å€¼ä¹Ÿéƒ½ä¸€èµ·è®ŠåŒ–</p>
<h4 id="rust-will-move-and-crush"><a class="header" href="#rust-will-move-and-crush">Rust will move (and crush!!)</a></h4>
<p><img src="images/1cc4ecda0adda9c2ea29d6511593.png" alt="img" /></p>
<p>rust-will-move-and-crush</p>
<p>å°æ–¼ Rust è€Œè¨€ï¼Œè®Šé‡çš„è³¦å€¼æ“ä½œç­‰åŒæ–¼<code>å€¼æ“æœ‰æ¬Šçš„è®“æ¸¡</code>, å®ƒçš„æ„ç¾©å°±æ˜¯<code>auto t = s;</code>é€™ç¨®èªå¥ä¸€æ—¦åŸ·è¡Œï¼Œç›¸ç•¶æ–¼<code>æ£§è®Šé‡tå–ä»£äº†æ£§è®Šé‡s,æ“æœ‰äº†åº•å±¤çš„å€¼</code>, éš¨ä¹‹è€Œä¾†çš„å°±æ˜¯<code>såœ¨ç·¨è­¯éšæ®µå°±è¢«ç·¨è­¯å™¨æ¨™è­˜ç‚ºä¸å†å¯ç”¨</code>; é€™æ˜¯ rust ç·¨è­¯å™¨è™•ç†ä»£ç¢¼çš„é‚è¼¯ï¼Œæ‰€ä»¥<code>auto u = s;</code>é€™æ¨£çš„èªå¥æ ¹æœ¬ä¸æœƒé€šéç·¨è­¯ï¼Œæ›´ç„¡éœ€å†è€ƒæ…®ä»£ç¢¼åŸ·è¡Œ; x é€™ä¸€åˆ‡éƒ½ç™¼ç”Ÿåœ¨ä»£ç¢¼åˆ†æéšæ®µï¼Œç·¨è­¯éç¨‹ä¸­, ä¸ç®¡æ˜¯ç°¡å–®çš„è³¦å€¼ï¼Œé‚„æ˜¯è¢«å‡½æ•¸å½¢åƒï¼Œé‚„æ˜¯ä¸€å€‹å€¼è¢«å¾å‡½æ•¸è¿”å›: éƒ½æ˜¯ç›´æ¥çš„<code>ç®¡ç†æ¬Šè®“æ¸¡</code></p>
<h4 id="æ€è€ƒé¡Œ"><a class="header" href="#æ€è€ƒé¡Œ">æ€è€ƒé¡Œ</a></h4>
<blockquote>
<p>ä¸€å€‹ for å¾ªç’°ï¼Œå…§éƒ¨ä¸€å€‹ print å‡½æ•¸æ‰“å°äº†ä¸Šé¢åˆ—è¡¨ï¼Œé€™æ¨£ä¸€å€‹ç°¡å–®çš„é‚è¼¯ä¸åŒçš„èªè¨€æœƒå‡ºç¾ä»€éº¼æ¨£çš„å…§å­˜çµæœ?</p>
</blockquote>
<p>â€¢c++ OK, s å¯ä»¥å†æ¬¡è¢«è³¦å€¼ä½¿ç”¨ï¼Œæ‰“å°ï¼Œé€²è¡Œå„ç¨®æ“ä½œ â€¢Python OK, s ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ â€¢Rust OK, å¯ä»¥æ­£å¸¸æ‰“å°ï¼Œä½†æ˜¯ for è¨“è©±çµæŸä¹‹å¾Œï¼Œæ‰€æœ‰å­—ç¬¦ä¸²<code>å †ä¸­çš„è³‡æº</code>éƒ½è¢«é‡‹æ”¾äº†, s è®Šæˆäº†ä¸å¯å†ç”¨çš„è®Šé‡</p>
<p>å¥½äº†ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè¦º<code>å¤ªç¥å¥‡äº†ï½ï½</code>, Rust å°è®Šé‡çš„ä½¿ç”¨å°±æ˜¯ç›´æ¥æ‹¿ä¾†ï¼Œå¦‚æœæ²’æœ‰æ–°çš„ä¸Šä¸‹æ–‡æ¥å—è®“æ¸¡, è®Šé‡å°±è¢«ç›´æ¥éŠ·ç‡¬äº†, é€™å€‹ç¥å¥‡çš„è¨­å®šå°±æ˜¯ Rust æœ‰åˆ¥æ–¼å…¶ä»–å„ç¨®èªè¨€ï¼Œä¸¦ä¸”æœƒæœ‰<code>move sematic</code>ï¼Œ<code>borrow</code>, <code>lifetime</code>çš„æœ€åº•å±¤è¨­å®š, é€™å°±æ˜¯ rust çš„éŠæˆ²è¦å‰‡.</p>
<p>ç°¡å–®ç™¼æ•£æ€è€ƒ, é€™å€‹<code>ç¥å¥‡çš„move sematic</code>è¨­å®šæœƒå°è‡´ä»€éº¼æ¨£çš„ç›´è§€ç¾è±¡å‘¢ï¼Œé¡ä¼¼èˆ‡ c++,java,python å„ç¨®èªè¨€å…¶å¯¦éš¨è‘—ç¨‹åºä¸€é»ä¸€é»åŸ·è¡Œï¼Œå¯èƒ½æœƒæœ‰æˆç™¾ä¸Šåƒçš„ object ç”¢ç”Ÿï¼Œå…¶ä¸­çš„è®Šé‡æŒ‡é‡ï¼Œå¼•ç”¨ï¼Œcopy äº’ç›¸äº¤ç¹”åœ¨ä¸€èµ·ï¼Œçœ‹èµ·ä¾†å°±æœƒäº‚ç³Ÿç³Ÿçš„ï¼Œé€™å¸¸è¢«ç¨±ä¹‹ç‚º<code>å°è±¡ä¹‹æµ·</code>ï¼ˆå¦‚ä¸‹åœ–)</p>
<p><img src="images/919a360eb35dfb0aa82d7a3ada97.png" alt="img" /></p>
<p>a sea of objects</p>
<p>ç”±æ–¼ rust ç‰¹ç«‹ç¨è¡Œçš„åº•å±¤éŠæˆ²è¦å‰‡ï¼Œä¸ç®¡ç¨‹åºé‹è¡Œäº†å¤šä¹…ï¼Œé‚è¼¯ä¸Šçœ‹ä¾†ï¼Œä¸ç®¡å°è±¡å…§éƒ¨æœ‰å¤šå°‘å­å…ƒç´ ï¼Œåˆ—è¡¨é‚„æ˜¯å­—å…¸ï¼Œæ°¸é åªæœ‰ä¸€å€‹ rootï¼ˆæ“æœ‰å®ƒ), å†åŠ ä¸Šæˆ‘å€‘å°‡è¦èªªåˆ°çš„<code>ä½¿ç”¨æ¬Š</code>çš„é™åˆ¶ï¼ŒRust çš„å †æ£§è®Šé‡ç¸½æ˜¯éå¸¸ä¹¾æ·¨æ¸…æ¥š (<code>çµ¦ä½ äº†ï¼Œä½ å°±æ˜¯owner</code>), ä½ ä¸æœƒæœ‰é¡ä¼¼ c++ ä¸­<code>ä¸‰æ–¹åº«å‡½æ•¸è¿”å›äº†ä¸€å€‹æŒ‡é‡, æˆ‘æ‡‰è©²free?</code>çš„ç–‘å•.ï¼ˆå¦‚ä¸‹åœ–)</p>
<p><img src="images/d1ca7f01ba514f63c9490fe8f5a2.png" alt="img" /></p>
<p>rust object tree</p>
<p>æœ¬æ–‡ç°¡ç­”èªªæ˜ç­ Rust æœ€æ ¸å¿ƒçš„åº•å±¤è¨­è¨ˆï¼Œé—œæ–¼æ‰€æœ‰æ¬Šçš„ç›¸é—œå…§å®¹ï¼Œæˆ‘å€‘å¯ä»¥è©³ç´°å±•é–‹äº†, æ•¬è«‹æœŸå¾…</p>
<h1 id="å­¸-rust-è¦æœ‰å¤§å±€è§€--ä¸‰--æœ€ç—›å°±é€™éº¼ç—›äº†"><a class="header" href="#å­¸-rust-è¦æœ‰å¤§å±€è§€--ä¸‰--æœ€ç—›å°±é€™éº¼ç—›äº†">å­¸ Rust è¦æœ‰å¤§å±€è§€ -ä¸‰- æœ€ç—›å°±é€™éº¼ç—›äº†</a></h1>
<h1 id="å°èª"><a class="header" href="#å°èª">å°èª</a></h1>
<p>è®€éä¸Šä¸€ç¯‡ (<a href="https://mp.weixin.qq.com/s?__biz=Mzg4MTYyNDU4Nw==&amp;mid=2247483686&amp;idx=1&amp;sn=4e078a7e273d62fdbda099b908036603&amp;scene=21#wechat_redirect">å­¸ Rust è¦æœ‰å¤§å±€è§€ (äºŒ) Rust çš„ç²¾é«“</a>) çš„åŒå­¸ç›´æ¥çµ¦æˆ‘åé¥‹çš„å•é¡Œä¸»è¦æ˜¯: ç‚ºä»€éº¼ Rust è¦æœ‰<code>move sematic</code>é€™å€‹ç¥å¥‡è¨­å®šï¼Œä½ èªªçš„éƒ½æ‡‚ï¼Œä½†æ˜¯å¥½è™•åœ¨å“ªè£¡å‘¢ï¼Ÿ(æ­¡è¿å¤§å®¶æœ‰å•é¡Œç›´æ¥åœ¨å…¬çœ¾è™Ÿ "Rust å·¥ç¨‹å¯¦è¸" ç•™è¨€æå•, è®€è€…çš„åé¥‹çœŸçš„æ˜¯å¯«ä½œçš„åŸå§‹åé¥‹å’Œå‹•åŠ›). æ‰€ä»¥åœ¨é–‹å§‹ä»Šå¤©çš„<code>reference &amp; lifetime</code>ä¸»é¡Œä¹‹å‰ï¼Œæˆ‘å€‘ç°¡å–®å›é¡§ä¸€ä¸‹è½‰ç§»èªç¾©åˆ°åº•çš„å¥½å£ä¹‹è™•æœ‰å“ªäº›:</p>
<h2 id="move-sematic-çš„å¥½å£"><a class="header" href="#move-sematic-çš„å¥½å£">move sematic çš„å¥½å£</a></h2>
<h3 id="å¥½è™•rust-çš„æ‰¿è«¾"><a class="header" href="#å¥½è™•rust-çš„æ‰¿è«¾"><code>å¥½è™•</code>ï¼ˆrust çš„æ‰¿è«¾)</a></h3>
<ol>
<li>æ–¹ä¾¿ç·¨è­¯å™¨ç·¨è­¯éšæ®µè·Ÿè¹¤å…§å­˜å€¼çš„ä½¿ç”¨æƒ…æ³ï¼Œå¯ä»¥è®“ç·¨è­¯å™¨ç„¡æ¯”å¼·å¤§åœ°åˆ†æå †æ£§ç‹€æ…‹.2. ç·¨è­¯éšæ®µæ’é™¤äº†éå¸¸å¤šå…§å­˜ä¸å®‰å…¨çš„å…§å­˜ (ä»£ç¢¼å¯«æ³•), ä¸æœƒå­˜åœ¨æ‡¸ç©ºæŒ‡é‡ (<code>dangling pointer</code>)</li>
</ol>
<h3 id="å£è™•"><a class="header" href="#å£è™•"><code>å£è™•</code></a></h3>
<p>â€¢ å­¸ç¿’æ›²ç·šé™¡å³­çš„é‡è¦åŸå› ä¹‹ä¸€ï¼Œæœƒé€²ä¸€æ­¥å¼•å‡ºå¼•ç”¨ï¼Œç”Ÿå‘½é€±æœŸç­‰æ¦‚å¿µï¼Œå®¹æ˜“è®“åˆå­¸è€…é­é‡æŒ«æ•—æ„Ÿ â€¢ é€£ä¸€å€‹<code>è³¦å€¼</code>éƒ½ TM ç·¨è­¯ä¸é!?â€¢ ç‚ºä»€éº¼ä¸€å€‹ print æ‰“å°ä¹‹å¾Œï¼Œè®Šé‡å°±æ²’äº†!?</p>
<h2 id="rust-ç—›é»æ’è¡Œ"><a class="header" href="#rust-ç—›é»æ’è¡Œ">rust ç—›é»æ’è¡Œ</a></h2>
<p>æ ¹æ“š<code>Rust Survey 2020 Results</code>[1] èª¿æŸ¥çµæœé¡¯ç¤ºï¼Œrust æœ€é›£å­¸çš„éƒ¨åˆ†ä»¥<code>lifetime</code>æ’ç¬¬ä¸€ä½. å…¨å±€è§€å¾ˆé‡è¦ï¼Œä»Šå¤©æˆ‘å€‘å°±é–‹å§‹å¸¶å¤§å®¶çœ‹ä¸€çœ‹æœ€é›£çš„éƒ¨åˆ†åˆ°åº•æœ‰å¤šé›£ï¼Œ<code>æœ€ç—›ä¹Ÿå°±é€™éº¼ç—›äº†.</code> å¯ä»¥çœ‹åˆ°ç”Ÿå­˜é€±æœŸï¼Œæ‰€æœ‰æ¬Šï¼Œé‚„æœ‰ traitï¼Œæ˜¯å¤§å®¶æŒæ¡èµ·ä¾†æ¯”è¼ƒæ£˜æ‰‹ä¸»é¡Œ.</p>
<p><img src="images/03d152a010ed398c27ca4c122b5a.png" alt="img" /></p>
<p>rating-of-topics-difficulties</p>
<h2 id="rust-reference"><a class="header" href="#rust-reference">rust reference</a></h2>
<p>ä¸Šä¸€ç¯‡çš„æœ«å°¾æˆ‘å€‘æåˆ°éä¸€å€‹ç°¡å–®çš„æ€è€ƒï¼ŒåŸºæ–¼<code>move sematic</code>ç·¨å¯«ä»£ç¢¼çš„æ™‚å€™ï¼Œä¸€å€‹ç°¡å–®çš„ for å¾ªç’° print èªå¥å°±æœƒå°è‡´ä¸€å€‹æ•¸çµ„è®Šé‡è¢«ä½¿ç”¨å¾Œé‡‹æ”¾æ‰ï¼Œé€™å…¶ä¸­çš„æ ¸å¿ƒåŸå› å°±æ˜¯ for å¾ªç’°èªå¥ç†è«–ä¸Šæ‡‰è©²æ˜¯<code>ç§Ÿå€Ÿä½¿ç”¨æ¬Š</code>, è€Œä¸æ‡‰è©²å–å¾—<code>æ‰€æœ‰æ¬Š</code>; ç‚ºç­è§£æ±ºé€™å€‹å•é¡Œï¼Œrust æä¾›äº†<code>referenceé¡å‹çš„å¯copyè®Šé‡</code>;</p>
<p>ä½œç‚ºä¸€å€‹ c/c++ ç¨‹åºå“¡çš„ä½ , è«‹æ€è€ƒï¼ŒæŠŠä¸Šé¢ for å¾ªç’°å’Œæ‰“å°èªå¥ä½œç‚ºå‡½æ•¸é«”çš„æƒ…æ³ä¸‹ (åƒ…æœ‰å¤–éƒ¨è®Šé‡çš„è®€å–éœ€æ±‚)ï¼Œå¦‚æœåœ¨å…¶ä»–èªè¨€ä¸­ï¼Œå¦‚æ­¤ç°¡å–®çš„å‡½æ•¸æœ‰å¯èƒ½é€ æˆç¨‹åºå´©æ½°å—ï¼Ÿæˆ–è€…æœƒæœ‰ä»€éº¼é™·é˜±?</p>
<p>ä½ çš„ç­”æ¡ˆå¯èƒ½æ˜¯é€™æ¨£çš„; å‡½æ•¸çš„åƒæ•¸æ‡‰è©²æ˜¯<code>const &amp;</code>, å¸¸é‡å¼•ç”¨ï¼Œé€™æ¨£æˆ‘å³é¿å…äº†å¤–éƒ¨è®Šé‡çš„æ‹·è²ï¼Œç¯€çœäº†å…§å­˜å’Œèª¿ç”¨é–‹éŠ·ï¼ŒåŒæ™‚é€šé const ä¿è­‰äº†ä¸æ”¹è®Šä½¿ç”¨çš„è®Šé‡å…§å®¹.</p>
<p>æˆ‘æƒ³èªªçš„æ˜¯ï¼Œé€™éƒ½æ˜¯æ²’å•é¡Œçš„ï¼Œä½†æ˜¯é€™æ¨£ä¸¦ä¸èƒ½ä¿è­‰ä½ çš„<code>å®Œç¾print</code>å‡½æ•¸ core æ‰ï¼ŒåŸå› æ˜¯ï¼Œä½ é€šé<code>const &amp;</code>å°ç·¨è­¯å™¨æ‰¿è«¾äº†è‡ªå·±ä¸æ”¹è®Šè®Šé‡ï¼Œåƒ…åƒ…æ˜¯ä½¿ç”¨ï¼Œä¹Ÿä¸åš copyï¼Œç„¶è€Œ<code>gcc</code>ç·¨è­¯å™¨ä¸¦ä¸çµ¦ä½ ä»»ä½•æ‰¿è«¾ï¼Œæ‰€ä»¥ï¼š</p>
<ol>
<li>è®Šé‡å…¶ä»–åœ°æ–¹è¢«æ”¹æ‰äº†. ä½ è®€å–åˆ°äº†å¥‡æ€ªçš„å…§å®¹.2. è®Šé‡è¢«éŠ·ç‡¬äº†ï¼Œä½ è®€å–åˆ°äº†ä¸æ‡‰è©²æ“ä½œçš„å…§å­˜ï¼Œç¨‹åºå´©æ‰äº†.</li>
</ol>
<p>ç‚ºä»€éº¼å¯ä»¥é€™æ¨£ï¼Ÿå› ç‚º<code>ç¨‹åºå“¡æ‰¿è«¾æˆ‘ä¸ä¿®æ”¹æˆ‘ä½¿ç”¨çš„å…§å®¹</code>ï¼Œä½† c++ èªè¨€æœ¬èº«ï¼Œç·¨è­¯å™¨ä¸¦<code>ä¸æ‰¿è«¾é€™å€‹è®Šé‡å®ƒè‡ªå·±ä¸æœƒè®Š</code>(é€™ç¨®æ‰¿è«¾ä¸æ˜¯ç›¸äº’çš„);</p>
<p>åœ¨ Rust ä¸­, ç¨‹åºå“¡é€šé<code>borrow</code>å¾—åˆ°ä¸€å€‹<code>reference</code>ä¾†æ‰¿è«¾åƒ…è®€å–ï¼Œæˆ–è€…è‚¯å®šæœƒä¿®æ”¹ä¸€å€‹è®Šé‡</p>
<p><code>borrow</code>çš„æ‰¿è«¾å¯«æ³•æ˜¯åœ¨è®Šé‡å‰å¢åŠ ä¸€å€‹<code>&amp;</code>, æ¯”å¦‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Point {
    x: i32,
    y: i32 
}
let point = Point { x: 1000, y: 729 };
let r: &amp;Point = &amp;point;     // rç¾åœ¨æ˜¯pointçš„`åªè®€ä½¿ç”¨æ¬Š`
let rr: &amp;&amp;Point = &amp;r;        // rrç¾åœ¨æ˜¯`åªè®€ä½¿ç”¨æ¬Š`çš„`åªè®€ä½¿ç”¨æ¬Š`
let rrr: &amp;&amp;&amp;Point = &amp;rr;    // rrç¾åœ¨æ˜¯`åªè®€ä½¿ç”¨æ¬Š`çš„`åªè®€ä½¿ç”¨æ¬Š`çš„`åªè®€ä½¿ç”¨æ¬Š`
<span class="boring">}</span></code></pre></pre>
<p>ä¸Šé¢çš„ä»£ç¢¼çš„å…§å­˜æ¨¡å‹æ˜¯é€™æ¨£çš„:</p>
<p><img src="images/0b9b32941a863ab18fd21b06e16e.png" alt="" /></p>
<p>A-chain-of-references-to-references</p>
<p>so~ å¾ˆæ˜é¡¯ï¼Œå¦‚æœä½¿ç”¨<code>r</code>ä¾†è¨ªå•<code>point</code>çš„è©±ï¼Œä¸¦ä¸æœƒå½±éŸ¿ point çš„æ‰€æœ‰æ¬Šé—œä¿‚ï¼Œå³ä½¿<code>rè¢«é–±å¾Œå³ç„šäº†ä¹Ÿä¸å½±éŸ¿point</code>, å…§å­˜ä¸Šå®ƒå€†ä½¿ç”¨çš„<code>æ£§è³‡æº</code>æ²’é—œä¿‚.</p>
<p>æ–¼æ­¤åŒæ™‚ï¼Œç·¨è­¯å™¨åŒæ™‚è¨±è«¾ä½ åœ¨ä½ ä½¿ç”¨é€™å€‹ reference æœŸé–“, ä»»ä½•å°åŸæœ‰è®Šé‡æ‰€æœ‰æ¬Šçš„è®Šå‹•çš„ä»£ç¢¼ï¼ŒåŠä¿®æ”¹ï¼Œæˆ‘éƒ½æ‹’çµ•ç·¨è­¯! ç·¨è­¯å™¨é€šéå¦‚ä¸‹åœ–æ‰€ç¤ºçš„è¦å‰‡ä¾†åˆ¤æ–·æ˜¯å¦æ‹’çµ•ä»£ç¢¼çš„ç·¨è­¯, è©³ç´°ä¾†èªªï¼Œrustc é€šéå…©æ¢è¦å‰‡ä¾†å…Œç¾å®ƒçš„æ‰¿è«¾ (ä¸‹åœ–çš„ä¸­é–“å’Œæœ€å³å‰‡æƒ…æ³):</p>
<p><img src="images/c9d886c8d843fa706bfaf2e5543d.png" alt="" /></p>
<p>reference-and-ownership</p>
<p>è©³ç´°ä¾†èªªå°±æ˜¯ï¼Œç·¨è­¯å™¨åšä»£ç¢¼éœæ…‹åˆ†æçš„æ™‚å€™ï¼Œåƒ…é€šé<code>é–±è®€æ–‡æœ¬ç¬¦è™Ÿ</code>å°±çŸ¥é“æ˜¯å¦è¦ç·¨è­¯æ­¤ä»£ç¢¼é‚„æ˜¯ç›´æ¥æ‹’çµ•ç¹¼çºŒç·¨è­¯ä»£ç¢¼ï¼Œå› ç‚º<code>borrow</code>èªæ„çš„èªæ³•æ˜¯ç²¾ç¢ºçš„ï¼Œå°±æ˜¯ç¨‹åºå“¡çµ¦å‡ºçš„æ‰¿è«¾. ä»¥ä¸€å€‹ç°¡å–®çš„çµæ§‹é«”ä¾†èªªï¼Œå…§éƒ¨é‚„æœ‰ä¸€å€‹å…¶ä»–çµæ§‹é«”ï¼Œé‚£éº¼å®ƒçš„å…§å­˜æ¨¡å‹å¤§è‡´å°±æ˜¯ä¸Šåœ–æœ€å·¦é‚Šçš„æ¨£å­ (æ£§ä¸Šæ˜¯è®Šé‡æœ¬èº«çš„ç©ºé–“ï¼Œå…§å®¹æ˜¯æŒ‡å‘å †å…§çš„è³‡æºçš„æ¨¹å½¢çµæ§‹). ä¸‹é¢ä»¥ç¨‹åºå“¡è¦æ“ä½œ<code>çµæ§‹é«”å…§éƒ¨çš„çµæ§‹é«”å­å…ƒç´ </code>ç‚ºä¾‹:</p>
<ol>
<li>ç•¶ç¨‹åºå“¡æ‰¿è«¾å°ä¸€å€‹å­æˆå“¡è®Šé‡åƒ…è®€å–çš„æ™‚å€™ (ä¸­åœ–)ï¼Œç·¨è­¯å™¨æ‰¿è«¾çš„å…Œç¾å‹•ä½œå°±æ˜¯ â€¢ å°è±¡æ¨¹ root æ‰€æœ‰æ¬Šè®Šå‹•çš„ä»£ç¢¼ç·¨è­¯ä¸å¯ä»¥é€šé â€¢ ä¿®æ”¹å­æˆå“¡å…§å®¹çš„ä»£ç¢¼ç·¨è­¯ä¸å¯ä»¥é€šé â€¢ å€¼ owner ä¹Ÿæœ€å¤šåšè®€å–ä¸èƒ½å†å¤šäº† <code>2. ç•¶ç¨‹åºå“¡æ‰¿è«¾å°ä¸€å€‹å­æˆå“¡è®Šé‡è¦ä¿®æ”¹çš„æ™‚å€™ (å³åœ–)ï¼Œç·¨è­¯å™¨æ‰¿è«¾çš„å…Œç¾å‹•ä½œå°±æ˜¯ â€¢</code>éæ‰¿è«¾çš„å¼•ç”¨`ä¹‹å¤–çš„æ‰€æœ‰è©¦åœ–æ¥è§¸é€™å€‹å€¼çš„ä»£ç¢¼éƒ½ä¸å¯ä»¥é€šé â€¢ å³ä½¿æ˜¯é€šéå€¼çš„ owner ä¹Ÿä¸è¡Œè®€å–</li>
</ol>
<p>åŸºæ–¼ä»¥ä¸Šå…©æ¢è¦å‰‡ï¼Œè«‹è‡ªå·±ç·¨å¯« rust çš„ç·¨è­¯å™¨ï¼Œçµ¦å‡ºä¸‹é¢ä»£ç¢¼æ˜¯å¦é•åçµ¦ç¨‹åºå“¡çš„æ‰¿è«¾?(æ³¨æ„åŒæ¨£çš„ä»£ç¢¼å¯«æ³•ï¼Œè‹¥æ˜¯ c++ è‚¯å®šæ˜¯å¯ä»¥é€šéç·¨è­¯çš„)</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let mut v = 10;    // væ˜¯ä¸€å€‹å¯ä»¥æ”¹è®Šçš„è®Šé‡
    let r = &amp;v;    // `&amp;v` å°±æ˜¯ç¨‹åºå“¡çš„æ‰¿è«¾: ç”¨r(reference)ä¾†å€Ÿç”¨è®Šé‡vçš„ä½¿ç”¨æ¬Š(è®€å–)
    let rr = &amp;r;    // ç¨‹åºå“¡äºŒæ¬¡æ‰¿è«¾é‚„è¦ç”¨rrä¹Ÿè®€å–v, ä¸¦ä¸”
    v += 10        // è¦æ”¹è®Šväº†ï¼Œç·¨è­¯éé‚„æ˜¯ä¸é? 
    myprint(r);    // æ‰“å°å‡½æ•¸, ä½¿ç”¨rä¾†è¨ªå• 
    myprint(rr);    // æ‰“å°å‡½æ•¸, ä½¿ç”¨rrä¾†è¨ªå•
}</code></pre></pre>
<p>ä½ æ˜¯å¦ç–‘æƒ‘ä¸Šé¢çš„æ–‡å­—è£¡ï¼Œæ¨‘å°å­©åè¦†åœ°å¯«ç¨‹åºå“¡å¾—åˆ°ä¸€å€‹å¼•ç”¨æ˜¯<code>æ‰¿è«¾</code>å°ä¸€å€‹è®Šé‡åšåªè®€æ“ä½œ? æˆ‘å°±æ˜¯è®€å–ä¸€ä¸‹ï¼Œæœ‰ä»€éº¼è¦æ‰¿è«¾çš„?</p>
<p>ç¾åœ¨æˆ‘è¦å‘Šè¨´ä½ ï¼Œrust çš„èªæ³•è¦å‰‡ä¹‹ç²¾ç¢ºï¼Œè®“ä½ å¯«ä»»ä½•ä¸€å¥è©±éƒ½æ˜¯åœ¨çµ¦ç·¨è­¯å™¨è¨´èªªè‡ªå·±çš„æ‰¿è«¾. æ¯”å¦‚ç•¶ä½ å¯«ä¸€å€‹ä»»æ„å‡½æ•¸çš„æ™‚å€™ï¼Œå‡½æ•¸çš„è²æ˜å½¢å¼å°±æ˜¯ä½ çµ¦ç·¨è­¯å™¨çš„æ‰¿è«¾, æ‰¿è«¾å°è®Šé‡æ˜¯å¦‚ä½•ä½¿ç”¨çš„, ç•¶ä½ æ‰¿è«¾åªè®€ï¼Œä½†æ˜¯å‡½æ•¸é«”å…§éƒ¨å‡ºç¾äº†å¯«æ“ä½œï¼Œç·¨è­¯å™¨æœ‰æ¬Šæ ¹æ“šä½ å…ˆå‰çš„æ‰¿è«¾æ‹’çµ•ç·¨è­¯ä½ çš„ä»£ç¢¼.</p>
<p>å†æ€è€ƒå¦å¤–ä¸€ç¨®æƒ…æ³ï¼Œå¤šå€‹è®Šé‡çš„å‡½æ•¸ï¼Œä¸€å€‹åªè®€æ‰¿è«¾ï¼Œä¸€å€‹å¯«å¼•ç”¨çš„æ‰¿è«¾ï¼Œé‚„æœ‰ä¸€å€‹æ˜¯ç›´æ¥ move èªæ„çš„æ‰€æœ‰æ¬Šå–å¾—ï¼›é€™å°±æ˜¯ä½ çµ¦ç·¨è­¯å™¨çš„æ‰¿è«¾ï¼Œè®Šé‡æœƒè¢«å‡½æ•¸å½¢åƒæ‹¿å»å€¼çš„æ‰€æœ‰æ¬Šï¼Œå¦‚æœä½¿ç”¨ä¸ç•¶è¢«éŠ·ç‡¬ï¼Œæ˜¯ç¨‹åºå“¡è‡ªå·±ä¸€é–‹å§‹å°±ä¸æ‡‰è©²åšå‡ºçš„<code>æ­¤å‡½æ•¸å°æ‰€æœ‰æ¬Šè² è²¬</code>çš„æ‰¿è«¾. æ‰€ä»¥ç¨‹åºå“¡ä¸€å®šè¦ç·¨ç¢¼ä¹‹å‰æƒ³å¥½é ‚å±¤æ¶æ§‹ï¼Œå› ç‚ºä¸€æ—¦æœ‰è®Šå‹•ï¼Œå¯èƒ½å¾ˆå¤šå‡½æ•¸éœ€è¦é‡å¯«.</p>
<h2 id="ç”Ÿå‘½é€±æœŸ"><a class="header" href="#ç”Ÿå‘½é€±æœŸ">ç”Ÿå‘½é€±æœŸ</a></h2>
<p>ç‚ºäº†é©æ‡‰<code>move sematic</code>è€Œå¼•å…¥çš„<code>borrow &amp; reference</code>æœƒå¸¶ä¾†çš„æ–°çš„å•é¡Œæ˜¯, è®“æ‰€æœ‰æ¬Šå’Œä½¿ç”¨æ¬Šç™¼ç”Ÿäº†åˆ‡å‰²åˆ†é›¢ä¹‹å¾Œï¼Œå¼•ç”¨å’ŒåŸå§‹å€¼çš„å…§å­˜ç©ºé–“ç¨ç«‹ï¼Œä½†æ˜¯äºŒè€…çš„é‚è¼¯é—œä¿‚è¦æ±‚: åŸå§‹å€¼å¿…é ˆå­˜åœ¨çš„å‰æä¸‹ï¼Œå¼•ç”¨æ‰æœ‰å­˜åœ¨çš„æ„ç¾©. å¦‚æœé‡åˆ°<code>è¿”å›å€¼å¼•ç”¨äº†çš„å‡½æ•¸</code>é€™æ¨£çš„ä»£ç¢¼æ˜¯å¦è¦åœæ­¢ç·¨è­¯? å¾ˆæ˜é¡¯å‡½æ•¸è¿”å›äº†<code>ä½¿ç”¨æ¬Š</code>, å¦‚æœæ­¤æ™‚ä¸ç™¼ç”Ÿ<code>move</code>éœ€è¦æœ‰å…¶ä»–ç¶­åº¦å¹«å¿™åˆ¤æ–·ä»£ç¢¼çš„é‚è¼¯åˆç†æ€§. ç­”æ¡ˆå°±æ˜¯éœ€è¦è€ƒæ…®<code>lifetime</code>ç”Ÿå‘½é€±æœŸ.</p>
<p>å¾æœ€åŸå§‹çš„ç–‘å•é–‹å§‹: ä½ ç·¨å¯«äº†ä¸€å€‹å‡½æ•¸ï¼Œä¸¦ä¸”è¿”å›äº†ä¸€å€‹<code>reference</code>, å‡å¦‚è¢«å¼•ç”¨çš„å€¼æ˜¯å‡½æ•¸å…§éƒ¨ local è®Šé‡ï¼Œé‚£éº¼åŸºæ–¼å®‰å…¨è€ƒæ…®æˆ‘å€‘è¦æ‹’çµ•å®ƒï¼Œå¦‚æœå¼•ç”¨çš„å‚³å…¥åƒæ•¸çš„æŸå€‹å­å…ƒç´ ï¼Œé‚£éº¼æˆ‘å€‘è¦çŸ¥é“å‚³å…¥åƒæ•¸çš„å­˜æ´»æ™‚é–“èƒ½å¦æ”¯æ’é€™å€‹å¼•ç”¨æ˜¯æœ‰æ•ˆçš„. æ‰€ä»¥ç·¨è­¯å™¨ä¸€å®šè·Ÿè¹¤å¼•ç”¨å’Œå°æ‡‰è®Šé‡æ˜¯å¦å­˜åœ¨è¡çªçš„è®€å¯«æƒ…æ³ï¼Œé‚„è¦è·Ÿè¹¤æ¯å€‹è®Šé‡çš„æœ‰æ•ˆç¯„åœï¼Œç™¼ç¾ç¨‹åºå“¡è®€å¯«é•åæ‰¿è«¾, æˆ–è€…å¼•ç”¨çš„ç”Ÿå‘½é€±æœŸä¸æ˜¯è¢«å¼•ç”¨å€¼ç”Ÿå‘½é€±æœŸçš„å­é›†çš„æ™‚å€™ï¼Œ<code>åˆæƒ…åˆç†</code>åœ°æ‹’çµ•ç·¨è­¯.</p>
<p><img src="images/15e5dbfd399bfb2b891c616c61bb.png" alt="img" /></p>
<p>reference-with-a-lifetime</p>
<p>èªªäº†é€™éº¼å¤šï¼Œå…¶å¯¦åªæœ‰åœ–ä¸­è¡¨ç¤ºçš„ä¸€å€‹æ ¸å¿ƒåŸç†ï¼Œé‚£å°±æ˜¯ rust ç·¨è­¯ä»£ç¢¼è¦æª¢æŸ¥æ˜¯å¦å­˜åœ¨åƒé€™æ¨£çš„åˆç†çš„åµŒå¥— (cover) é—œä¿‚.</p>
<p>å¦‚æœäº‹æƒ…åˆ°æ­¤ç‚ºæ­¢çš„è©±ä¸€åˆ‡å®Œç¾ï¼Œä¸éæœ‰å¾ˆå¤šä¸­æƒ…æ³ä½œç”¨åŸŸçš„åµŒå¥—æ¯”ä¸Šé¢çš„ä¾‹å­è¦æ›´åŠ éš±æ™¦, æ¯”å¦‚ä¸€å€‹çµæ§‹é«”çš„æˆå“¡<code>borrow</code>çš„å¤–éƒ¨è³‡æº, æ¯”å¦‚ä¸€å€‹å‡½æ•¸èª¿ç”¨å…¶å¯¦å°±æ˜¯è®Šé‡é€²å…¥æ–°çš„ä½œç”¨åŸŸ, é€™ç¨®æƒ…æ³å¯èƒ½é‚„æœƒç”¢ç”Ÿçµ„åˆ: ä½ å¾—åˆ°ä¸€å€‹å…§éƒ¨åŒ…å«äº†<code>reference</code>çš„çµæ§‹é«”ä½œç‚ºå‡½æ•¸åƒæ•¸ï¼Œ é€™æ™‚å€™è³‡æºè·Ÿè¹¤æƒ…æ³å°±å¾ˆè¤‡é›œäº†ã€‚æ­¤æ™‚ï¼Œrust ç·¨è­¯å™¨è¦æ±‚ä½ çµ¦å‡º<code>æ˜ç¢ºçš„é—œæ–¼è³‡æºå­˜æ´»æ™‚é–“çš„æ‰¿è«¾</code>. é€™ç¨®æ‰¿è«¾çš„è¡¨ç¾æ–¹å¼å°±æ˜¯è®“å¾ˆå¤šåŒå­¸çœ‹ä¸æ‡‚çš„<code>ç”Ÿå‘½é€±æœŸèªæ³•</code>. æˆ‘å€‘ä¸é—œå¿ƒèªæ³•ï¼Œåƒ…åƒ…æ˜¯å›åˆ°åŸå§‹å•é¡Œä¸Šä¾†ï¼Œä¸ç®¡ä»€éº¼æ¨£çš„èªæ³•ï¼Œæˆ‘å€‘æ‡‰è©²é€šéé€™å€‹èªæ³•çµ¦ç·¨è­¯å™¨å‚³éä»€éº¼ä¿¡æ¯å‘¢? ç¨‹åºå“¡åšçš„ä»»ä½•æ‰¿è«¾ï¼Œrust ç·¨è­¯å™¨éƒ½æœƒä»”ç´°æª¢æŸ¥ï¼Œé‡å°é€™ç¨®æƒ…æ³ï¼Œç¨‹åºè¦è¦åšå‡ºçš„æ‰¿è«¾ç„¡éå°±æ˜¯é¡ä¼¼<code>æˆ‘çµ•å°ä¸æœƒèƒ¡äº‚å¼•ç”¨</code>é€™æ¨£çš„ä¿¡æ¯ï¼Œæ¯”å¦‚<code>æˆ‘ä¸æœƒå¼•ç”¨æ¯”çµæ§‹é«”æœ¬èº«å­˜æ´»æ™‚é–“é‚„çŸ­çš„è®Šé‡</code>.</p>
<h3 id="å®£ç¨±ä½¿ç”¨ç¯„åœ"><a class="header" href="#å®£ç¨±ä½¿ç”¨ç¯„åœ">å®£ç¨±ä½¿ç”¨ç¯„åœ</a></h3>
<p>ç”Ÿå‘½é€±æœŸä¸æ˜¯ä½œç”¨åŸŸ, æ˜¯è®Šé‡è¢«ä½¿ç”¨çš„é‚£æ®µæ™‚é–“, ä¸€å€‹çµæ§‹é«”æœ‰å…©å€‹å¼•ç”¨é¡å‹çš„æˆå“¡, å…¶ä¸­ä¸€å€‹å¼•ç”¨å¤±æ•ˆæ™‚ï¼Œåªè¦å¯ä»¥ä¿è­‰å®ƒä¹Ÿæ°¸é ä¸å†è¢«ç”¨åˆ°ï¼Œé‚£ä¹Ÿæ˜¯ OK çš„. æ‰€ä»¥æˆ‘å»ºè­°å¤§å®¶å°‡ç”Ÿå‘½é€±æœŸç†è§£æˆç‚ºç¨‹åºå“¡å®£ç¨±çš„<code>å¼•ç”¨çš„åˆç†ä½¿ç”¨ç¯„åœ</code>;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct S {
    r32: &amp;i32;
    r64: &amp;i64;
}
let s;
<span class="boring">}</span></code></pre></pre>
<h4 id="çµ¦sr32æ‰¿è«¾ç¯„åœ1"><a class="header" href="#çµ¦sr32æ‰¿è«¾ç¯„åœ1"><code>çµ¦s.r32æ‰¿è«¾ç¯„åœ1</code></a></h4>
<p>1.<code>s.r32</code>å­˜æ´»æ™‚é–“ (reference) ä¸€å®šè¦å°æ–¼ç­‰æ–¼è¢«å¼•ç”¨å€¼çš„å­˜æ´»æ™‚é–“(æ‰€æœ‰äººéƒ½æ˜¯å¿…æ­»çš„)2.<code>s.r32</code>å­˜æ´»æ™‚é–“å’Œ<code>s</code>ä¸€æ¨£ (è˜‡æ ¼æ‹‰åº•æ˜¯äºº)3. æ‰€ä»¥<code>s</code>çš„å­˜æ´»æ™‚é–“å¿…é ˆå°æ–¼ç­‰æ–¼<code>s.r32</code>å¼•ç”¨çš„å€¼çš„å­˜æ´»æ™‚é–“ (è˜‡æ ¼æ‹‰åº•æ˜¯å¿…æ­»çš„)</p>
<h4 id="çµ¦sr64æ‰¿è«¾ç¯„åœ2"><a class="header" href="#çµ¦sr64æ‰¿è«¾ç¯„åœ2"><code>çµ¦s.r64æ‰¿è«¾ç¯„åœ2</code></a></h4>
<p>1.<code>s.r64</code>å­˜æ´»æ™‚é–“ (reference) ä¸€å®šè¦å°æ–¼ç­‰æ–¼è¢«å¼•ç”¨å€¼çš„å­˜æ´»æ™‚é–“(æ‰€æœ‰äººéƒ½æ˜¯å¿…æ­»çš„)2.<code>s.r64</code>å­˜æ´»æ™‚é–“å’Œ<code>s</code>ä¸€æ¨£ (è˜‡æ ¼æ‹‰åº•æ˜¯äºº)3. æ‰€ä»¥<code>s</code>çš„å­˜æ´»æ™‚é–“å¿…é ˆå°æ–¼ç­‰æ–¼<code>s.r64</code>å¼•ç”¨çš„å€¼çš„å­˜æ´»æ™‚é–“ (è˜‡æ ¼æ‹‰åº•æ˜¯å¿…æ­»çš„)</p>
<p>ä¸‰æ®µè«–è£¡<code>è˜‡æ ¼æ‹‰åº•æ˜¯äºº</code>é€™å€‹ç‰¹æ®Šé™³è¿°æ‡‰è©²æ˜¯å•é¡Œçš„æ ¸å¿ƒï¼Œå› ç‚ºç•¶æœ‰å¤šå€‹æˆå“¡è®Šé‡çš„æ™‚å€™ï¼Œè¢«å¼•ç”¨çš„å…·é«”å€¼çš„ç”Ÿå‘½é€±æœŸå¯èƒ½ä¸€æ¨£, r32 å’Œ r64 åŸå§‹å€¼ä½œç”¨åŸŸæœƒä¸åŒï¼Œä½†æ˜¯ç„¡è«–å¦‚ä½•<code>s</code>éƒ½æ˜¯å…©è€…ä¹‹ä¸­<code>æ›´å°çš„é‚£ä¸€å€‹</code>.</p>
<p>ç·¨è­¯å™¨è™•ç†ä¸Šé¢çš„ä»£ç¢¼çš„æ™‚å€™éœ€è¦ç¨‹åºå“¡æ‰¿è«¾: åˆ°åº•<code>s.r32</code>å’Œ<code>s.64</code>çš„ç¯„åœä¸€æ¨£é‚„æ˜¯ä¸ä¸€æ¨£ï¼Œä½ è‹¥æ˜¯å®£ç¨±ä¸€æ¨£ï¼Œé‚£éº¼æˆ‘æª¢æŸ¥<code>s</code>çš„å­˜åœ¨å¤šä¹…å°±å¯ä»¥äº†ï¼Œä½ è‹¥æ˜¯å®£ç¨±ä¸ä¸€æ¨£, é‚£éº¼æˆ‘å°±å¾—æŒ‰ç…§ç›¸å°å°çš„é‚£å€‹ä¾†åˆ¤æ–·<code>s</code>çš„ä½¿ç”¨ç¯„åœæ˜¯å¦åˆç†.</p>
<p>OK, æ˜¯æ™‚å€™çœ‹ä¸€ä¸‹å¯¦éš›ä»£ç¢¼äº†~</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct A&lt;'a&gt; {
    r32: &amp;'a i32;
    r64: &amp;'a i64;
}
struct S&lt;'a, 'b&gt; {
    r32: &amp;'a i32;
    r64: &amp;'b i64;
}
<span class="boring">}</span></code></pre></pre>
<p>é€™å°±æ˜¯æ·»åŠ äº†<code>lifetime</code>è²æ˜çš„çµæ§‹é«”ï¼Œå…¶ä¸­<code>A</code>å®£ç¨±<code>A.r32</code>å’Œ<code>A.r64</code>çš„<code>é æœŸä½¿ç”¨ç¯„åœä¸€æ¨£</code>, æ­¤æ™‚ rustc ç·¨è­¯å™¨æŒ‰ç…§ A çš„å¯¦ä¾‹å­˜æ´»æ™‚é–“åˆ¤æ–·å°±å¯ä»¥äº†è·Ÿè¹¤å¯¦éš›å¼•ç”¨çš„å€¼æ˜¯å¦æ»¿è¶³è¦æ±‚, ä½†æ˜¯<code>S</code>ç¾åœ¨å®£ç¨±<code>S.r32</code>å’Œ<code>S.r64</code>æ˜¯å…©å€‹ä¸åŒçš„ä½¿ç”¨ç¯„åœï¼Œæ­¤æ™‚ rustc å°‡åˆ†åˆ¥è·Ÿè¹¤è¢«å¼•ç”¨çš„å…©å€‹å€¼çš„å­˜æ´»æ™‚é–“æ˜¯å¦éƒ½æ¯”<code>S</code>è¦å¤§.</p>
<p>é‡æ–°å›åˆ°<code>è¿”å›å¼•ç”¨çš„å‡½æ•¸</code>é€™å€‹åŸå§‹å•é¡Œä¸Š, æ€éº¼å¯«æ‰åˆé©?</p>
<pre><code>// ç¨‹åºå“¡å®£ç¨±å‡½æ•¸ä½¿ç”¨çš„æ™‚å€™, è¿”å›å€¼ä½¿ç”¨ç¯„åœå’Œå…¥åƒè‚¯å®šä¸€æ¨£(æˆ–æ›´å°), rustæœƒæª¢æŸ¥ç¢ºèªæ˜¯å¦çœŸçš„é€™æ¨£
fn smallest&lt;'a&gt;(v1: &amp;'a [i32], v2:&amp;'a [i32]) -&gt; &amp;'a i32 { ... }
</code></pre>
<p>åˆ°é€™è£¡ä½ æ‡‰è©²æ˜ç™½äº†ï¼Œ<code>lifetime</code>çœŸçš„æ˜¯ä¸€å€‹ç·¨è­¯æœŸæ¦‚å¿µï¼Œæ˜¯ç¨‹åºå“¡åšå‡ºçš„æ‰¿è«¾ï¼Œrustc æœƒæ ¹æ“šä½ çš„æ‰¿è«¾æª¢æŸ¥ä»£ç¢¼æ˜¯å¦æ˜¯ä½ å®£ç¨±çš„é‚£æ¨£ï¼Œè¢«å¼•ç”¨çš„å€¼æ˜¯ä¸æ˜¯ä¸€ç›´æ¯”å¼•ç”¨æ™‚é–“æ›´ä¹….</p>
<p>åˆ°æ­¤ç‚ºæ­¢ï¼Œæˆ‘å€‘æ‡‰è©²å¯ä»¥æ›´æ¸…æ¥šåœ°ç†è§£ä¸€ä¸‹<code>move sematic</code>åˆ°<code>borrow &amp; reference</code>å†åˆ°<code>liftime</code>çš„æ•´å€‹é‚è¼¯éˆæ¢ã€‚ä»–å€‘åˆ°åº•éƒ½åœ¨è§£æ±ºä»€éº¼å•é¡Œ, é€™æ­£å­¸ç¿’çš„æ™‚å€™éœ€è¦å¤§é‡çš„ä¾‹å­åŠ æ·±ç´°ç¯€æŠŠæ¡. æˆ‘å€‘åƒ…é—œå¿ƒæ¦‚å¿µå’Œæ¦‚å¿µæå‡ºçš„å ´æ™¯ï¼Œè§£æ±ºçš„å•é¡Œ.</p>
<p>ä»¥ä¸Šæ˜¯æˆ‘è‡ªå·±å°é€™äº›æ¦‚å¿µçš„ç†è§£å’Œæ€è€ƒï¼Œé›£å…æœƒæœ‰é‡å¤§éŒ¯èª¤ï¼Œä½†æ˜¯æ‡‰è©²èƒ½å¹«åˆ°å¤§å®¶. ä¸‹ä¸€ç¯‡å’±å€‘çœ‹<code>trait</code>æ˜¯å€‹ä»€éº¼æ±è¥¿, å†æœƒï½ï½</p>
<h4 id="å¼•ç”¨éˆæ¥"><a class="header" href="#å¼•ç”¨éˆæ¥">å¼•ç”¨éˆæ¥</a></h4>
<p><code>[1]</code> <code>Rust Survey 2020 Results</code>: <em>https://blog.rust-lang.org/2020/12/16/rust-survey-2020.html</em></p>
<h1 id="å­¸-rust-è¦æœ‰å¤§å±€è§€--å››--rust-trait-çš„æ¦‚å¿µèªçŸ¥"><a class="header" href="#å­¸-rust-è¦æœ‰å¤§å±€è§€--å››--rust-trait-çš„æ¦‚å¿µèªçŸ¥">å­¸ Rust è¦æœ‰å¤§å±€è§€ -å››- rust trait çš„æ¦‚å¿µèªçŸ¥</a></h1>
<h1 id="å°èª-1"><a class="header" href="#å°èª-1">å°èª</a></h1>
<p>é€šéå‰ä¸‰ç¯‡ (<a href="https://mp.weixin.qq.com/s?__biz=Mzg4MTYyNDU4Nw==&amp;mid=2247483686&amp;idx=1&amp;sn=4e078a7e273d62fdbda099b908036603&amp;scene=21#wechat_redirect">å­¸ Rust è¦æœ‰å¤§å±€è§€ (ä¸‰)</a>) æˆ‘å€‘åˆ†åˆ¥çœ‹äº†<code>move sematic</code>, <code>borrow &amp; reference</code>ä»¥åŠ<code>liftime</code>ä¸‰å€‹æ ¸å¿ƒæ¦‚å¿µ; ä¹‹å‰å…¶å¯¦ä¸¦æ²’æœ‰æ·±å…¥åˆ°ä»»ä½• rust çš„èªæ³•ç´°ç¯€ä¸Šï¼Œæˆ–è€…èªªç›¡é‡è¦é¿èªæ³•çš„è¬›è§£ï¼Œä¾†åˆ°ç¬¬å››ç¯‡, æ¨‘å°å­©ä»ç„¶å¸Œæœ›ä¸»è¦è¬›è§£æ ¸å¿ƒæ¦‚å¿µç‚ºä¸»ï¼Œä»£ç¢¼å„˜é‡ç”¨å½ç¢¼, é¿å…å¤§å®¶é€²å…¥èªæ³•çš„ç´°ææœ«ç¯€. ä»Šå¤©æˆ‘å€‘é—œæ³¨<code>traits</code></p>
<h2 id="traits-æ˜¯ä»€éº¼"><a class="header" href="#traits-æ˜¯ä»€éº¼">traits æ˜¯ä»€éº¼</a></h2>
<p>å¦‚æœä½ æ²’æœ‰å…¶ä»–èªè¨€ä¸­ traits çš„èªçŸ¥ï¼Œé‚£éº¼ä½ å°‡ç„¡æ³•ç¬é–“æ˜ç™½<code>ç‰¹æ€§</code>é€™å€‹ä¸­æ–‡ç¿»è­¯èƒŒå¾Œçš„å¯¦éš›æ„ç¾©ï¼Œé€šå¸¸å¤§å®¶æœƒèªª traits æ˜¯ interfaceï¼Œè€Œå¯¦éš›ä¸Š interface å’Œ traits çš„é—œä¿‚æ›´åƒæ˜¯ â€œéŒ˜å­å¿…é ˆå¯ä»¥ç ¸é‡˜å­â€ å’Œâ€œçµ¦éŒ˜å­æ·»åŠ ç ¸æ ¸æ¡ƒåŠŸèƒ½â€ï¼Œç†è§£é€™å…©äºŒè€…çš„å€åˆ¥ä¹‹è™•åœ¨æ–¼ï¼Œæ˜¯å¦å…è¨± â€œéŒ˜å­â€ è£½é€ çš„æ™‚å€™å°±çŸ¥é“å®ƒå°‡ä¾†å¯ä»¥è¢«ç”¨ä¾†ç ¸æ ¸æ¡ƒï¼Œé€™å€‹æ™‚é–“å·®å°±æ˜¯ç†è§£ traits å’Œ interface å¾®å¦™å·®ç•°çš„ç²¾é«“æ‰€åœ¨ï¼ŒéŒ˜å­è£½é€ å•†å’ŒéŒ˜å­ä½¿ç”¨è€…é€šå¸¸ä¸æ˜¯åŒä¸€å€‹äººï¼›æ›è¨€ä¹‹ï¼štraits å¯ä»¥ä½œç”¨åœ¨ä¸€å€‹é å®šç¾©çš„é¡å‹ä¸Šï¼Œçµ¦å®ƒæ·»åŠ æŸäº›<code>ç‰¹æ€§</code>, ä¸¦ä¸”ç„¡éœ€ä¿®æ”¹è©²é¡å‹æœ¬èº«çš„æ‰€æœ‰è²æ˜å’ŒåŸå§‹å®šç¾©çš„ä»£ç¢¼ï¼Œé€™æ¨£ä¸æ¥è§¸åŸå§‹é¡å‹å®šç¾©å’Œè²æ˜ä»£ç¢¼å°±å¯ä»¥çµ¦ä¸€å€‹é¡å‹æ·»åŠ åŠŸèƒ½ (function) çš„ç‰¹æ€§ (traits) ä½¿å¾—ä½ ç„¡é ˆå°‡ â€œéŒ˜å­â€ é‡æ–°å°è£æˆç‚º â€œç ¸æ ¸æ¡ƒå·¥å…·â€ é€™æ¨£çš„æ–°é¡å‹ï¼Œæ²’æœ‰äº†é€™å±¤å°è£ï¼Œä»£ç¢¼ä¸Šå¯«æ³•å°‡éˆæ´»è¨±å¤šï¼Œç¬¬ä¸€æ¬¡é«”æœƒåˆ°é€™ä¸€é»çš„ç¨‹åºå“¡è‚¯å®šæœƒæ„Ÿè¦ºéå¸¸éœ‡æ’¼ï¼Œ</p>
<p>æœ¬ç¯‡çš„æ•´é«”ç²¾é«“å¤§å±€è§€ï¼Œå…¶å¯¦å°±æ˜¯ä¸Šé¢ä¸€æ®µè©±è€Œå·²ï¼Œä¸‹é¢æ‰€æœ‰å…§å®¹éƒ½æ˜¯ç´°ç¯€ï¼Œä¸‹é¢è®“æˆ‘å€‘ä¸€èµ·çœ‹ä¸€ä¸‹ traits çš„å¯¦éš›å¯¦ç¾ç´°ç¯€.</p>
<h2 id="traits-çš„å…§å­˜è¡¨ç¤º"><a class="header" href="#traits-çš„å…§å­˜è¡¨ç¤º">traits çš„å…§å­˜è¡¨ç¤º</a></h2>
<p>é€šéå¦‚ä¸‹ä»£ç¢¼æˆ‘å€‘å¯ä»¥å¾—åˆ°ä¸€å€‹<strong>ç‰¹å‹ç›®æ¨™</strong>ï¼Œå®ƒåœ¨å…§å­˜ä¸­å¯¦éš›ä¸Šå°±æ˜¯ä¸€å€‹èƒ–æŒ‡é‡.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::io::Write;

let mut buf: Vec&lt;u8&gt; = vec![];
let writer: &amp;mut Write = &amp;mut buf;
<span class="boring">}</span></code></pre></pre>
<p><img src="images/e9fca92c1519f728a717e461ec4a.png" alt="img" /></p>
<p>vtable</p>
<p>çœ‹æ˜ç™½ä¸Šé¢åœ–çš„å…§å­˜è¡¨ç¤ºçš„è©±ï¼Œå¦‚æœä½ æ˜¯ C++ ç¨‹åºå“¡æ‡‰è©²å°±å¯ä»¥èªªåŸºæœ¬ä¸Šæ¥è¿‘æŒæ¡äº† traits çš„ç²¾é«“äº†ã€‚ç›¸æ¯”æ–¼ c++ å°‡ vptr å’Œå°è±¡æˆå“¡ä¿å­˜åœ¨ä¸€èµ·ï¼Œrust ä¸­é¡å‹æ•¸æ“šå°±æ˜¯æ•¸æ“šæœ¬èº«ï¼Œå–®ç¨å¯¦ç¾çš„ traits æ–¹æ³•å‰‡æ˜¯å–®ç¨èšåˆç‚ºä¸€å€‹èƒ–æŒ‡é‡é€™å…¶ä¸­çš„å¥½è™•éå¸¸å¾®å¦™ï¼›æ˜ç™½äº†é€™å€‹æ©Ÿåˆ¶ä½ ä¹Ÿå°±å¯ä»¥çŸ¥é“ç‚ºä»€éº¼å°æ–¼æ¨™æº–é¡å‹ int å’Œ string ä½ é‚„å¯ä»¥çµ¦å®ƒå€‘æ“´å±•è‡ªå·±çš„æ–¹æ³•; è€Œé€™æ˜¯ c++ åšä¸åˆ°çš„ã€‚</p>
<p>åŒæ™‚ï¼Œä¸Šé¢çš„å…§å­˜æ¨¡å‹æ˜¯ç·¨è­¯æœŸç¢ºå®šçš„ï¼Œé€™ä¹Ÿæ˜¯ traits ç‚ºä»€éº¼æ˜¯ä¸€ç¨®<code>static dispatch</code>;</p>
<h2 id="èªè¨€å…§ç½®-traits"><a class="header" href="#èªè¨€å…§ç½®-traits">èªè¨€å…§ç½® traits</a></h2>
<p>rust èªè¨€é»˜èªæä¾›äº† traits çš„å¸¸è¦‹å¯¦ç¾ï¼Œç·¨è­¯å™¨å¯ä»¥è‡ªå‹•è™•ç†å·²æœ‰é¡å‹æ“´å±•é€™äº› traitsï¼›å®ƒå€‘åˆ†åˆ¥æ˜¯ï¼š</p>
<p>â€¢Eq, PartialEq, Ord, PartialOrdâ€¢Clone, ç”¨ä¾†å¾ &amp;T å‰µå»ºå‰¯æœ¬ Tã€‚â€¢Copyï¼Œä½¿é¡å‹å…·æœ‰ â€œè¤‡è£½èªç¾©â€ï¼ˆcopy semanticsï¼‰è€Œé â€œç§»å‹•èªç¾©â€ï¼ˆmove semanticsï¼‰ã€‚â€¢Hashï¼Œå¾ &amp;T è¨ˆç®—å“ˆå¸Œå€¼ï¼ˆhashï¼‰ã€‚â€¢Default, å‰µå»ºæ•¸æ“šé¡å‹çš„ä¸€å€‹ç©ºå¯¦ä¾‹ã€‚â€¢Debugï¼Œä½¿ç”¨ {:?} formatter ä¾†æ ¼å¼åŒ–ä¸€å€‹å€¼ã€‚</p>
<h4 id="å…§ç½®-traits-ç”¨èµ·ä¾†å°±åƒç‰¹å®šçš„è¨»è§£"><a class="header" href="#å…§ç½®-traits-ç”¨èµ·ä¾†å°±åƒç‰¹å®šçš„è¨»è§£">å…§ç½® traits ç”¨èµ·ä¾†å°±åƒç‰¹å®šçš„è¨»è§£</a></h4>
<p>é–±è®€ä»£ç¢¼å§ï¼Œä¸¦ä¸”é«”æœƒå®ƒèˆ‡ java è¨»è§£çš„ä½¿ç”¨é«”é©—ï¼Œæˆ–è¨±ä½ æœƒé¦¬ä¸Šç†è§£å…¶ç²¾é«“ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>//  CppStructè®Šé‡ç¶å®šã€å‡½æ•¸åƒæ•¸å‚³éã€å‡½æ•¸è¿”å›å€¼å‚³éæ™‚å°‡è¢«è¤‡åˆ¶, è€Œä¸æ˜¯borrow

// 1. ç·¨è­¯å™¨æ”¯æŒçš„Copy traits
 #[derive(Copy, Debug)]
 pub struct CppStruct {
     pub x: i32,
     pub y: i32,
 }

impl Clone for CppStruct {
    fn clone(&amp;self) -&gt; Self {
        Self {
            x: self.x + 1,
            y: self.y + 1,
        }
    }
}

// 2. ç”¨æ³•åŠç”Ÿæ•ˆæƒ…æ³, æ³¨æ„x1å’Œx2çš„å€åˆ¥
let x0 = CppStruct { x: 0, y: 1 };
let x1 = x0;
let x2 = x0.clone();
println!("x1.value={:?}, x1.address={:p}", x1, &amp;x1);
println!("x2.value={:?}, x2.address={:p}", x2, &amp;x2);
println!("reuse variable x0={:?}, x0.address={:p}", x0, &amp;x0);

// è¼¸å‡ºçµæœ
x1.value=CppStruct { x: 0, y: 1 }, x1.address=0x16d24f0e8
x2.value=CppStruct { x: 1, y: 2 }, x2.address=0x16d24f0f0
reuse variable x0=CppStruct { x: 0, y: 1 }, x0.address=0x16d24f0e0
<span class="boring">}</span></code></pre></pre>
<h2 id="ç·¨ç¢¼è‡ªå·±çš„-traits"><a class="header" href="#ç·¨ç¢¼è‡ªå·±çš„-traits">ç·¨ç¢¼è‡ªå·±çš„ traits</a></h2>
<h4 id="è‡ªå®šç¾©-traits-æ™‚å®ƒæ›´åƒæ˜¯ä¸€ç¨®æ¥å£è²æ˜"><a class="header" href="#è‡ªå®šç¾©-traits-æ™‚å®ƒæ›´åƒæ˜¯ä¸€ç¨®æ¥å£è²æ˜">è‡ªå®šç¾© traits æ™‚ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ç¨®æ¥å£è²æ˜</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// STEP1:   æŠ½è±¡ä¸€å€‹æ©Ÿå™¨å­¸ç¿’Optimizeræ‡‰è©²å…·æœ‰çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®šç¾©ç‚ºä¸€å€‹trait
pub trait Optimizer&lt;'a&gt; {
    // æœ‰é»˜èªå¯¦ç¾çš„å‡½æ•¸build_params
    fn build_params&lt;U, T: From&lt;U&gt;&gt;(params: Vec&lt;U&gt;) -&gt; Vec&lt;T&gt; {
        let mut vec = Vec::with_capacity(params.len());
        for param in params {
            vec.push(T::from(param));
        }
        vec
    }
    // ç„¡é»˜èªå¯¦ç¾çš„å‡½æ•¸ï¼Œget_lr
    fn get_lr(&amp;self) -&gt; f32;

    // ç„¡é»˜èªå¯¦ç¾çš„å‡½æ•¸ï¼Œset_lr
    fn set_lr(&amp;self, lr: f32);
}

/// STEP2: å¯¦ç¾ä¸€å€‹SGDå„ªåŒ–é‚è¼¯ï¼Œä¸¦é‡è¼‰æ ¸å¿ƒå‡½æ•¸
pub struct SGD&lt;'a, T&gt; {
    params: RefCell&lt;Vec&lt;SGDParam&lt;'a&gt;&gt;&gt;,
    lr: Cell&lt;f32&gt;,
    penalty: T,
}

impl&lt;'a, T: Penalty&gt; Optimizer&lt;'a&gt; for SGD&lt;'a, T&gt; {

    fn get_lr(&amp;self) -&gt; f32 {
        self.lr.get()
    }

    fn set_lr(&amp;self, lr: f32) {
        self.lr.set(lr)
    }
}
<span class="boring">}</span></code></pre></pre>
<p>å°‡ trait ç†è§£ç‚ºæ¥å£æ˜¯ä¸€ç¨®å¾ˆç¬¦åˆç›´è¦ºçš„ç°¡åŒ–ï¼Œä½†æ˜¯ä½ åªè¦çŸ¥é“å®ƒä¸ç­‰åŒæ–¼æ¥å£ï¼Œåªæ˜¯å¯ä»¥<code>ç”¨èµ·ä¾†å¾ˆåƒæ¥å£</code></p>
<h2 id="çµèª20220213-0334-æˆæ–‡"><a class="header" href="#çµèª20220213-0334-æˆæ–‡">çµèªï¼ˆ2022/02/13 03:34 æˆæ–‡ï¼‰</a></h2>
<p>é€™æ¬¡é—œæ–¼ trait æœ€æ ¸å¿ƒçš„å…§å®¹å°±ç¸½çµåˆ°æ­¤ï¼Œå¯¦éš›ä½¿ç”¨æ™‚èƒ½æ˜ç™½å…¶ä¸­çš„ç²¾é«“å°±å¥½äº†ï¼Œé—œæ–¼ trait çš„å¯¦éš›åŠŸèƒ½å…¶å¯¦æ¯”æœ¬æ¬¡ä»‹ç´¹çš„è¦æ›´å¤šï¼Œä½†æ˜¯ç­†è€…èªç‚º<code>æœ‰å¤§å±€è§€ï¼ŒçŸ¥é“å®ƒæ˜¯ä»€éº¼ï¼Œå°å®ƒæœ‰æ¸…æ™°çš„æ¦‚å¿µèªçŸ¥</code>çš„è©±ï¼Œä¸Šé¢çš„å…§å®¹å·²ç¶“è¶³å¤ ã€‚æ”¶é›†æ›´å¤šå•é¡Œå¾Œï¼Œå¾ŒçºŒæ‰¾æ›´å¤šçš„ä¾‹å­ä¾†è©³ç´°å±•é–‹ç”¨æ³•ä¹Ÿä¸é²ã€‚</p>
<h1 id="å­¸-rust-è¦æœ‰å¤§å±€è§€--äº”--å±¬æ€§çš„åŠŸèƒ½"><a class="header" href="#å­¸-rust-è¦æœ‰å¤§å±€è§€--äº”--å±¬æ€§çš„åŠŸèƒ½">å­¸ Rust è¦æœ‰å¤§å±€è§€ -äº”- å±¬æ€§çš„åŠŸèƒ½</a></h1>
<h2 id="ä»€éº¼æ˜¯-attribute"><a class="header" href="#ä»€éº¼æ˜¯-attribute">ä»€éº¼æ˜¯ attributeï¼Ÿ</a></h2>
<p>attribute æ˜¯ rust ç·¨è­¯å™¨ç•™çµ¦ç¨‹åºå“¡çš„äº¤äº’æ¥å£ï¼Œä¸€æ®µä»£ç¢¼å¯ä»¥ç·¨è­¯ç”¢å‡ºç‚ºäºŒé€²åˆ¶æ©Ÿå™¨ç¢¼çš„éç¨‹é€šå¸¸ä¾†èªªï¼Œç”¨æˆ¶çš„ä»£ç¢¼æ˜¯ç·¨è­¯å™¨çš„è¼¸å…¥ï¼Œç•¶ç·¨è­¯å™¨èªç‚ºä»£ç¢¼æœ‰å•é¡Œï¼Œè€Œç¨‹åºå“¡èªç‚ºæ²’å•é¡Œçš„æ™‚å€™ï¼Œå¿…é ˆå…è¨±ç¨‹åºå“¡å’Œç·¨è­¯å™¨æœ‰äº¤äº’ï¼Œå…è¨±ç¨‹åºå“¡æŒ‡å°å€‹åˆ¥ä»£ç¢¼çš„è™•ç†æ–¹å¼ã€‚</p>
<p>ä¸‹é¢åˆ—èˆ‰å¹¾å€‹æ¯”è¼ƒæœ‰ä»£è¡¨æ€§çš„å ´æ™¯ï¼š</p>
<h2 id="è®“ç·¨è­¯å™¨é–‰å˜´"><a class="header" href="#è®“ç·¨è­¯å™¨é–‰å˜´">è®“ç·¨è­¯å™¨é–‰å˜´</a></h2>
<p>rustc è¦æ±‚çµæ§‹é«”çš„å‘½åéœ€ç‚ºé§±é§é«”ï¼Œå¦å‰‡å°±æœƒçµ¦å‡ºè­¦å‘Šï¼Œå‡å¦‚ç¨‹åºå“¡â€˜æ•…æ„â€™è¦çµ¦å‡ºä¸€å€‹çµæ§‹é«”ï¼Œä½†æ˜¯ç”¨äº† python çš„ä¸‹åŠƒç·šå‘½åï¼Œç‚ºäº†è®“ç·¨è­¯å™¨å¿½ç•¥å°å‘½åæ ¼å¼çš„â€˜ç•°è­°â€™ï¼Œå¯ä»¥é€šé</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[allow(non_camlel_case_types)]
<span class="boring">}</span></code></pre></pre>
<p>é€™å€‹æ¨™è¨˜ï¼ŒæŠŠå®ƒæ”¾åœ¨çµæ§‹é«”è²æ˜ä¹‹å‰ï¼Œç·¨è­¯å™¨å°±å¯ä»¥æŒ‰ç…§ç¨‹åºå“¡çš„æ„é¡˜ä¸»å‹•æ”¾éã€‚è€Œä¸æ˜¯è¼¸å‡ºä¸€å †è­¦å‘Šã€‚</p>
<h2 id="è®“ç·¨è­¯å™¨è‡¨å ´æ‡‰è®Š"><a class="header" href="#è®“ç·¨è­¯å™¨è‡¨å ´æ‡‰è®Š">è®“ç·¨è­¯å™¨è‡¨å ´æ‡‰è®Š</a></h2>
<p>æ‰€è¬‚çš„è‡¨å ´æ‡‰è®Šç¶“å…¸å ´æ™¯ä¸»è¦æ˜¯ç¡¬ä»¶å’Œæ“ä½œç³»çµ±ç’°å¢ƒå€åˆ¥ï¼Œæ¯”å¦‚ç•¶å‰é€™å€‹ç¨‹åºå“¡çš„æ“ä½œç³»çµ±æ˜¯<code>windows</code>, CPU æ¶æ§‹æ˜¯<code>x86_64</code>åˆæˆ–è€…æ˜¯<code>arm64</code>, ä»£ç¢¼ç·¨è­¯çš„æ™‚å€™æœ‰äº›åˆ¥äººçš„ä»£ç¢¼ç¢ºå¯¦ä¸å¯èƒ½ç·¨è­¯é€šéï¼Œç¨‹åºå“¡éœ€è¦ä¸»å‹•è™•ç†æ¢ä»¶ç·¨è­¯è¦å‰‡ï¼ŒæŒ‡å°ç·¨è­¯å™¨ä¸åŒæ¶æ§‹ä¸‹åŒä¸€å€‹ä»£ç¢¼æ‡‰è©²ç·¨è­¯å“ªä¸€å€‹å…·é«”å¯¦ç¾ã€‚å°æ‡‰çš„ attribute é¡ä¼¼<code>#[cfg(windows)]</code>çš„æ¨™è¨˜èªªæ˜å…·é«”ä¿¡æ¯ã€‚</p>
<h2 id="è®“ç·¨è­¯å™¨æ”¹è®Šé»˜èªè¡Œç‚º"><a class="header" href="#è®“ç·¨è­¯å™¨æ”¹è®Šé»˜èªè¡Œç‚º">è®“ç·¨è­¯å™¨æ”¹è®Šé»˜èªè¡Œç‚º</a></h2>
<p>rust ç­è§£ä¹‹å¾Œä½ æœƒçŸ¥é“æœ‰å¾ˆå¤šç‰¹æœ‰çš„è¡“èªï¼Œæ¯”å¦‚â€˜æ°§åŒ–â€™è¡¨ç¤ºç”¨ rust å»é‡å¯«ä¸€äº›ç¾æœ‰çš„åº«ï¼Œæˆ–è€…ç”¨ rust å»å¯¦ç¾ä¸€å€‹ç‰¹å®šçš„åŠŸèƒ½ï¼Œä½†æ˜¯ç•¢ç«Ÿå¾ˆå¤šæ±è¥¿ç·¨è­¯ä¹‹å¾Œæœƒæœ‰ä¸€äº›æ­·å²å‘½åç¿’æ…£æˆ–è€…æ¥å£è¦å‰‡ï¼Œä¸èƒ½æŒ‰ç…§ rust æœ¬èº«çš„ç´„å®šè¼¸å‡ºï¼Œæˆ‘å€‘å¯ä»¥é€šé</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span>#![crate_type = "cdylib"]
#![create_name=''crypto3]
<span class="boring">fn main() {
</span><span class="boring">}</span></code></pre></pre>
<p>é€™æ¨£æˆ‘å€‘å¾—åˆ°çš„åå­—æ˜¯<code>libcrypto3.so</code>ï¼Œæˆ‘å€‘é‚„ç‰¹æ„å¤šåŠ äº†ä¸€å€‹<code>3</code>åœ¨<code>o</code>å¾Œé¢ï¼Œè¡¨ç¤ºé€™å€‹åº«æ˜¯æˆ‘å€‘è‡ªå·±ç”¨ rust æ°§åŒ–ä¹‹å¾Œçš„ç‰ˆæœ¬; å¦å‰‡æˆ‘å€‘å¾—åˆ°çš„æ˜¯ä¸€å€‹åŸç‰ˆå‘½åçš„<code>libcrate.rlib</code>é€™æ¨£çš„ rust äºŒé€²åˆ¶åº«åå­—.</p>
<h2 id="è®“ç·¨è­¯å™¨å€åˆ¥å°å¾…ä¸€äº›å‡½æ•¸å’Œä»£ç¢¼"><a class="header" href="#è®“ç·¨è­¯å™¨å€åˆ¥å°å¾…ä¸€äº›å‡½æ•¸å’Œä»£ç¢¼">è®“ç·¨è­¯å™¨å€åˆ¥å°å¾…ä¸€äº›å‡½æ•¸å’Œä»£ç¢¼</a></h2>
<p>å–®æ¸¬å°±æ˜¯é€™æ¨£ä¸€å€‹å…¸å‹å ´æ™¯ï¼Œç›¸æ¯”æ–¼å…¶ä»–èªè¨€ç”¨æ–‡ä»¶åå¾Œç¶´ï¼Œå‰ç¶´ï¼Œæˆ–è€…æ˜¯å¼•å…¥æŸäº›åŒ…å–®ç¨ç·¨ç¢¼è€Œè¨€ï¼Œrust æ”¯æŒçš„æ›´ç‚ºç°¡å–®ç›´æ¥ï¼Œåªè¦æœ‰ <code>#[test]</code>ä¿®é£¾çš„å‡½æ•¸éƒ½æœƒæ¨™è¨˜ç‚ºæ¸¬è©¦å‡½æ•¸ï¼Œæœƒåœ¨<code>cargo test</code>å‘½ä»¤ä¸‹è¢«æ‹‰å‡ºä¾†å–®ç¨åŸ·è¡Œã€‚</p>
<h2 id="è®“ç·¨è­¯è‡ªå‹•æ·»åŠ ä¸€äº›è¡Œç‚º"><a class="header" href="#è®“ç·¨è­¯è‡ªå‹•æ·»åŠ ä¸€äº›è¡Œç‚º">è®“ç·¨è­¯è‡ªå‹•æ·»åŠ ä¸€äº›è¡Œç‚º</a></h2>
<p>é€™å€‹ç”¨æ³•å°±éå¸¸å¤šæ¨£äº†ï¼Œå…¸å‹å ´æ™¯æ˜¯ç”¨<code>#[derive(Debug)]</code> é¡ä¼¼çš„æ¨™è¨˜å¥½ï¼Œä»¥ä¾¿ç·¨è­¯å™¨è‡ªå‹•çµ¦æˆ‘å€‘çš„é¡å‹æ·»åŠ ç‰¹æ€§.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug)]
struct Point {
    x:f32,
    y:f32,
}
<span class="boring">}</span></code></pre></pre>
<p>ç·¨è­¯å™¨ç¾åœ¨æœƒçµ¦ Point é¡è‡ªå‹•æ·»åŠ ä¸€å€‹<code>fmt</code>å‡½æ•¸ï¼Œé€™å€‹å‡½æ•¸åŠŸèƒ½é¡ä¼¼ java çš„<code>toString</code>ï¼Œ æˆ–è€… python çš„<code>__repr__</code>ç­‰ï¼Œæ³¨æ„ï¼šderive çš„æ„ç¾©ç‚ºæ´¾ç”Ÿï¼Œä½†é€™è£¡ä¸¦æ²’æœ‰ä¸€å€‹<code>é»˜èªçš„çˆ¶é¡å¯¦ç¾</code>, ä»£ç¢¼éƒ½æ˜¯ç·¨è­¯å™¨æ ¹æ“šç•¶å‰çš„é¡ç¨‹æˆå“¡è®Šé‡è‡ªå‹•æ·»åŠ ä¸¦ç·¨è­¯çš„ã€‚</p>
<p><code>derive</code>å’Œ<code>trait</code>æ­é…ä½¿ç”¨å…±åŒå·¦å³ï¼Œæƒ³è¦æ˜ç™½å…¶ä¸­ç´°ç¯€å¯ä»¥é–±è®€æœ¬ç³»åˆ—ä¸Šé—œæ–¼<code>trait</code>çš„å–®ç¨ç¯‡ç« .</p>
<h2 id="çµèª"><a class="header" href="#çµèª">çµèª</a></h2>
<p>çœ‹äº†ä¸€äº›å¿«é€Ÿç°¡å–®çš„ä¾‹å­ï¼Œä½ æ‡‰è©²çŸ¥é“ attribute é€™å€‹æ¦‚å¿µæ˜¯ä»€éº¼å…§æ¶µäº†ï¼ŒçŸ¥é“äº†å…§æ¶µä¹Ÿå°±æ˜ç™½äº†æ¦‚å¿µï¼Œé‡åˆ°çš„æ™‚å€™å°±ä¸æœƒæœ‰ç–‘æƒ‘äº†ã€‚ä¸‹ä¸€ç¯‡æˆ‘å€‘è¬›ä¸€ä¸‹ rust æƒ±äººçš„å®ï¼Œç”¨ä¸ç”¨ä¸é‡è¦ï¼Œé‡è¦çš„æ™‚å€™é€šéç­è§£ rustï¼Œå¤§å®¶ä¸€èµ·æ€è€ƒä¸€ä¸‹æ‰‹é ­ä½¿ç”¨çš„èªè¨€åˆ°åº•å“ªè£¡ä¸å¥½ï¼Œç‚ºä»€éº¼æœ‰æ–°çš„è¨­è¨ˆã€‚</p>

                        <script src="https://utteranc.es/client.js"
                            repo="imxood/imxood.github.io"
                            issue-term="pathname"
                            theme="boxy-light"
                            crossorigin="anonymous"
                            async>
                        </script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../rust/rust_note.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../rust/String.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../rust/rust_note.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../rust/String.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../theme/custom/mermaid.min.js"></script>
        <script type="text/javascript" src="../theme/custom/mermaid-init.js"></script>


    </body>
</html>
