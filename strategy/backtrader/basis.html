<!DOCTYPE HTML>
<html lang="zh" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Backtrader - Jason Notes</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/custom/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html">Jason Notes</a></li><li class="chapter-item expanded "><a href="../../ubuntu/ubuntu_setup.html">Ubuntu</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ubuntu/command.html">Command</a></li><li class="chapter-item "><a href="../../ubuntu/gcp.html">GCP ssh</a></li><li class="chapter-item "><a href="../../ubuntu/wine.html">Wine</a></li></ol></li><li class="chapter-item expanded "><a href="../../android/android.html">Android</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../android/install_sdk.html">SDK install</a></li><li class="chapter-item "><a href="../../android/flutter.html">Flutter</a></li></ol></li><li class="chapter-item expanded "><a href="../../tools/tools.html">Tools</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../tools/asciinema.html">asciinema æŠŠçµ‚ç«¯æ“ä½œéŒ„è£½æˆ gif å‹•ç•«</a></li><li class="chapter-item "><a href="../../tools/finmind.html">Finmind</a></li><li class="chapter-item "><a href="../../tools/add-enter-and-exit-trace-for-your-function.html">addr2line</a></li><li class="chapter-item "><a href="../../tools/cmake.html">cmake</a></li><li class="chapter-item "><a href="../../tools/network.html">Network</a></li><li class="chapter-item "><a href="../../tools/python-pycryptodome-aes-symmetric-encryption-tutorial-examples.html">å¯¦ä½œ AES å°ç¨±å¼åŠ å¯†</a></li></ol></li><li class="chapter-item expanded "><a href="../../html/html.html">HTML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../html/vue.html">Vue</a></li></ol></li><li class="chapter-item expanded "><a href="../../vim/vim.html">Vim</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../vim/copilot.html">copilot</a></li><li class="chapter-item "><a href="../../vim/tabnine.html">tabnine</a></li></ol></li><li class="chapter-item expanded "><a href="../../gdb/gdb.html">Gdb</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../gdb/å¸¸ç”¨æŒ‡ä»¤.html">å¸¸ç”¨æŒ‡ä»¤</a></li><li class="chapter-item "><a href="../../gdb/jemalloc.html">jemalloc</a></li><li class="chapter-item "><a href="../../gdb/graphs.html">graphs</a></li><li class="chapter-item "><a href="../../gdb/rust-gdb.html">rust gdb</a></li><li class="chapter-item "><a href="../../gdb/qemu-gdb-risc-v64.html">qemu-gdb-risc-v64-kernel</a></li><li class="chapter-item "><a href="../../gdb/go-rust-gdb-debug.html">ä½¿ç”¨gdb è¿½è¹¤go/rustç¨‹å¼ç¢¼</a></li><li class="chapter-item "><a href="../../gdb/gdb-function-trace-to-flowchart-guide.html">GDBå‡½æ•¸èª¿ç”¨è»Œè·¡åˆ†æèˆ‡æµç¨‹åœ–ç”Ÿæˆå®Œæ•´æŒ‡å—</a></li></ol></li><li class="chapter-item expanded "><a href="../../c++/cpp.html">C++</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../c++/benchmark.html">benchmark</a></li><li class="chapter-item "><a href="../../c++/ä¹˜ä»¥0.01å’Œé™¤ä»¥100å“ªå€‹å¿«.html">ä¹˜ä»¥ 0.01 å’Œé™¤ä»¥ 100 å“ªå€‹å¿«</a></li><li class="chapter-item "><a href="../../c++/smart_pointer.html">Smart pointer</a></li><li class="chapter-item "><a href="../../c++/l&rvalue.html">L&R value</a></li><li class="chapter-item "><a href="../../c++/move.html">Move</a></li><li class="chapter-item "><a href="../../c++/CAS.html">CAS</a></li><li class="chapter-item "><a href="../../c++/HFT.html">HFT</a></li><li class="chapter-item "><a href="../../c++/cpp_note.html">Note</a></li><li class="chapter-item "><a href="../../c++/é«˜æ€§èƒ½ç¨‹å¼è¨­è¨ˆå¯¦æˆ°.html">é«˜æ€§èƒ½ç¨‹å¼è¨­è¨ˆå¯¦æˆ°</a></li><li class="chapter-item "><a href="../../c++/å¦‚ä½•é«˜æ•ˆåœ°å„²å­˜ä¸¦æ“ä½œè¶…å¤§è¦æ¨¡.html">å¦‚ä½•é«˜æ•ˆåœ°å„²å­˜ä¸¦æ“ä½œè¶…å¤§è¦æ¨¡</a></li><li class="chapter-item "><a href="../../c++/UC_CAPITAL.html">UC_CAPITAL</a></li><li class="chapter-item "><a href="../../c++/cpp-smart-pointers-guide.html">unique_ptr vs shared_ptr</a></li><li class="chapter-item "><a href="../../c++/cpp-move-semantics-guide.html">C++ Move èªæ„å®Œæ•´æŒ‡å—</a></li><li class="chapter-item "><a href="../../c++/interview.html">interview</a></li></ol></li><li class="chapter-item expanded "><a href="../../mojo/mojo.html">Mojo</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../mojo/mojo_crawler_guide.html">Mojo çˆ¬èŸ²å®Œæ•´æŒ‡å—</a></li></ol></li><li class="chapter-item expanded "><a href="../../riscv/riscv.html">RISC-V</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../riscv/qemu_riscv_linux.html">QEMUä¸Šé‹è¡ŒRISV-V Linux</a></li><li class="chapter-item "><a href="../../riscv/qemi_gdb.html">QEMU GDB</a></li><li class="chapter-item "><a href="../../riscv/qemu_gdb_lab.html">Qemu Gdb Lab</a></li></ol></li><li class="chapter-item expanded "><a href="../../centos/centos.html">CentOS</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../centos/tqdb_setup.html">TQDB å®‰è£ç´€éŒ„</a></li></ol></li><li class="chapter-item expanded "><a href="../../ssh/ssh.html">SSH</a></li><li class="chapter-item expanded "><a href="../../network/socket.html">Network</a></li><li class="chapter-item expanded "><a href="../../docker/docker_helloworld.html">Docker</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../docker/docker.html">Docker åŸºæœ¬æ•™å­¸</a></li><li class="chapter-item "><a href="../../docker/example.html">ç°¡å–®ç¯„ä¾‹</a></li><li class="chapter-item "><a href="../../docker/creating-the-perfect-python-dockerfile.html">Perfect python dockerfile</a></li><li class="chapter-item "><a href="../../docker/dockerfile-from-docker-image.html">ç”± Docker image åæ¨å…¶ Dockerfile</a></li><li class="chapter-item "><a href="../../docker/python_connect_redis.html">Pythoné€£æ¥Redis</a></li><li class="chapter-item "><a href="../../docker/command.html">Command</a></li><li class="chapter-item "><a href="../../docker/docker_compose.html">Docker compose</a></li><li class="chapter-item "><a href="../../docker/docker_compse_example.html">Docker compose example</a></li><li class="chapter-item "><a href="../../docker/python_redis.html">Python-Redis</a></li><li class="chapter-item "><a href="../../docker/redash.html">Redash</a></li><li class="chapter-item "><a href="../../docker/clickhouse.html">ClickHouse</a></li><li class="chapter-item "><a href="../../docker/clickhouse-setup.html">clickhouse-setup</a></li><li class="chapter-item "><a href="../../docker/python_run_from_local.html">Docker run local</a></li><li class="chapter-item "><a href="../../docker/redpanda.html">Redpanda</a></li><li class="chapter-item "><a href="../../docker/gcc.html">é‹è¡Œæœ€æ–°ç‰ˆGCC</a></li></ol></li><li class="chapter-item expanded "><a href="../../rust/rust.html">Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../rust/note.html">Rustç­†è¨˜</a></li><li class="chapter-item "><a href="../../rust/basic.html">Rust åŸºæœ¬æ•™å­¸</a></li><li class="chapter-item "><a href="../../rust/ownership.html">Rust æ‰€æœ‰æ¬Šç³»çµ±</a></li><li class="chapter-item "><a href="../../rust/lifetime.html">Rust ç”Ÿå‘½é€±æœŸ (Lifetime)</a></li><li class="chapter-item "><a href="../../rust/type.html">Rust å‹åˆ¥ç³»çµ±</a></li><li class="chapter-item "><a href="../../rust/rust_setup.html">Rust Tools</a></li><li class="chapter-item "><a href="../../rust/polars.html">Polars</a></li><li class="chapter-item "><a href="../../rust/rust_call_c.html">Rust call C</a></li><li class="chapter-item "><a href="../../rust/pyo3.html">PyO3</a></li><li class="chapter-item "><a href="../../rust/10-rust-an-introduction.html">çµ¦ C++ ä½¿ç”¨è€…çš„ Rust ç°¡ä»‹</a></li><li class="chapter-item "><a href="../../rust/å¯è¦–åŒ–Rustå„è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€.html">å¯è¦–åŒ–Rustå„è³‡æ–™çµæ§‹çš„è¨˜æ†¶é«”ä½ˆå±€</a></li><li class="chapter-item "><a href="../../rust/rust_note.html">å­¸ç¿’é †åº</a></li><li class="chapter-item "><a href="../../rust/overview.html">å¤§å±€è§€</a></li><li class="chapter-item "><a href="../../rust/String.html">ç†è§£å­—ä¸²</a></li><li class="chapter-item "><a href="../../rust/easy_rust.html">Easy Rust</a></li><li class="chapter-item "><a href="../../rust/rust_easy.html">Rust æ–°æ‰‹</a></li><li class="chapter-item "><a href="../../rust/module.html">Rust æ¨¡çµ„çµæ§‹</a></li><li class="chapter-item "><a href="../../rust/rust_memory.html">Rustèˆ‡è¨˜æ†¶é«”</a></li><li class="chapter-item "><a href="../../rust/rust_vs_cpp.html">Rust vs C++èªæ³•</a></li><li class="chapter-item "><a href="../../rust/rust_file_format.html">Rust æª”æ¡ˆæ ¼å¼</a></li><li class="chapter-item "><a href="../../rust/rust-an-introduction-in-oop.html">Rust OO</a></li><li class="chapter-item "><a href="../../rust/rust-an-introduction-smart-pointer.html">Rust Pointer</a></li><li class="chapter-item "><a href="../../rust/pointer.html">Pointer</a></li><li class="chapter-item "><a href="../../rust/copy_trait.html">Copy Trait</a></li><li class="chapter-item "><a href="../../rust/binary_lib.html">Rust å‡½æ•¸åº«/åŸ·è¡Œæª”</a></li><li class="chapter-item "><a href="../../rust/reqwest.html">Reqwest</a></li><li class="chapter-item "><a href="../../rust/print-function-name-dump-stack.html">å°å‡ºå‡½æ•¸åç¨±</a></li><li class="chapter-item "><a href="../../rust/criterion.html">criterion</a></li><li class="chapter-item "><a href="../../rust/Rustçš„ç²¾é«“.html">Rustçš„ç²¾é«“</a></li><li class="chapter-item "><a href="../../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—.html">30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/rust_30_day.html">Rust 30 Day</a></li><li class="chapter-item "><a href="../../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/Move_Borrow_Ownership.html">è®Šæ•¸çš„æ‰€æœ‰æ¬Šèˆ‡å€Ÿå‡ºè®Šæ•¸</a></li><li class="chapter-item "><a href="../../rust/30å¤©æ·±å…¥æ·ºå‡ºRustç³»åˆ—/Lifetime.html">Lifetimeï¼š Borrow çš„å­˜æ´»æ™‚é–“</a></li></ol></li><li class="chapter-item "><a href="../../rust/cpp_vs_rust_comparison.html">C++ vs. Rust: å…¨é¢ç‰¹æ€§æ¯”è¼ƒ</a></li><li class="chapter-item "><a href="../../rust/cpp-move-vs-rust-ownership.html">C++ Move èªç¾© vs Rust æ‰€æœ‰æ¬Šç³»çµ±çš„æ ¸å¿ƒå·®ç•°</a></li><li class="chapter-item "><a href="../../rust/Rust-RESTful-API-å®Œæ•´é–‹ç™¼æŒ‡å—.html">Rust-RESTful-API-å®Œæ•´é–‹ç™¼æŒ‡å—</a></li><li class="chapter-item "><a href="../../rust/Rust-self-Self-èˆ‡-C++-this-å°æ¯”æŒ‡å—.html">Rust-self-Self-èˆ‡-C++-this-å°æ¯”æŒ‡å—</a></li><li class="chapter-item "><a href="../../rust/rust-derive-traits-comparison.html">Rust Derive Traits æ¯”è¼ƒï¼šè‡ªå‹•ç”Ÿæˆ vs æ‰‹å‹•å¯¦ä½œ</a></li><li class="chapter-item "><a href="../../rust/rust_traits_explained.html">Rust Traits ç™½è©±è§£é‡‹ï¼šèˆ‡ C++ çš„æ¯”è¼ƒ</a></li><li class="chapter-item "><a href="../../rust/rust_trait_impl_markdown.html">Rust ä¸­ trait å’Œ impl çš„å·®ç•°</a></li><li class="chapter-item "><a href="../../rust/rust_cpp_comparison_md.html">Rust vs C++ è©³ç´°å°æ¯”æŒ‡å—</a></li><li class="chapter-item "><a href="../../rust/rust_module_system_markdown.html">Rust æ¨¡çµ„ç³»çµ±å®Œæ•´æŒ‡å—</a></li><li class="chapter-item "><a href="../../rust/ownership_vs_borrowing_guide.html">Rust æ“æœ‰æ¬Š vs å€Ÿç”¨ï¼šç”Ÿå‘½é€±æœŸå•é¡ŒæŒ‡å—ğŸ¦€</a></li><li class="chapter-item "><a href="../../rust/rust_ownership_guide.html">Rust æ‰€æœ‰æ¬Šç³»çµ± - ç”Ÿæ´»åŒ–è©³è§£</a></li><li class="chapter-item "><a href="../../rust/rust_ownership_complete_guide.html">Rust æ‰€æœ‰æ¬Šå®Œæ•´æŒ‡å— - å¾åŸºç¤åˆ°ç²¾é€š</a></li><li class="chapter-item "><a href="../../rust/rust_memory_guide.html">Rust è¨˜æ†¶é«”é…ç½®æŒ‡å—ï¼šStack vs Heap</a></li><li class="chapter-item "><a href="../../rust/rust_wrappers_guide.html">Rust åŒ…è£é¡å‹ç™½è©±æŒ‡å—ğŸ“¦</a></li></ol></li><li class="chapter-item expanded "><a href="../../go/go.html">Go</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../go/note.html">Golang  Note</a></li><li class="chapter-item "><a href="../../go/pytago.html">pytago</a></li><li class="chapter-item "><a href="../../go/Goç·¨ç¨‹å¯¦æˆ°æ´¾åŸºç¤å…¥é–€.html">Goç·¨ç¨‹å¯¦æˆ°æ´¾åŸºç¤å…¥é–€</a></li><li class="chapter-item "><a href="../../go/Goç·¨ç¨‹å¯¦æˆ°æ´¾Webé–‹ç™¼åŸºç¤.html">Goç·¨ç¨‹å¯¦æˆ°æ´¾Webé–‹ç™¼åŸºç¤</a></li><li class="chapter-item "><a href="../../go/golang_debugger.html">Golang Deubgger</a></li><li class="chapter-item "><a href="../../go/golang-go-module-tutorial.html">å¾ä¸€çŸ¥åŠè§£åˆ°ç•¥æ‡‚ Go modules</a></li><li class="chapter-item "><a href="../../go/go_mod.html">Go modules</a></li><li class="chapter-item "><a href="../../go/trace.html">Golangå¤§æ®ºå™¨ä¹‹è·Ÿè¹¤å‰–ætrace</a></li><li class="chapter-item "><a href="../../go/Coroutine.html">è¡Œç¨‹ã€åŸ·è¡Œç·’ã€å”ç¨‹ï¼Œå‚»å‚»åˆ†å¾—æ¸…æ¥šï¼</a></li><li class="chapter-item "><a href="../../go/goroutine-and-channel.html">Goä½µç™¼</a></li><li class="chapter-item "><a href="../../go/websocket.html">Websocket</a></li><li class="chapter-item "><a href="../../go/returning-pointer-from-a-function-in-go.html">Returning Pointer from a Function in Go</a></li><li class="chapter-item "><a href="../../go/golang-memory-management.html">GC å…¨é¢è§£æ</a></li><li class="chapter-item "><a href="../../go/golang-goroutine.html">Goroutine èˆ‡ GMP åŸç†å…¨é¢åˆ†æ</a></li><li class="chapter-item "><a href="../../go/oo.html">OO</a></li><li class="chapter-item "><a href="../../go/mutex-rwmutex.html">sync.Mutex å’Œ sync.RWMutex</a></li><li class="chapter-item "><a href="../../go/interface.html">interface</a></li><li class="chapter-item "><a href="../../go/example.html">Example</a></li><li class="chapter-item "><a href="../../go/LiveKit.html">LiveKit</a></li></ol></li><li class="chapter-item expanded "><a href="../../ml/ml.html">ML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../ml/pytorch.html">Pytorch</a></li><li class="chapter-item "><a href="../../ml/pytorch_setup.html">Pytorch å®‰è£</a></li><li class="chapter-item "><a href="../../ml/deap.html">Deap</a></li><li class="chapter-item "><a href="../../ml/cudf.html">CUDF</a></li><li class="chapter-item "><a href="../../ml/åˆæ¢åŸºå› æ¼”ç®—æ³•.html">åˆæ¢åŸºå› æ¼”ç®—æ³•-ç”¨ OneMax å•é¡Œç¤ºç¯„</a></li><li class="chapter-item "><a href="../../ml/ç°¡å–®è§£é‡‹æ¢¯åº¦ä¸‹é™æ³•.html">ç°¡å–®è§£é‡‹æ¢¯åº¦ä¸‹é™æ³•</a></li><li class="chapter-item "><a href="../../ml/æ¢¯åº¦ä¸‹é™æ³•_gradient_descent.html">æ¢¯åº¦ä¸‹é™æ³• gradient descent</a></li><li class="chapter-item "><a href="../../ml/æ¢¯åº¦æœ€ä½³è§£ç›¸é—œç®—æ³•.html">æ¢¯åº¦æœ€ä½³è§£ç›¸é—œç®—æ³•</a></li><li class="chapter-item "><a href="../../ml/åŸºæ–¼DEAPåº«çš„Pythoné€²åŒ–æ¼”ç®—æ³•å¾å…¥é–€åˆ°å…¥åœŸ.html">åŸºæ–¼DEAPåº«çš„Pythoné€²åŒ–æ¼”ç®—æ³•å¾å…¥é–€åˆ°å…¥åœŸ</a></li><li class="chapter-item "><a href="../../ml/GA.html">GA</a></li><li class="chapter-item "><a href="../../ml/XGBoost.html">XGBoost</a></li><li class="chapter-item "><a href="../../ml/YOLO.html">YOLO</a></li><li class="chapter-item "><a href="../../ml/yolov8æ‰‹å‹¢è­˜åˆ¥.html">YOLOv8æ‰‹å‹¢è­˜åˆ¥</a></li><li class="chapter-item "><a href="../../ml/Roboflow.html">Roboflow</a></li></ol></li><li class="chapter-item expanded "><a href="../../python/python.html">Python</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../python/Poetryå®Œå…¨å…¥é–€æŒ‡å—.html">Poetryå®Œå…¨å…¥é–€æŒ‡å—</a></li><li class="chapter-item "><a href="../../python/æ­å»ºgRPCæœå‹™.html">æ­å»ºgRPCæœå‹™</a></li><li class="chapter-item "><a href="../../python/python_debugger.html">Python Debugger</a></li><li class="chapter-item "><a href="../../python/decorator.html">Python decorator</a></li><li class="chapter-item "><a href="../../python/python-decorator.html">è£é£¾å™¨çœ‹é€™ä¸€ç¯‡å°±å¤ äº†</a></li><li class="chapter-item "><a href="../../python/import-concept.html">import-concept</a></li><li class="chapter-item "><a href="../../python/process_thread.html">Process/Threadå„ªç¼ºé»</a></li><li class="chapter-item "><a href="../../python/processing_communcation.html">Processing é€šè¨Š</a></li><li class="chapter-item "><a href="../../python/condition.html">Pythonä¸­çš„waitå’Œnotify</a></li><li class="chapter-item "><a href="../../python/ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å¼.html">ç”Ÿç”¢è€…æ¶ˆè²»è€…æ¨¡å¼</a></li><li class="chapter-item "><a href="../../python/Loguru.html">Loguru</a></li><li class="chapter-item "><a href="../../python/cython.html">Cython</a></li><li class="chapter-item "><a href="../../python/WebSocket_reconnect.html">Python WebSocketé•·é€£æ¥å¿ƒè·³èˆ‡çŸ­é€£æ¥</a></li><li class="chapter-item "><a href="../../python/bloomrpc.html">bloomrpc</a></li><li class="chapter-item "><a href="../../python/concurrent.futures.html">Concurrent futures</a></li><li class="chapter-item "><a href="../../python/schedule.html">ä»»å‹™èª¿åº¦</a></li><li class="chapter-item "><a href="../../python/plot/plot.html">Plot</a></li><li class="chapter-item "><a href="../../python/plot/dash.html">Dash</a></li><li class="chapter-item "><a href="../../python/Rust_bindings_for_Python.html">Rust bindings for Python</a></li><li class="chapter-item "><a href="../../python/pandas.html">Pandas</a></li><li class="chapter-item "><a href="../../python/coroutine.html">Coroutine</a></li><li class="chapter-item "><a href="../../python/finmind.html">FinMind</a></li><li class="chapter-item "><a href="../../python/telegram_bot.html">Telegram Bot</a></li><li class="chapter-item "><a href="../../python/python-different-ways-to-kill-a-thread.html">Different ways kill thread</a></li><li class="chapter-item "><a href="../../python/websocket_client_server.html">Websocket client/server</a></li><li class="chapter-item "><a href="../../python/poetry.html">å¾é›¶é–‹å§‹ä½¿ç”¨ Poetry</a></li><li class="chapter-item "><a href="../../python/fil-memory-usage-profiler.html">Fil-memory-usage-profiler</a></li><li class="chapter-item "><a href="../../python/plot.html">ç¹ªåœ–</a></li><li class="chapter-item "><a href="../../python/shioaji.html">æ°¸è±shioaji</a></li><li class="chapter-item "><a href="../../python/other.html">Other</a></li></ol></li><li class="chapter-item expanded "><a href="../../mermaid/mermaid.html">Mermaid</a></li><li class="chapter-item expanded "><a href="../../linux_system/linux_system.html">Linux System</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../linux_system/1_day_socket.html">Socket</a></li><li class="chapter-item "><a href="../../linux_system/cgroup.html">Cgroup</a></li><li class="chapter-item "><a href="../../linux_system/perf.html">Perf</a></li><li class="chapter-item "><a href="../../linux_system/è‡ªè£½Lib.html">build Lib</a></li><li class="chapter-item "><a href="../../linux_system/performance.html">performance</a></li></ol></li><li class="chapter-item expanded "><a href="../../strategy/bollmaker.html">Strategy</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../strategy/é€ å¸‚/market_market.html">é€ å¸‚</a></li><li class="chapter-item "><a href="../../strategy/tw_futures.html">è‡ºæŒ‡</a></li><li class="chapter-item "><a href="../../strategy/arbitrage.html">å¥—åˆ©</a></li><li class="chapter-item "><a href="../../strategy/é…å°äº¤æ˜“.html">é…å°äº¤æ˜“</a></li><li class="chapter-item "><a href="../../strategy/æµ·é¾œäº¤æ˜“.html">æµ·é¾œäº¤æ˜“</a></li><li class="chapter-item "><a href="../../strategy/è‚¡æµ·ç­‹è‚‰äºº.html">è‚¡æµ·ç­‹è‚‰äºº</a></li><li class="chapter-item "><a href="../../strategy/å¦‚ä½•é¿å…éæ“¬åˆ.html">å¦‚ä½•é¿å…éæ“¬åˆ</a></li><li class="chapter-item "><a href="../../strategy/å¤šç©ºæ“ä½œè¡“.html">å¤šç©ºæ“ä½œè¡“</a></li><li class="chapter-item "><a href="../../strategy/è³‡é‡‘æ§ç®¡æ‰æ˜¯ç‹é“.html">è³‡é‡‘æ§ç®¡æ‰æ˜¯ç‹é“</a></li><li class="chapter-item "><a href="../../strategy/00713_00675Læ­£äºŒèœˆèš£ç­–ç•¥.html">æ­£äºŒèœˆèš£ç­–ç•¥</a></li><li class="chapter-item "><a href="../../strategy/è³ªæŠ¼00713+æ­£äºŒ.html">è³ªæŠ¼00713+æ­£äºŒ</a></li><li class="chapter-item "><a href="../../strategy/phcebus/phcebus.html">phcebus</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../strategy/phcebus/è²å¼æ€è€ƒ.html">è²å¼æ€è€ƒ</a></li><li class="chapter-item "><a href="../../strategy/phcebus/è²·è‚¡3å¿ƒæ³•.html">è²·è‚¡3å¿ƒæ³•</a></li></ol></li><li class="chapter-item "><a href="../../strategy/Option/option.html">é¸æ“‡æ¬Š</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../strategy/Option/option_note.html">Option note</a></li></ol></li><li class="chapter-item "><a href="../../strategy/vectorbt.html">VectorBT</a></li><li class="chapter-item "><a href="../../strategy/orderbook.html">Orderbook</a></li><li class="chapter-item "><a href="../../strategy/é¸è‚¡æ¢ä»¶.html">é¸è‚¡æ¢ä»¶</a></li><li class="chapter-item "><a href="../../strategy/å¦‚ä½•é€²å ´.html">å¦‚ä½•é€²å ´</a></li><li class="chapter-item "><a href="../../strategy/å¦‚ä½•å‡ºå ´.html">å¦‚ä½•å‡ºå ´</a></li><li class="chapter-item "><a href="../../strategy/å»ºå€‰åŠ ç¢¼.html">å»ºå€‰åŠ ç¢¼</a></li><li class="chapter-item "><a href="../../strategy/DT.html">ç•¶æ²–</a></li><li class="chapter-item "><a href="../../strategy/ç•¶æ²–åšç©º.html">ç•¶æ²–åšç©º</a></li><li class="chapter-item "><a href="../../strategy/æŠ„åº•.html">æŠ„åº•</a></li><li class="chapter-item "><a href="../../strategy/éº»é“æ˜/éº»é“æ˜.html">éº»é“æ˜</a></li><li class="chapter-item "><a href="../../strategy/è³ºè´å¤§ç›¤çš„å‹•èƒ½æŠ•è³‡æ³•.html">è³ºè´å¤§ç›¤çš„å‹•èƒ½æŠ•è³‡æ³•</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../strategy/éº»é“æ˜/å‡çªç ´.html">å‡çªç ´</a></li></ol></li><li class="chapter-item "><a href="../../strategy/å¥‡æ­£/å¥‡æ­£.html">å¥‡æ­£</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../strategy/å¥‡æ­£/è³‡é‡‘æ§ç®¡èˆ‡è©¦å–®ç­–ç•¥.html">è³‡é‡‘æ§ç®¡èˆ‡è©¦å–®ç­–ç•¥</a></li><li class="chapter-item "><a href="../../strategy/å¥‡æ­£/å¦‚ä½•å‡ºå ´.html">å¦‚ä½•å‡ºå ´</a></li></ol></li><li class="chapter-item "><a href="../../strategy/ptt_stock/a0808996.html">PTT Stock</a></li><li class="chapter-item "><a href="../../strategy/Book/JG.html">JG</a></li><li class="chapter-item "><a href="../../strategy/bnf.html">BNF</a></li><li class="chapter-item "><a href="../../strategy/cis.html">CIS</a></li><li class="chapter-item "><a href="../../strategy/GA.html">GA</a></li><li class="chapter-item "><a href="../../strategy/stock.html">Stock</a></li><li class="chapter-item "><a href="../../strategy/note.html">Resource</a></li><li class="chapter-item "><a href="../../strategy/nansen.html">Nansen</a></li><li class="chapter-item "><a href="../../strategy/example.html">Example</a></li><li class="chapter-item "><a href="../../strategy/other.html">Other</a></li><li class="chapter-item "><a href="../../strategy/sample.html">Sample</a></li><li class="chapter-item "><a href="../../strategy/shioaji.html">shioaji æ¨¡æ“¬</a></li><li class="chapter-item "><a href="../../strategy/grid.html">Grid</a></li><li class="chapter-item "><a href="../../strategy/pine-script.html">pine-script</a></li><li class="chapter-item "><a href="../../strategy/æ‹¾äººç‰™æ…§.html">æ‹¾äººç‰™æ…§</a></li><li class="chapter-item "><a href="../../strategy/sharpe_ratio.html">å¤æ™®å€¼</a></li><li class="chapter-item "><a href="../../strategy/display_mae_mfe_analysis.html">MAE&MFEåˆ†æ</a></li><li class="chapter-item "><a href="../../strategy/æµ·é¾œæŠ•è³‡æ³•å‰‡.html">æµ·é¾œæŠ•è³‡æ³•å‰‡</a></li><li class="chapter-item "><a href="../../strategy/edge-ratio-follow-application.html">å½ˆæ€§é€²å‡ºå ´çš„åˆ¤æ–·</a></li><li class="chapter-item "><a href="../../strategy/ä¸‰å¿ƒæ³•é †å‹¢æ“ä½œé™³æ—å…ƒ10å¹´è³‡ç”¢ç¿»10å€.html">ä¸‰å¿ƒæ³•é †å‹¢æ“ä½œé™³æ—å…ƒ10å¹´è³‡ç”¢ç¿»10å€</a></li><li class="chapter-item "><a href="../../strategy/Jump.html">JUMP</a></li><li class="chapter-item "><a href="../../strategy/å¼µæ¾å…æŠ•è³‡å¿ƒæ³•.html">å¼µå…æŠ•è³‡å¿ƒæ³•</a></li><li class="chapter-item "><a href="../../strategy/vectorbt_é…å°.html">vectorbt é…å°</a></li><li class="chapter-item "><a href="../../strategy/äº¤æ˜“çš„è¡Œç‚ºèˆ‡æ€ç¶­åˆ†äº«.html">äº¤æ˜“çš„è¡Œç‚ºèˆ‡æ€ç¶­åˆ†äº«</a></li><li class="chapter-item "><a href="../../strategy/æŠ•è³‡æŠ•æ©Ÿçš„è§€å¿µèˆ‡å¿ƒå¾—åˆ†äº«.html">æŠ•è³‡æŠ•æ©Ÿçš„è§€å¿µèˆ‡å¿ƒå¾—åˆ†äº«</a></li><li class="chapter-item "><a href="../../strategy/finlab.html">Finlab</a></li><li class="chapter-item expanded "><a href="../../strategy/backtrader/basis.html" class="active">Backtrader</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹.html">Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶äºŒå®šæœŸå®šé¡æŠ•è³‡.html">Python å›æ¸¬æ¡†æ¶ï¼ˆäºŒï¼‰å®šæœŸå®šé¡æŠ•è³‡</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸‰æŠ€è¡“æŒ‡æ¨™.html">Python å›æ¸¬æ¡†æ¶ï¼ˆä¸‰ï¼‰æŠ€è¡“æŒ‡æ¨™</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶å››CrossOverå’ŒSignal.html">Python å›æ¸¬æ¡†æ¶ï¼ˆå››ï¼‰CrossOver å’Œ Signal</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶äº”Sizer.html">Python å›æ¸¬æ¡†æ¶ï¼ˆäº”ï¼‰Sizer</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶å…­Analyzers.html">Python å›æ¸¬æ¡†æ¶ï¼ˆå…­ï¼‰Analyzers</a></li><li class="chapter-item "><a href="../../strategy/backtrader/å¤šè‚¡çµ„åˆæ“ä½œç­–ç•¥.html">å¤šè‚¡çµ„åˆæ“ä½œ</a></li><li class="chapter-item "><a href="../../strategy/backtrader/å‡ç·šäº¤å‰ç­–ç•¥.html">å‡ç·šäº¤å‰ç­–ç•¥</a></li><li class="chapter-item "><a href="../../strategy/backtrader/å”å¥‡å®‰é€šé“ç­–ç•¥.html">å”å¥‡å®‰é€šé“ç­–ç•¥</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Sizersæ¨¡çµ„.html">Sizersæ¨¡çµ„</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Observersæ¨¡çµ„.html">Observersæ¨¡çµ„</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Pyfolio.html">Pyfolio</a></li><li class="chapter-item "><a href="../../strategy/backtrader/Sample.html">Sample</a></li><li class="chapter-item "><a href="../../strategy/backtrader/performance.html">Performance</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../mq/kafka.html">MQ</a></li><li class="chapter-item expanded "><a href="../../mq/kafka-python.html">Kafkaçš„é€šä¿—ç¸½çµ</a></li><li class="chapter-item expanded "><a href="../../database/database.html">Database</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../database/redis.html">Redis</a></li><li class="chapter-item "><a href="../../database/hash.html">Redis Hash</a></li><li class="chapter-item "><a href="../../database/clickhouse.html">ClickHouse</a></li><li class="chapter-item "><a href="../../database/dolphin.html">Dolphin</a></li><li class="chapter-item "><a href="../../database/sqlite.html">Sqlite</a></li></ol></li><li class="chapter-item expanded "><a href="../../cryptotrade/cryptotrade.html">CryptoTrade</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../cryptotrade/binance/binance.html">Binance</a></li><li class="chapter-item "><a href="../../cryptotrade/binance/oco.html">å¦‚ä½•å°‡OCOè¨‚å–®ç™¼é€åˆ°Binance</a></li></ol></li><li class="chapter-item expanded "><a href="../../git/git.html">Git</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../git/git-remove-commited-files.html">git-remove-commited-files</a></li><li class="chapter-item "><a href="../../git/cheat-sheet.html">Git å¸¸ç”¨</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="backtraderäº¤æ˜“åŸºç¤"><a class="header" href="#backtraderäº¤æ˜“åŸºç¤">Backtraderäº¤æ˜“åŸºç¤</a></h1>
<p>æŸ¥çœ‹å¸³æˆ¶æƒ…æ³ï¼š</p>
<pre><code class="language-python">class TestStrategy(bt.Strategy):
    def next(self):
        print('ç•¶å‰å¯ç”¨è³‡é‡‘', self.broker.getcash())
        print('ç•¶å‰ç¸½è³‡ç”¢', self.broker.getvalue())
        print('ç•¶å‰æŒå€‰é‡', self.broker.getposition(self.data).size)
        print('ç•¶å‰æŒå€‰æˆæœ¬', self.broker.getposition(self.data).price)
        # ä¹Ÿå¯ä»¥ç›´æ¥ç²å–æŒå€‰
        print('ç•¶å‰æŒå€‰é‡', self.getposition(self.data).size)
        print('ç•¶å‰æŒå€‰æˆæœ¬', self.getposition(self.data).price)
        # è¨»ï¼šgetposition() éœ€è¦æŒ‡å®šå…·é«”çš„æ¨™çš„è³‡æ–™é›†
</code></pre>
<p>æ»‘é»è¨­å®šï¼š</p>
<pre><code class="language-python"># æ–¹å¼1ï¼šé€šé BackBroker é¡ä¸­çš„ slip_perc åƒæ•¸è¨­å®šç™¾åˆ†æ¯”æ»‘é»
cerebro.broker = bt.brokers.BackBroker(slip_perc=0.0001)
# æ–¹å¼2ï¼šé€šéå‘¼å« brokers çš„ set_slippage_perc æ–¹æ³•è¨­å®šç™¾åˆ†æ¯”æ»‘é»
cerebro.broker.set_slippage_perc(perc=0.0001)

# æ–¹å¼1ï¼šé€šé BackBroker é¡ä¸­çš„ slip_fixed åƒæ•¸è¨­å®šå›ºå®šæ»‘é»
cerebro.broker = bt.brokers.BackBroker(slip_fixed=0.001)
# æ–¹å¼2ï¼šé€šéå‘¼å« brokers çš„ set_slippage_fixed æ–¹æ³•è¨­å®šå›ºå®šæ»‘é»
cerebro.broker = cerebro.broker.set_slippage_fixed(fixed=0.001)
</code></pre>
<p>åƒæ•¸èªªæ˜ï¼š</p>
<p>æœ‰é—œæ»‘é»çš„å…¶ä»–è¨­å®š
slip_openï¼šæ˜¯å¦å°é–‹ç›¤åƒ¹åšæ»‘é»è™•ç†ï¼Œè©²åƒæ•¸åœ¨ BackBroker() é¡ä¸­é»˜èªç‚º Falseï¼Œåœ¨ set_slippage_perc å’Œset_slippage_fixed æ–¹æ³•ä¸­é»˜èªç‚º Trueï¼›
slip_matchï¼šæ˜¯å¦å°‡æ»‘é»è™•ç†å¾Œçš„æ–°æˆäº¤åƒ¹èˆ‡æˆäº¤ç•¶å¤©çš„åƒ¹æ ¼å€é–“ low ~ high åšåŒ¹é…ï¼Œå¦‚æœç‚º Trueï¼Œå‰‡æ ¹æ“šæ–°æˆäº¤åƒ¹é‡æ–°åŒ¹é…èª¿æ•´åƒ¹æ ¼å€é–“ï¼Œç¢ºä¿è¨‚å–®èƒ½è¢«åŸ·è¡Œï¼›å¦‚æœç‚º Falseï¼Œå‰‡ä¸æœƒèˆ‡åƒ¹æ ¼å€é–“åšåŒ¹é…ï¼Œè¨‚å–®ä¸æœƒåŸ·è¡Œï¼Œä½†æœƒåœ¨ä¸‹ä¸€æ—¥åŸ·è¡Œä¸€å€‹ç©ºè¨‚å–®ï¼›é»˜èªå–å€¼ç‚º Trueï¼›
slip_outï¼šå¦‚æœæ–°æˆäº¤åƒ¹é«˜æ–¼æœ€é«˜åƒ¹æˆ–ä½æ–¼æœ€é«˜åƒ¹ï¼Œæ˜¯å¦ä»¥è¶…å‡ºçš„åƒ¹æ ¼æˆäº¤ï¼Œå¦‚æœç‚º Trueï¼Œå‰‡å…è¨±ä»¥è¶…å‡ºçš„åƒ¹æ ¼æˆäº¤ï¼›å¦‚æœç‚º Falseï¼Œå¯¦éš›æˆäº¤åƒ¹å°‡è¢«é™åˆ¶åœ¨åƒ¹æ ¼å€é–“å…§  low ~ highï¼›é»˜èªå–å€¼ç‚º Falseï¼›
slip_limitï¼šæ˜¯å¦å°é™åƒ¹å–®åŸ·è¡Œæ»‘é»ï¼Œå¦‚æœç‚º Trueï¼Œå³ä½¿ slip_match ç‚ºFasleï¼Œä¹Ÿæœƒå°åƒ¹æ ¼åšåŒ¹é…ï¼Œç¢ºä¿è¨‚å–®è¢«åŸ·è¡Œï¼›å¦‚æœç‚º Falseï¼Œå‰‡ä¸åšåƒ¹æ ¼åŒ¹é…ï¼›é»˜èªå–å€¼ç‚º Trueã€‚</p>
<pre><code class="language-python"># æƒ…æ³1ï¼š
set_slippage_fixed(fixed=0.35,
                   slip_open=False,
                   slip_match=True,
                   slip_out=False)
# ç”±æ–¼ slip_open=False ï¼Œä¸æœƒå°é–‹ç›¤åƒ¹åšæ»‘é»è™•ç†ï¼Œæ‰€ä»¥ä»ç„¶ä»¥åŸå§‹é–‹ç›¤åƒ¹ 32.63307367 æˆäº¤

# æƒ…æ³2ï¼š
set_slippage_fixed(fixed=0.35,
                   slip_open=True,
                   slip_match=True,
                   slip_out=False)

# æƒ…æ³3ï¼š
set_slippage_fixed(fixed=0.35,
                   slip_open=True,
                   slip_match=True,
                   slip_out=True)
# æ»‘é»èª¿æ•´çš„æ–°æˆäº¤åƒ¹ç‚º 32.63307367+0.35 = 32.98307367ï¼Œè¶…å‡ºäº†ç•¶å¤©æœ€é«˜åƒ¹ 32.94151482
# å…è¨±åšåƒ¹æ ¼åŒ¹é… slip_match=True, è€Œä¸”é‹è¡Œä»¥è¶…å‡ºåƒ¹æ ¼å€é–“çš„æ–°æˆäº¤åƒ¹åŸ·è¡Œ slip_out=True
# æœ€çµ‚ä»¥æ–°æˆäº¤åƒ¹ 32.98307367 æˆäº¤

# æƒ…æ³4ï¼š
set_slippage_fixed(fixed=0.35,
                   slip_open=True,
                   slip_match=False,
                   slip_out=True)
# æ»‘é»èª¿æ•´çš„æ–°æˆäº¤åƒ¹ç‚º 32.63307367+0.35 = 32.98307367ï¼Œè¶…å‡ºäº†ç•¶å¤©æœ€é«˜åƒ¹ 32.94151482
# ç”±æ–¼ä¸é€²è¡Œåƒ¹æ ¼åŒ¹é… slip_match=Falseï¼Œæ–°æˆäº¤åƒ¹è¶…å‡ºåƒ¹æ ¼å€é–“ç„¡æ³•æˆäº¤
# 2019-01-17 é€™ä¸€å¤©è¨‚å–®ä¸æœƒåŸ·è¡Œï¼Œä½†æœƒåœ¨ä¸‹ä¸€æ—¥ 2019-01-18 åŸ·è¡Œä¸€å€‹ç©ºè¨‚å–®
# å†å¾€å¾Œçš„ 2019-07-02ï¼Œä¹ŸæœªåŸ·è¡Œè¨‚å–®ï¼Œä¸‹ä¸€æ—¥ 2019-07-03 åŸ·è¡Œç©ºè¨‚å–®
# å³ä½¿ 2019-07-03çš„ open 39.96627412+0.35 &lt; high 42.0866713 æ»¿è¶³æˆäº¤æ¢ä»¶ï¼Œä¹Ÿä¸æœƒè£œå……æˆäº¤
</code></pre>
<p>äº¤æ˜“ç¨…è²»ç®¡ç†</p>
<p>è‚¡ç¥¨ï¼šç›®å‰ A è‚¡çš„äº¤æ˜“è²»ç”¨åˆ†ç‚º 2 éƒ¨åˆ†ï¼šä½£é‡‘å’Œå°èŠ±ç¨…ï¼Œ
å…¶ä¸­ä½£é‡‘é›™é‚Šå¾µæ”¶ï¼Œä¸åŒè­‰åˆ¸å…¬å¸æ”¶å–çš„ä½£é‡‘å„ä¸ç›¸åŒï¼Œä¸€èˆ¬åœ¨ 0.02%-0.03% å·¦å³ï¼Œå–®ç­†ä½£é‡‘ä¸å°‘æ–¼ 5 å…ƒï¼›
å°èŠ±ç¨…åªåœ¨è³£å‡ºæ™‚æ”¶å–ï¼Œç¨…ç‡ç‚º 0.1%ã€‚</p>
<p>æœŸè²¨ï¼šæœŸè²¨äº¤æ˜“è²»ç”¨åŒ…æ‹¬äº¤æ˜“æ‰€æ”¶å–æ‰‹çºŒè²»å’ŒæœŸè²¨å…¬å¸æ”¶å–ä½£é‡‘ 2 éƒ¨åˆ†ï¼Œäº¤æ˜“æ‰€æ‰‹çºŒè²»è¼ƒç‚ºå›ºå®šï¼Œ
ä¸åŒæœŸè²¨å…¬å¸ä½£é‡‘ä¸ä¸€è‡´ï¼Œè€Œä¸”ä¸åŒæœŸè²¨å“ç¨®çš„æ”¶å–æ–¹å¼ä¸ç›¸åŒï¼Œæœ‰çš„æŒ‰ç…§å›ºå®šè²»ç”¨æ”¶å–ï¼Œæœ‰çš„æŒ‰æˆäº¤é‡‘é¡çš„å›ºå®šç™¾åˆ†æ¯”æ”¶å–ï¼š
åˆç´„ç¾åƒ¹<em>åˆç´„ä¹˜æ•¸</em>æ‰‹çºŒè²»è²»ç‡ã€‚é™¤äº†äº¤æ˜“è²»ç”¨å¤–ï¼ŒæœŸè²¨äº¤æ˜“æ™‚é‚„éœ€ä¸Šäº¤ä¸€å®šæ¯”ä¾‹çš„ä¿è­‰é‡‘ ã€‚</p>
<p>Backtrader ä¹Ÿæä¾›äº†å¤šç¨®äº¤æ˜“è²»è¨­å®šæ–¹å¼ï¼Œæ—¢å¯ä»¥ç°¡å–®çš„é€šéåƒæ•¸é€²è¡Œè¨­å®šï¼Œä¹Ÿå¯ä»¥çµåˆäº¤æ˜“æ¢ä»¶è‡ªè¨‚è²»ç”¨å‡½æ•¸ï¼š</p>
<p>æ ¹æ“šäº¤æ˜“å“ç¨®çš„ä¸åŒï¼ŒBacktrader å°‡äº¤æ˜“è²»ç”¨åˆ†ç‚º è‚¡ç¥¨ Stock-like æ¨¡å¼å’ŒæœŸè²¨ Futures-like ç¨®æ¨¡å¼ï¼›
æ ¹æ“šè¨ˆç®—æ–¹å¼çš„ä¸åŒï¼ŒBacktrader å°‡äº¤æ˜“è²»ç”¨åˆ†ç‚º PERC ç™¾åˆ†æ¯”è²»ç”¨æ¨¡å¼ å’Œ FIXED å›ºå®šè²»ç”¨æ¨¡å¼ ï¼›</p>
<p>Stock-like æ¨¡å¼èˆ‡ PERC ç™¾åˆ†æ¯”è²»ç”¨æ¨¡å¼å°æ‡‰ï¼ŒæœŸè²¨ Futures-like èˆ‡ FIXED å›ºå®šè²»ç”¨æ¨¡å¼å°æ‡‰ï¼›</p>
<p>åœ¨è¨­å®šäº¤æ˜“è²»ç”¨æ™‚ï¼Œæœ€å¸¸æ¶‰åŠå¦‚ä¸‹ 3 å€‹åƒæ•¸ï¼š</p>
<p>commissionï¼šæ‰‹çºŒè²» / ä½£é‡‘ï¼›</p>
<p>multï¼šä¹˜æ•¸ï¼›</p>
<p>marginï¼šä¿è­‰é‡‘ / ä¿è­‰é‡‘æ¯”ç‡ ã€‚</p>
<p>é›™é‚Šå¾µæ”¶ï¼šè²·å…¥å’Œè³£å‡ºæ“ä½œéƒ½è¦æ”¶å–ç›¸åŒçš„äº¤æ˜“è²»ç”¨ ã€‚</p>
<pre><code class="language-python">cerebro.broker.setcommission(
    # äº¤æ˜“æ‰‹çºŒè²»ï¼Œæ ¹æ“šmarginå–å€¼æƒ…æ³å€åˆ†æ˜¯ç™¾åˆ†æ¯”æ‰‹çºŒè²»é‚„æ˜¯å›ºå®šæ‰‹çºŒè²»
    commission=0.0,
    # æœŸè²¨ä¿è­‰é‡‘ï¼Œæ±ºå®šè‘—äº¤æ˜“è²»ç”¨çš„é¡å‹,åªæœ‰åœ¨stocklike=Falseæ™‚èµ·ä½œç”¨
    margin=None,
    # ä¹˜æ•¸ï¼Œç›ˆè™§æœƒæŒ‰è©²ä¹˜æ•¸é€²è¡Œæ”¾å¤§
    mult=1.0,
    # äº¤æ˜“è²»ç”¨è¨ˆç®—æ–¹å¼ï¼Œå–å€¼æœ‰ï¼š
    # 1.CommInfoBase.COMM_PERC ç™¾åˆ†æ¯”è²»ç”¨
    # 2.CommInfoBase.COMM_FIXED å›ºå®šè²»ç”¨
    # 3.None æ ¹æ“š margin å–å€¼ä¾†ç¢ºå®šé¡å‹
    commtype=None,
    # ç•¶äº¤æ˜“è²»ç”¨è™•æ–¼ç™¾åˆ†æ¯”æ¨¡å¼ä¸‹æ™‚ï¼Œcommission æ˜¯å¦ç‚º % å½¢å¼
    # Trueï¼Œè¡¨ç¤ºä¸ä»¥ % ç‚ºå–®ä½ï¼Œ0.XX å½¢å¼ï¼›Falseï¼Œè¡¨ç¤ºä»¥ % ç‚ºå–®ä½ï¼ŒXX% å½¢å¼
    percabs=True,
    # æ˜¯å¦ç‚ºè‚¡ç¥¨æ¨¡å¼ï¼Œè©²æ¨¡å¼é€šå¸¸ç”±marginå’Œcommtypeåƒæ•¸æ±ºå®š
    # margin=Noneæˆ–COMM_PERCæ¨¡å¼æ™‚ï¼Œå°±æœƒstocklike=Trueï¼Œå°æ‡‰è‚¡ç¥¨æ‰‹çºŒè²»ï¼›
    # marginè¨­å®šäº†å–å€¼æˆ–COMM_FIXEDæ¨¡å¼æ™‚,å°±æœƒstocklike=Falseï¼Œå°æ‡‰æœŸè²¨æ‰‹çºŒè²»
    stocklike=False,
    # è¨ˆç®—æŒæœ‰çš„ç©ºé ­é ­å¯¸çš„å¹´åŒ–åˆ©æ¯
    # days * price * abs(size) * (interest / 365)
    interest=0.0,
    # è¨ˆç®—æŒæœ‰çš„å¤šé ­é ­å¯¸çš„å¹´åŒ–åˆ©æ¯
    interest_long=False,
    # æ§“æ¡¿æ¯”ç‡ï¼Œäº¤æ˜“æ™‚æŒ‰è©²æ§“æ¡¿èª¿æ•´æ‰€éœ€ç¾é‡‘
    leverage=1.0,
    # è‡ªå‹•è¨ˆç®—ä¿è­‰é‡‘
    # å¦‚æœFalse,å‰‡é€šémarginåƒæ•¸ç¢ºå®šä¿è­‰é‡‘
    # å¦‚æœautomargin&lt;0,é€šémult*priceç¢ºå®šä¿è­‰é‡‘
    # å¦‚æœautomargin&gt;0,å¦‚æœautomargin*priceç¢ºå®šä¿è­‰é‡‘
    automargin=False,
    # äº¤æ˜“è²»ç”¨è¨­å®šä½œç”¨çš„è³‡æ–™é›†(ä¹Ÿå°±æ˜¯ä½œç”¨çš„æ¨™çš„)
    # å¦‚æœå–å€¼ç‚ºNoneï¼Œå‰‡é»˜èªä½œç”¨æ–¼æ‰€æœ‰è³‡æ–™é›†(ä¹Ÿå°±æ˜¯ä½œç”¨æ–¼æ‰€æœ‰assets)
    name=None)
</code></pre>
<p>å¾ä¸Šè¿°å„åƒæ•¸çš„å«ç¾©å’Œä½œç”¨å¯çŸ¥ï¼Œmargin ã€commtypeã€stocklike å­˜åœ¨ 2 ç¨®é»˜èªçš„çµ„æ…‹è¦å‰‡ï¼šè‚¡ç¥¨ç™¾åˆ†æ¯”è²»ç”¨ã€æœŸè²¨å›ºå®šè²»ç”¨ï¼Œå…·é«”å¦‚ä¸‹ï¼š
ç¬¬ 1 æ¢è¦å‰‡ï¼šæœªè¨­å®š marginï¼ˆå³ margin ç‚º 0 / None / Falseï¼‰â†’ commtype æœƒæŒ‡å‘ COMM_PERC ç™¾åˆ†æ¯”è²»ç”¨ â†’ åº•å±¤çš„ _stocklike å±¬æ€§æœƒè¨­å®šç‚º True â†’ å°æ‡‰çš„æ˜¯â€œè‚¡ç¥¨ç™¾åˆ†æ¯”è²»ç”¨â€ã€‚
æ‰€ä»¥å¦‚æœæƒ³ç‚ºè‚¡ç¥¨è¨­å®šäº¤æ˜“è²»ç”¨ï¼Œå°±ä»¤ margin = 0 / None / Falseï¼Œæˆ–è€…ä»¤ stocklike=Trueï¼›</p>
<p>ç¬¬ 2 æ¢è¦å‰‡ï¼šç‚º margin è¨­å®šäº†å–å€¼ â†’  commtype æœƒæŒ‡å‘ COMM_FIXED å›ºå®šè²»ç”¨ â†’ åº•å±¤çš„ _stocklike å±¬æ€§æœƒè¨­å®šç‚º False â†’ å°æ‡‰çš„æ˜¯â€œæœŸè²¨å›ºå®šè²»ç”¨â€ï¼Œå› ç‚ºåªæœ‰æœŸè²¨æ‰æœƒæ¶‰åŠä¿è­‰é‡‘ã€‚
æ‰€ä»¥å¦‚æœæƒ³ç‚ºæœŸè²¨è¨­å®šäº¤æ˜“è²»ç”¨ï¼Œå°±éœ€è¦è¨­å®š marginï¼Œæ­¤å¤–é‚„éœ€ä»¤ stocklike=Trueï¼Œmargin åƒæ•¸æ‰æœƒèµ·ä½œç”¨ ã€‚</p>
<p>è‡ªè¨‚äº¤æ˜“è²»ç”¨çš„ä¾‹å­</p>
<pre><code class="language-python"># è‡ªè¨‚æœŸè²¨ç™¾åˆ†æ¯”è²»ç”¨
class CommInfo_Fut_Perc_Mult(bt.CommInfoBase):
    params = (
      ('stocklike', False), # æŒ‡å®šç‚ºæœŸè²¨æ¨¡å¼
      ('commtype', bt.CommInfoBase.COMM_PERC), # ä½¿ç”¨ç™¾åˆ†æ¯”è²»ç”¨
      ('percabs', False), # commission ä»¥ % ç‚ºå–®ä½
    )

    def _getcommission(self, size, price, pseudoexec):
        # è¨ˆç®—äº¤æ˜“è²»ç”¨
        return (abs(size) * price) * (self.p.commission/100) * self.p.mult
    # pseudoexec ç”¨æ–¼æç¤ºç•¶å‰æ˜¯å¦åœ¨çœŸå¯¦çµ±è¨ˆäº¤æ˜“è²»ç”¨
    # å¦‚æœåªæ˜¯è©¦ç®—è²»ç”¨ï¼Œpseudoexec=False
    # å¦‚æœæ˜¯çœŸå¯¦çš„çµ±è¨ˆè²»ç”¨ï¼Œpseudoexec=True

comminfo = CommInfo_Fut_Perc_Mult(
    commission=0.1, # 0.1%
    mult=10,
    margin=2000) # å¯¦ä¾‹åŒ–
cerebro.broker.addcommissioninfo(comminfo)

# ä¸Šè¿°è‡ªè¨‚å‡½æ•¸ï¼Œä¹Ÿå¯ä»¥é€šé setcommission ä¾†å¯¦ç¾
cerebro.broker.setcommission(commission=0.1, #0.1%
                             mult=10,
                             margin=2000,
                             percabs=False,
                             commtype=bt.CommInfoBase.COMM_PERC,
                             stocklike=False)
</code></pre>
<p>ä¸‹é¢æ˜¯è€ƒæ…®ä½£é‡‘å’Œå°èŠ±ç¨…çš„è‚¡ç¥¨ç™¾åˆ†æ¯”è²»ç”¨ï¼š</p>
<pre><code class="language-python">class StockCommission(bt.CommInfoBase):
    params = (
      ('stocklike', True), # æŒ‡å®šç‚ºæœŸè²¨æ¨¡å¼
      ('commtype', bt.CommInfoBase.COMM_PERC), # ä½¿ç”¨ç™¾åˆ†æ¯”è²»ç”¨æ¨¡å¼
      ('percabs', True), # commission ä¸ä»¥ % ç‚ºå–®ä½
      ('stamp_duty', 0.001),) # å°èŠ±ç¨…é»˜èªç‚º 0.1%
    
    # è‡ªè¨‚è²»ç”¨è¨ˆç®—å…¬å¼
      def _getcommission(self, size, price, pseudoexec):
            if size &gt; 0: # è²·å…¥æ™‚ï¼Œåªè€ƒæ…®ä½£é‡‘
                return abs(size) * price * self.p.commission
            elif size &lt; 0: # è³£å‡ºæ™‚ï¼ŒåŒæ™‚è€ƒæ…®ä½£é‡‘å’Œå°èŠ±ç¨…
        return abs(size) * price * (self.p.commission + self.p.stamp_duty)
            else:
                return 0
</code></pre>
<p>æˆäº¤é‡é™åˆ¶ç®¡ç†</p>
<p>å½¢å¼1ï¼šbt.broker.fillers.FixedSize(size)</p>
<p>é€šé FixedSize() æ–¹æ³•è¨­å®šæœ€å¤§çš„å›ºå®šæˆäº¤é‡ï¼šsizeï¼Œè©²ç¨®æ¨¡å¼ä¸‹çš„æˆäº¤é‡é™åˆ¶è¦å‰‡å¦‚ä¸‹ï¼š</p>
<p>è¨‚å–®å¯¦éš›æˆäº¤é‡çš„ç¢ºå®šè¦å‰‡ï¼šå–ï¼ˆsizeã€è¨‚å–®åŸ·è¡Œé‚£å¤©çš„ volume ã€è¨‚å–®ä¸­è¦æ±‚çš„æˆäº¤æ•¸é‡ï¼‰ä¸­çš„æœ€å°è€…ï¼›</p>
<p>è¨‚å–®åŸ·è¡Œé‚£å¤©ï¼Œå¦‚æœè¨‚å–®ä¸­è¦æ±‚çš„æˆäº¤æ•¸é‡ç„¡æ³•å…¨éƒ¨æ»¿è¶³ï¼Œå‰‡åªæˆäº¤éƒ¨åˆ†æ•¸é‡ã€‚ç¬¬äºŒå¤©ä¸æœƒè£œå–®ã€‚</p>
<pre><code class="language-python"># é€šé BackBroker() é¡ç›´æ¥è¨­å®š
cerebro = Cerebro()
filler = bt.broker.fillers.FixedSize(size=xxx)
newbroker = bt.broker.BrokerBack(filler=filler)
cerebro.broker = newbroker

# é€šé set_filler æ–¹æ³•è¨­å®š
cerebro = Cerebro()
cerebro.broker.set_filler(bt.broker.fillers.FixedSize(size=xxx))

# self.order = self.buy(size=2000) # æ¯æ¬¡è²·å…¥ 2000 è‚¡
# cerebro.broker.set_filler(bt.broker.fillers.FixedSize(size=3000)) # å›ºå®šæœ€å¤§æˆäº¤é‡
</code></pre>
<p>å½¢å¼2ï¼šbt.broker.fillers.FixedBarPerc(perc)</p>
<p>é€šé FixedBarPerc(perc) å°‡ è¨‚å–®åŸ·è¡Œç•¶å¤© bar çš„ç¸½æˆäº¤é‡ volume çš„ perc % è¨­å®šç‚ºæœ€å¤§çš„å›ºå®šæˆäº¤é‡ï¼Œè©²æ¨¡å¼çš„æˆäº¤é‡é™åˆ¶è¦å‰‡å¦‚ä¸‹ï¼š</p>
<p>è¨‚å–®å¯¦éš›æˆäº¤é‡çš„ç¢ºå®šè¦å‰‡ï¼šå– ï¼ˆvolume * perc /100ã€è¨‚å–®ä¸­è¦æ±‚çš„æˆäº¤æ•¸é‡ï¼‰ çš„ æœ€å°è€…ï¼›
è¨‚å–®åŸ·è¡Œé‚£å¤©ï¼Œå¦‚æœè¨‚å–®ä¸­è¦æ±‚çš„æˆäº¤æ•¸é‡ç„¡æ³•å…¨éƒ¨æ»¿è¶³ï¼Œå‰‡åªæˆäº¤éƒ¨åˆ†æ•¸é‡ã€‚</p>
<pre><code class="language-python"># é€šé BackBroker() é¡ç›´æ¥è¨­å®š
cerebro = Cerebro()
filler = bt.broker.fillers.FixedBarPerc(perc=xxx)
newbroker = bt.broker.BrokerBack(filler=filler)
cerebro.broker = newbroker

# é€šé set_filler æ–¹æ³•è¨­å®š
cerebro = Cerebro()
cerebro.broker.set_filler(bt.broker.fillers.FixedBarPerc(perc=xxx))
# perc ä»¥ % ç‚ºå–®ä½ï¼Œå–å€¼ç¯„åœç‚º[0.0,100.0]

# self.order = self.buy(size=2000) # ä»¥ä¸‹ä¸€æ—¥é–‹ç›¤åƒ¹è²·å…¥2000è‚¡
# cerebro.broker.set_filler(bt.broker.fillers.FixedBarPerc(perc=50))
</code></pre>
<p>å½¢å¼3ï¼šbt.broker.fillers.BarPointPerc(minmov=0.01ï¼Œperc=100.0)</p>
<p>BarPointPerc() åœ¨è€ƒæ…®äº†åƒ¹æ ¼å€é–“çš„åŸºç¤ä¸Šç¢ºå®šæˆäº¤é‡ï¼Œåœ¨è¨‚å–®åŸ·è¡Œç•¶å¤©ï¼Œæˆäº¤é‡ç¢ºå®šè¦å‰‡ç‚ºï¼š</p>
<p>é€šé minmov å°‡ ç•¶å¤© bar çš„åƒ¹æ ¼å€é–“ low ~ high é€²è¡Œå‡å‹»åŠƒåˆ†ï¼Œå¾—åˆ°åŠƒåˆ†çš„ä»½æ•¸ï¼š</p>
<p>part =  (high -low +minmov)  // minmov  ï¼ˆå‘ä¸‹å–æ•´ï¼‰</p>
<p>å†å°ç•¶å¤© bar çš„ç¸½æˆäº¤é‡ volume ä¹ŸåŠƒåˆ†æˆç›¸åŒçš„ä»½æ•¸ part ï¼Œé€™æ¨£å°±èƒ½å¾—åˆ°æ¯ä»½çš„å¹³å‡æˆäº¤é‡ï¼š</p>
<p>volume_per = volume // part</p>
<p>æœ€çµ‚ï¼Œvolume_per * ï¼ˆperc / 100ï¼‰å°±æ˜¯å…è¨±çš„æœ€å¤§æˆäº¤é‡ï¼Œå¯¦éš›æˆäº¤æ™‚ï¼Œå°æ¯”è¨‚å–®ä¸­è¦æ±‚çš„æˆäº¤é‡ï¼Œå°±å¯ä»¥å¾—åˆ°æœ€çµ‚å¯¦éš›æˆäº¤é‡</p>
<p>å¯¦éš›æˆäº¤é‡ = min ( volume_per * ï¼ˆperc / 100ï¼‰, è¨‚å–®ä¸­è¦æ±‚çš„æˆäº¤æ•¸é‡ )</p>
<pre><code class="language-python"># é€šé BackBroker() é¡ç›´æ¥è¨­å®š
cerebro = Cerebro()
filler = bt.broker.fillers.BarPointPerc(minmov=0.01ï¼Œperc=100.0)
newbroker = bt.broker.BrokerBack(filler=filler)
cerebro.broker = newbroker

# é€šé set_filler æ–¹æ³•è¨­å®š
cerebro = Cerebro()
cerebro.broker.set_filler(bt.broker.fillers.BarPointPerc(minmov=0.01ï¼Œperc=100.0))
# perc ä»¥ % ç‚ºå–®ä½ï¼Œå–å€¼ç¯„åœç‚º[0.0,100.0]


# self.order = self.buy(size=2000) # ä»¥ä¸‹ä¸€æ—¥é–‹ç›¤åƒ¹è²·å…¥2000è‚¡

# cerebro.broker.set_filler(bt.broker.fillers.BarPointPerc(minmov=0.1, perc=50)) # è¡¨ç¤º 50%
</code></pre>
<p>äº¤æ˜“æ™‚æ©Ÿç®¡ç†
å°æ–¼äº¤æ˜“è¨‚å–®ç”Ÿæˆå’ŒåŸ·è¡Œæ™‚é–“ï¼ŒBacktrader é»˜èªæ˜¯ â€œç•¶æ—¥æ”¶ç›¤å¾Œä¸‹å–®ï¼Œæ¬¡æ—¥ä»¥é–‹ç›¤åƒ¹æˆäº¤â€ï¼Œé€™ç¨®æ¨¡å¼åœ¨å›æ¸¬éç¨‹ä¸­èƒ½æœ‰æ•ˆé¿å…ä½¿ç”¨æœªä¾†è³‡æ–™ã€‚
ä½†å°æ–¼ä¸€äº›ç‰¹æ®Šçš„äº¤æ˜“å ´æ™¯ï¼Œæ¯”å¦‚â€œall_inâ€æƒ…æ³ä¸‹ï¼Œç•¶æ—¥æ‰€ä¸‹è¨‚å–®ä¸­çš„æ•¸é‡æ˜¯ç”¨ç•¶æ—¥æ”¶ç›¤åƒ¹è¨ˆç®—çš„ï¼ˆç¸½è³‡é‡‘ / ç•¶æ—¥æ”¶ç›¤åƒ¹ï¼‰ï¼Œæ¬¡æ—¥ä»¥é–‹ç›¤åƒ¹åŸ·è¡Œè¨‚å–®æ™‚ï¼Œ
å¦‚æœé–‹ç›¤åƒ¹æ¯”æ˜¨å¤©çš„æ”¶ç›¤åƒ¹æé«˜äº†ï¼Œå°±æœƒå‡ºç¾å¯ç”¨è³‡é‡‘ä¸è¶³çš„æƒ…æ³ã€‚
ç‚ºäº†æ‡‰å°ä¸€äº›ç‰¹æ®Šäº¤æ˜“å ´æ™¯ï¼ŒBacktrader é‚„æä¾›äº†ä¸€äº› cheating å¼çš„äº¤æ˜“æ™‚æ©Ÿæ¨¡å¼ï¼šCheat-On-Open å’Œ Cheat-On-Closeã€‚</p>
<p>Cheat-On-Open</p>
<p>Cheat-On-Open æ˜¯â€œç•¶æ—¥ä¸‹å–®ï¼Œç•¶æ—¥ä»¥é–‹ç›¤åƒ¹æˆäº¤â€æ¨¡å¼ï¼Œåœ¨è©²æ¨¡å¼ä¸‹ï¼ŒStrategy ä¸­çš„äº¤æ˜“é‚è¼¯ä¸å†å¯«åœ¨ next() æ–¹æ³•è£¡ï¼Œè€Œæ˜¯å¯«åœ¨ç‰¹å®šçš„ next_open()ã€nextstart_open() ã€prenext_open() å‡½æ•¸ä¸­ï¼Œå…·é«”è¨­å®šå¯åƒè€ƒå¦‚ä¸‹æ¡ˆä¾‹ï¼š</p>
<p>æ–¹å¼1ï¼šbt.Cerebro(cheat_on_open=True)ï¼›
æ–¹å¼2ï¼šcerebro.broker.set_coo(True)ï¼›
æ–¹å¼3ï¼šBackBroker(coo=True)ã€‚</p>
<p>Cheat-On-Close</p>
<p>Cheat-On-Close æ˜¯â€œç•¶æ—¥ä¸‹å–®ï¼Œç•¶æ—¥ä»¥æ”¶ç›¤åƒ¹æˆäº¤â€æ¨¡å¼ï¼Œåœ¨è©²æ¨¡å¼ä¸‹ï¼ŒStrategy ä¸­çš„äº¤æ˜“é‚è¼¯ä»å¯«åœ¨ next() ä¸­ï¼Œå…·é«”è¨­å®šå¦‚ä¸‹ï¼š</p>
<p>æ–¹å¼1ï¼šcerebro.broker.set_coc(True)ï¼›
æ–¹å¼2ï¼šBackBroker(coc=True)</p>
<pre><code class="language-python">class TestStrategy(bt.Strategy):
    ......
    def next(self):
        # å–æ¶ˆä¹‹å‰æœªåŸ·è¡Œçš„è¨‚å–®
        if self.order:
            self.cancel(self.order)
        # æª¢æŸ¥æ˜¯å¦æœ‰æŒå€‰
        if not self.position:
            # 10æ—¥å‡ç·šä¸Šç©¿5æ—¥å‡ç·šï¼Œè²·å…¥
            if self.crossover &gt; 0:
                print('{} Send Buy, open {}'.format(self.data.datetime.date(),self.data.open[0]))
                self.order = self.buy(size=100) # ä»¥ä¸‹ä¸€æ—¥é–‹ç›¤åƒ¹è²·å…¥100è‚¡
        # # 10æ—¥å‡ç·šä¸‹ç©¿5æ—¥å‡ç·šï¼Œè³£å‡º
        elif self.crossover &lt; 0:
            self.order = self.close() # å¹³å€‰ï¼Œä»¥ä¸‹ä¸€æ—¥é–‹ç›¤åƒ¹è³£å‡º
    ......

# å¯¦ä¾‹åŒ–å¤§è…¦
cerebro= bt.Cerebro()
.......
# ç•¶æ—¥ä¸‹å–®ï¼Œç•¶æ—¥æ”¶ç›¤åƒ¹æˆäº¤
cerebro.broker.set_coc(True)
</code></pre>

                        <script src="https://utteranc.es/client.js"
                            repo="imxood/imxood.github.io"
                            issue-term="pathname"
                            theme="boxy-light"
                            crossorigin="anonymous"
                            async>
                        </script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../strategy/finlab.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../strategy/finlab.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../strategy/backtrader/Pythonå›æ¸¬æ¡†æ¶ä¸€Backtraderä»‹ç´¹.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../theme/custom/mermaid.min.js"></script>
        <script type="text/javascript" src="../../theme/custom/mermaid-init.js"></script>


    </body>
</html>
